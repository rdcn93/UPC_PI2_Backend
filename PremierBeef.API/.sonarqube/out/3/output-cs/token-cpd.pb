ù'
VD:\Proyectos\NetCore\UPC_PI2_Backend\PremierBeef.Infrastructure\Data\PremierContext.cs
	namespace 	
PremierBeef
 
. 
Infrastructure $
.$ %
Data% )
{ 
public 

class 
PremierContext 
:  !
	DbContext" +
{ 
public		 
PremierContext		 
(		 
)		 
{

 	
} 	
public 
PremierContext 
( 
DbContextOptions .
<. /
PremierContext/ =
>= >
options? F
)F G
:H I
baseJ N
(N O
optionsO V
)V W
{ 	
} 	
public 
DbSet 
< 

tb_usuario 
>  
usuarios! )
{* +
get, /
;/ 0
set1 4
;4 5
}6 7
public 
DbSet 
< 
tb_rol 
> 
roles "
{# $
get% (
;( )
set* -
;- .
}/ 0
public 
DbSet 
< 
tb_producto  
>  !
	productos" +
{, -
get. 1
;1 2
set3 6
;6 7
}8 9
public 
DbSet 
< !
tb_producto_categoria *
>* +

categorias, 6
{7 8
get9 <
;< =
set> A
;A B
}C D
public 
DbSet 
< 
tb_proveedor !
>! "
proveedores# .
{/ 0
get1 4
;4 5
set6 9
;9 :
}; <
public 
DbSet 
< 

tb_cliente 
>  
clientes! )
{* +
get, /
;/ 0
set1 4
;4 5
}6 7
public 
DbSet 
< 

tb_almacen 
>  
	almacenes! *
{+ ,
get- 0
;0 1
set2 5
;5 6
}7 8
public 
DbSet 
< 

tb_reclamo 
>  
reclamos! )
{* +
get, /
;/ 0
set1 4
;4 5
}6 7
public 
DbSet 
< 
tb_reclamo_tipo $
>$ %
reclamoTipos& 2
{3 4
get5 8
;8 9
set: =
;= >
}? @
public 
DbSet 
< 
tb_tipo_documento &
>& '
tipoDocumentos( 6
{7 8
get9 <
;< =
set> A
;A B
}C D
public 
DbSet 
< 
tb_promocion !
>! "
promociones# .
{/ 0
get1 4
;4 5
set6 9
;9 :
}; <
public 
virtual 
DbSet 
<  
tb_promocion_detalle 1
>1 2
promocionesDetalle3 E
{F G
getH K
;K L
setM P
;P Q
}R S
[   	
	NotMapped  	 
]   
public!! 
DbSet!! 
<!! "
dbo_GetReporteReclamos!! +
>!!+ ,"
dbo_GetReporteReclamos!!- C
{!!D E
get!!F I
;!!I J
set!!K N
;!!N O
}!!P Q
	protected## 
override## 
void## 
OnModelCreating##  /
(##/ 0
ModelBuilder##0 <
modelBuilder##= I
)##I J
{$$ 	
modelBuilder&& 
.&& +
ApplyConfigurationsFromAssembly&& 8
(&&8 9
typeof&&9 ?
(&&? @
PremierContext&&@ N
)&&N O
.&&O P
Assembly&&P X
)&&X Y
;&&Y Z
modelBuilder(( 
.(( 
Entity(( 
<((   
tb_promocion_detalle((  4
>((4 5
(((5 6
)((6 7
.((7 8
HasKey((8 >
(((> ?
x((? @
=>((A C
new((D G
{((H I
x((J K
.((K L
IdPromocion((L W
,((W X
x((Y Z
.((Z [

IdProducto(([ e
}((f g
)((g h
;((h i
}.. 	
	protected00 
override00 
void00 
OnConfiguring00  -
(00- .#
DbContextOptionsBuilder00. E
optionsBuilder00F T
)00T U
{11 	
base22 
.22 
OnConfiguring22 
(22 
optionsBuilder22 -
)22- .
;22. /
optionsBuilder44 
.44 &
EnableSensitiveDataLogging44 5
(445 6
)446 7
;447 8
}55 	
}66 
}77 ›
`D:\Proyectos\NetCore\UPC_PI2_Backend\PremierBeef.Infrastructure\Models\dbo_GetReporteReclamos.cs
	namespace 	
PremierBeef
 
. 
Infrastructure $
.$ %
Models% +
{ 
public 

class "
dbo_GetReporteReclamos '
{ 
public 
int 
Id 
{ 
get 
; 
set  
;  !
}" #
public 
string 
Detalle 
{ 
get  #
;# $
set% (
;( )
}* +
public 
string 
UsuarioRegistro %
{& '
get( +
;+ ,
set- 0
;0 1
}2 3
public 
string #
UsuarioRegistroCompleto -
{. /
get0 3
;3 4
set5 8
;8 9
}: ;
public		 
string		 
FechaReclamo		 "
{		# $
get		% (
;		( )
set		* -
;		- .
}		/ 0
public

 
string

 
TipoReclamo

 !
{

" #
get

$ '
;

' (
set

) ,
;

, -
}

. /
public 
int 
Pedido 
{ 
get 
;  
set! $
;$ %
}& '
public 
string 
Cliente 
{ 
get  #
;# $
set% (
;( )
}* +
public 
string 
	Respuesta 
{  !
get" %
;% &
set' *
;* +
}, -
public 
string 
UsuarioRespuesta &
{' (
get) ,
;, -
set. 1
;1 2
}3 4
public 
string $
UsuarioRespuestaCompleto .
{/ 0
get1 4
;4 5
set6 9
;9 :
}; <
public 
string 
FechaRespuesta $
{% &
get' *
;* +
set, /
;/ 0
}1 2
} 
} ·
TD:\Proyectos\NetCore\UPC_PI2_Backend\PremierBeef.Infrastructure\Models\tb_almacen.cs
	namespace 	
PremierBeef
 
. 
Infrastructure $
.$ %
Models% +
{ 
[ 
Table 

(
 
$str 
) 
] 
public 

class 

tb_almacen 
{ 
[		 	
Key			 
]		 
[

 	
DatabaseGenerated

	 
(

 #
DatabaseGeneratedOption

 2
.

2 3
Identity

3 ;
)

; <
]

< =
public 
int 
Id 
{ 
get 
; 
set  
;  !
}" #
public 
string 
Nombre 
{ 
get "
;" #
set$ '
;' (
}) *
public 
string 
Descripcion !
{" #
get$ '
;' (
set) ,
;, -
}. /
public 
string 
	Direccion 
{  !
get" %
;% &
set' *
;* +
}, -
public 
string 
Telefono 
{  
get! $
;$ %
set& )
;) *
}+ ,
public 
bool 
Estado 
{ 
get  
;  !
set" %
;% &
}' (
public 
DateTime 
FecRegistro #
{$ %
get& )
;) *
set+ .
;. /
}0 1
public 
DateTime 
FecModificacion '
{( )
get* -
;- .
set/ 2
;2 3
}4 5
} 
} ‰
TD:\Proyectos\NetCore\UPC_PI2_Backend\PremierBeef.Infrastructure\Models\tb_cliente.cs
	namespace 	
PremierBeef
 
. 
Infrastructure $
.$ %
Models% +
{ 
[ 
Table 

(
 
$str 
) 
] 
public 

class 

tb_cliente 
{ 
[		 	
Key			 
]		 
[

 	
DatabaseGenerated

	 
(

 #
DatabaseGeneratedOption

 2
.

2 3
Identity

3 ;
)

; <
]

< =
public 
int 
Id 
{ 
get 
; 
set  
;  !
}" #
public 
string 
Nombre 
{ 
get "
;" #
set$ '
;' (
}) *
public 
string 

ApePaterno  
{! "
get# &
;& '
set( +
;+ ,
}- .
public 
string 

ApeMaterno  
{! "
get# &
;& '
set( +
;+ ,
}- .
public 
string 
Telefono 
{  
get! $
;$ %
set& )
;) *
}+ ,
public 
string 
	Direccion 
{  !
get" %
;% &
set' *
;* +
}, -
public 
int 
IdTipoDocumento "
{# $
get% (
;( )
set* -
;- .
}/ 0
public 
string 
NumeroDocumento %
{& '
get( +
;+ ,
set- 0
;0 1
}2 3
public 
bool 
EnviarPromociones %
{& '
get( +
;+ ,
set- 0
;0 1
}2 3
public 
bool 
Estado 
{ 
get  
;  !
set" %
;% &
}' (
public 
DateTime 
FecRegistro #
{$ %
get& )
;) *
set+ .
;. /
}0 1
public 
DateTime 
FecModificacion '
{( )
get* -
;- .
set/ 2
;2 3
}4 5
} 
} Ü
UD:\Proyectos\NetCore\UPC_PI2_Backend\PremierBeef.Infrastructure\Models\tb_producto.cs
	namespace 	
PremierBeef
 
. 
Infrastructure $
.$ %
Models% +
{ 
[ 
Table 

(
 
$str 
) 
] 
public 

class 
tb_producto 
{ 
[		 	
Key			 
]		 
[

 	
DatabaseGenerated

	 
(

 #
DatabaseGeneratedOption

 2
.

2 3
Identity

3 ;
)

; <
]

< =
public 
int 
Id 
{ 
get 
; 
set  
;  !
}" #
public 
string 
Nombre 
{ 
get "
;" #
set$ '
;' (
}) *
public 
string 
Descripcion !
{" #
get$ '
;' (
set) ,
;, -
}. /
public 
decimal 
Precio 
{ 
get  #
;# $
set% (
;( )
}* +
[ 	

ForeignKey	 
( 
$str "
)" #
]# $
public 
int 
IdCategoria 
{  
get! $
;$ %
set& )
;) *
}+ ,
[ 	

ForeignKey	 
( 
$str "
)" #
]# $
public 
int 
IdProveedor 
{  
get! $
;$ %
set& )
;) *
}+ ,
public 
DateTime 
FecRegistro #
{$ %
get& )
;) *
set+ .
;. /
}0 1
public 
DateTime 
FecModificacion '
{( )
get* -
;- .
set/ 2
;2 3
}4 5
public 
List 
< 
tb_promocion  
>  !
promociones" -
{. /
get0 3
;3 4
set5 8
;8 9
}: ;
} 
} ¯	
_D:\Proyectos\NetCore\UPC_PI2_Backend\PremierBeef.Infrastructure\Models\tb_producto_categoria.cs
	namespace 	
PremierBeef
 
. 
Infrastructure $
.$ %
Models% +
{ 
[ 
Table 

(
 
$str "
)" #
]# $
public 

class !
tb_producto_categoria &
{ 
[		 	
Key			 
]		 
[

 	
DatabaseGenerated

	 
(

 #
DatabaseGeneratedOption

 2
.

2 3
Identity

3 ;
)

; <
]

< =
public 
int 
Id 
{ 
get 
; 
set  
;  !
}" #
public 
string 
Nombre 
{ 
get "
;" #
set$ '
;' (
}) *
public 
string 
Descripcion !
{" #
get$ '
;' (
set) ,
;, -
}. /
public 
bool 
Estado 
{ 
get  
;  !
set" %
;% &
}' (
} 
} ·
VD:\Proyectos\NetCore\UPC_PI2_Backend\PremierBeef.Infrastructure\Models\tb_promocion.cs
	namespace 	
PremierBeef
 
. 
Infrastructure $
.$ %
Models% +
{ 
[ 
Table 

(
 
$str 
) 
] 
public 

class 
tb_promocion 
{		 
[

 	
Key

	 
]

 
[ 	
DatabaseGenerated	 
( #
DatabaseGeneratedOption 2
.2 3
Identity3 ;
); <
]< =
public 
int 
Id 
{ 
get 
; 
set  
;  !
}" #
public 
string 
Nombre 
{ 
get "
;" #
set$ '
;' (
}) *
public 
string 
Descripcion !
{" #
get$ '
;' (
set) ,
;, -
}. /
public 
DateTime 
	FecInicio !
{" #
get$ '
;' (
set) ,
;, -
}. /
public 
DateTime 
FecFin 
{  
get! $
;$ %
set& )
;) *
}+ ,
public 
decimal 
PorcentajeDescuento *
{+ ,
get- 0
;0 1
set2 5
;5 6
}7 8
public 
bool 
Estado 
{ 
get  
;  !
set" %
;% &
}' (
public 
DateTime 
FecRegistro #
{$ %
get& )
;) *
set+ .
;. /
}0 1
public 
DateTime 
FecModificacion '
{( )
get* -
;- .
set/ 2
;2 3
}4 5
public 
List 
< 
tb_producto 
>  
	productos! *
{+ ,
get- 0
;0 1
set2 5
;5 6
}7 8
} 
} ç
^D:\Proyectos\NetCore\UPC_PI2_Backend\PremierBeef.Infrastructure\Models\tb_promocion_detalle.cs
	namespace 	
PremierBeef
 
. 
Infrastructure $
.$ %
Models% +
{ 
[ 
Table 

(
 
$str !
)! "
]" #
public 

class  
tb_promocion_detalle %
{ 
public 
int 
IdPromocion 
{  
get! $
;$ %
set& )
;) *
}+ ,
public		 
int		 

IdProducto		 
{		 
get		  #
;		# $
set		% (
;		( )
}		* +
public

 
bool

 
Estado

 
{

 
get

  
;

  !
set

" %
;

% &
}

' (
} 
} ê
VD:\Proyectos\NetCore\UPC_PI2_Backend\PremierBeef.Infrastructure\Models\tb_proveedor.cs
	namespace 	
PremierBeef
 
. 
Infrastructure $
.$ %
Models% +
{ 
[ 
Table 

(
 
$str 
) 
] 
public 

class 
tb_proveedor 
{ 
[		 	
Key			 
]		 
[

 	
DatabaseGenerated

	 
(

 #
DatabaseGeneratedOption

 2
.

2 3
Identity

3 ;
)

; <
]

< =
public 
int 
Id 
{ 
get 
; 
set  
;  !
}" #
public 
string 
Nombre 
{ 
get "
;" #
set$ '
;' (
}) *
public 
string 
Descripcion !
{" #
get$ '
;' (
set) ,
;, -
}. /
public 
string 
	Direccion 
{  !
get" %
;% &
set' *
;* +
}, -
public 
string 
Telefono 
{  
get! $
;$ %
set& )
;) *
}+ ,
public 
int 
IdTipoDocumento "
{# $
get% (
;( )
set* -
;- .
}/ 0
public 
string 
NumeroDocumento %
{& '
get( +
;+ ,
set- 0
;0 1
}2 3
public 
DateTime 
FecRegistro #
{$ %
get& )
;) *
set+ .
;. /
}0 1
public 
DateTime 
FecModificacion '
{( )
get* -
;- .
set/ 2
;2 3
}4 5
} 
} ˙
TD:\Proyectos\NetCore\UPC_PI2_Backend\PremierBeef.Infrastructure\Models\tb_reclamo.cs
	namespace 	
PremierBeef
 
. 
Infrastructure $
.$ %
Models% +
{ 
[ 
Table 

(
 
$str 
) 
] 
public 

class 

tb_reclamo 
{ 
[		 	
Key			 
]		 
[

 	
DatabaseGenerated

	 
(

 #
DatabaseGeneratedOption

 2
.

2 3
Identity

3 ;
)

; <
]

< =
public 
int 
Id 
{ 
get 
; 
set  
;  !
}" #
public 
string 
Detalle 
{ 
get  #
;# $
set% (
;( )
}* +
public 
int 
	IdUsuario 
{ 
get "
;" #
set$ '
;' (
}) *
public 
int 
IdPedido 
{ 
get !
;! "
set# &
;& '
}( )
public 
int 
IdTipoReclamo  
{! "
get# &
;& '
set( +
;+ ,
}- .
public 
string 
	Respuesta 
{  !
get" %
;% &
set' *
;* +
}, -
public 
int 
IdUsuarioRespuesta %
{& '
get( +
;+ ,
set- 0
;0 1
}2 3
public 
DateTime 
FecRegistro #
{$ %
get& )
;) *
set+ .
;. /
}0 1
public 
DateTime 
FecModificacion '
{( )
get* -
;- .
set/ 2
;2 3
}4 5
public 
DateTime 

FecReclamo "
{# $
get% (
;( )
set* -
;- .
}/ 0
public 
DateTime 
FecRespuesta $
{% &
get' *
;* +
set, /
;/ 0
}1 2
public 
int 
EstadoReclamo  
{! "
get# &
;& '
set( +
;+ ,
}- .
public 
int 
Estado 
{ 
get 
;  
set! $
;$ %
}& '
} 
} Ï	
YD:\Proyectos\NetCore\UPC_PI2_Backend\PremierBeef.Infrastructure\Models\tb_reclamo_tipo.cs
	namespace 	
PremierBeef
 
. 
Infrastructure $
.$ %
Models% +
{ 
[ 
Table 

(
 
$str 
) 
] 
public 

class 
tb_reclamo_tipo  
{ 
[		 	
Key			 
]		 
[

 	
DatabaseGenerated

	 
(

 #
DatabaseGeneratedOption

 2
.

2 3
Identity

3 ;
)

; <
]

< =
public 
int 
Id 
{ 
get 
; 
set  
;  !
}" #
public 
string 
Nombre 
{ 
get "
;" #
set$ '
;' (
}) *
public 
string 
Descripcion !
{" #
get$ '
;' (
set) ,
;, -
}. /
public 
bool 
Estado 
{ 
get  
;  !
set" %
;% &
}' (
} 
} ⁄	
PD:\Proyectos\NetCore\UPC_PI2_Backend\PremierBeef.Infrastructure\Models\tb_rol.cs
	namespace 	
PremierBeef
 
. 
Infrastructure $
.$ %
Models% +
{ 
[ 
Table 

(
 
$str 
) 
] 
public 

class 
tb_rol 
{ 
[		 	
Key			 
]		 
[

 	
DatabaseGenerated

	 
(

 #
DatabaseGeneratedOption

 2
.

2 3
Identity

3 ;
)

; <
]

< =
public 
int 
Id 
{ 
get 
; 
set  
;  !
}" #
public 
string 
Nombre 
{ 
get "
;" #
set$ '
;' (
}) *
public 
string 
Descripcion !
{" #
get$ '
;' (
set) ,
;, -
}. /
public 
bool 
Estado 
{ 
get  
;  !
set" %
;% &
}' (
} 
} 	
[D:\Proyectos\NetCore\UPC_PI2_Backend\PremierBeef.Infrastructure\Models\tb_tipo_documento.cs
	namespace 	
PremierBeef
 
. 
Infrastructure $
.$ %
Models% +
{ 
[ 
Table 

(
 
$str 
) 
]  
public 

class 
tb_tipo_documento "
{ 
[		 	
Key			 
]		 
[

 	
DatabaseGenerated

	 
(

 #
DatabaseGeneratedOption

 2
.

2 3
Identity

3 ;
)

; <
]

< =
public 
int 
Id 
{ 
get 
; 
set  
;  !
}" #
public 
string 
Nombre 
{ 
get "
;" #
set$ '
;' (
}) *
public 
string 
Descripcion !
{" #
get$ '
;' (
set) ,
;, -
}. /
public 
bool 
Estado 
{ 
get  
;  !
set" %
;% &
}' (
} 
} ì
TD:\Proyectos\NetCore\UPC_PI2_Backend\PremierBeef.Infrastructure\Models\tb_usuario.cs
	namespace 	
PremierBeef
 
. 
Infrastructure $
.$ %
Models% +
{ 
[ 
Table 

(
 
$str 
) 
] 
public 

class 

tb_usuario 
{ 
[		 	
Key			 
]		 
[

 	
DatabaseGenerated

	 
(

 #
DatabaseGeneratedOption

 2
.

2 3
Identity

3 ;
)

; <
]

< =
public 
int 
Id 
{ 
get 
; 
set  
;  !
}" #
public 
string 
Usuario 
{ 
get  #
;# $
set% (
;( )
}* +
public 
string 
Clave 
{ 
get !
;! "
set# &
;& '
}( )
public 
string 
Correo 
{ 
get "
;" #
set$ '
;' (
}) *
public 
string 
Nombre 
{ 
get "
;" #
set$ '
;' (
}) *
public 
string 

ApePaterno  
{! "
get# &
;& '
set( +
;+ ,
}- .
public 
string 

ApeMaterno  
{! "
get# &
;& '
set( +
;+ ,
}- .
public 
string 
Telefono 
{  
get! $
;$ %
set& )
;) *
}+ ,
[ 	

ForeignKey	 
( 
$str 
) 
] 
public 
int 
IdRol 
{ 
get 
; 
set  #
;# $
}% &
public 
DateTime 
FecRegistro #
{$ %
get& )
;) *
set+ .
;. /
}0 1
public 
DateTime 
FecModificacion '
{( )
get* -
;- .
set/ 2
;2 3
}4 5
} 
} ≥l
_D:\Proyectos\NetCore\UPC_PI2_Backend\PremierBeef.Infrastructure\Repository\AlmacenRepository.cs
	namespace 	
PremierBeef
 
. 
Infrastructure $
.$ %

Repository% /
{ 
public		 

class		 
AlmacenRepository		 "
:		# $
IAlmacenRepository		% 7
{

 
private 
readonly 
PremierContext '
_context( 0
;0 1
public 
AlmacenRepository  
(  !
PremierContext! /
context0 7
)7 8
{ 	
_context 
= 
context 
; 
} 	
public 
Task 
< 
int 
> 

AddAlmacen #
(# $
Almacen$ +
us, .
). /
{ 	
int 
newId 
= 
$num 
; 

tb_almacen 
tb_cli 
= 
new  #

tb_almacen$ .
{ 
Nombre 
= 
us 
. 
nombre "
," #
Descripcion 
= 
us  
.  !
descripcion! ,
,, -
	Direccion 
= 
us 
. 
	direccion (
,( )
Telefono 
= 
us 
. 
telefono &
,& '
Estado 
= 
us 
. 
estado "
," #
FecRegistro 
= 
us  
.  !
fecRegistro! ,
,, -
FecModificacion 
=  !
us" $
.$ %
fecModificacion% 4
} 
; 
try   
{!! 
_context"" 
."" 
	almacenes"" "
.""" #
Add""# &
(""& '
tb_cli""' -
)""- .
;"". /
_context## 
.## 
SaveChanges## $
(##$ %
)##% &
;##& '
newId%% 
=%% 
tb_cli%% 
.%% 
Id%% !
;%%! "
}&& 
catch'' 
('' 
	Exception'' 
)'' 
{(( 
tb_cli)) 
.)) 
Id)) 
=)) 
$num)) 
;)) 
}** 
return,, 
Task,, 
.,, 

FromResult,, "
(,," #
newId,,# (
),,( )
;,,) *
}-- 	
public// 
Task// 
<// 
int// 
>// 
UpdateAlmacen// &
(//& '
Almacen//' .
us/// 1
)//1 2
{00 	

tb_almacen11 
tb_cli11 
=11 
new11  #

tb_almacen11$ .
{22 
Id33 
=33 
us33 
.33 
id33 
,33 
Nombre44 
=44 
us44 
.44 
nombre44 "
,44" #
Descripcion55 
=55 
us55  
.55  !
descripcion55! ,
,55, -
	Direccion66 
=66 
us66 
.66 
	direccion66 (
,66( )
Telefono77 
=77 
us77 
.77 
telefono77 &
,77& '
Estado88 
=88 
us88 
.88 
estado88 "
,88" #
FecRegistro99 
=99 
us99  
.99  !
fecRegistro99! ,
,99, -
FecModificacion:: 
=::  !
DateTime::" *
.::* +
Now::+ .
};; 
;;; 
try== 
{>> 
_contextCC 
.CC 
	almacenesCC "
.CC" #
AttachCC# )
(CC) *
tb_cliCC* 0
)CC0 1
;CC1 2
_contextDD 
.DD 
EntryDD 
(DD 
tb_cliDD %
)DD% &
.DD& '
StateDD' ,
=DD- .
EntityStateDD/ :
.DD: ;
ModifiedDD; C
;DDC D
_contextEE 
.EE 
EntryEE 
(EE 
tb_cliEE %
)EE% &
.EE& '
PropertyEE' /
(EE/ 0
xEE0 1
=>EE2 4
xEE5 6
.EE6 7
IdEE7 9
)EE9 :
.EE: ;

IsModifiedEE; E
=EEF G
falseEEH M
;EEM N
_contextFF 
.FF 
EntryFF 
(FF 
tb_cliFF %
)FF% &
.FF& '
PropertyFF' /
(FF/ 0
XFF0 1
=>FF2 4
XFF5 6
.FF6 7
FecRegistroFF7 B
)FFB C
.FFC D

IsModifiedFFD N
=FFO P
falseFFQ V
;FFV W
_contextHH 
.HH 
	almacenesHH "
.HH" #
UpdateHH# )
(HH) *
tb_cliHH* 0
)HH0 1
;HH1 2
_contextII 
.II 
SaveChangesII $
(II$ %
)II% &
;II& '
}JJ 
catchKK 
(KK 
	ExceptionKK 
)KK 
{LL 
}NN 
returnQQ 
TaskQQ 
.QQ 

FromResultQQ "
(QQ" #
$numQQ# $
)QQ$ %
;QQ% &
}RR 	
publicTT 
TaskTT 
<TT 
intTT 
>TT 
RemoveAlmacenTT &
(TT& '
intTT' *
idTT+ -
)TT- .
{UU 	
varVV 
AlmacenVV 
=VV 
_contextVV "
.VV" #
	almacenesVV# ,
.VV, -
FindVV- 1
(VV1 2
idVV2 4
)VV4 5
;VV5 6
ifWW 
(WW 
AlmacenWW 
==WW 
nullWW 
)WW  
{XX 
returnYY 
TaskYY 
.YY 

FromResultYY &
(YY& '
$numYY' (
)YY( )
;YY) *
}ZZ 
_context\\ 
.\\ 
	almacenes\\ 
.\\ 
Remove\\ %
(\\% &
Almacen\\& -
)\\- .
;\\. /
_context]] 
.]] 
SaveChanges]]  
(]]  !
)]]! "
;]]" #
return__ 
Task__ 
.__ 

FromResult__ "
(__" #
$num__# $
)__$ %
;__% &
}`` 	
publicbb 
Taskbb 
<bb 
Almacenbb 
>bb 
GetAlmacenByIdbb +
(bb+ ,
intbb, /
idbb0 2
)bb2 3
{cc 	
vardd 
usdd 
=dd 
_contextdd 
.dd 
	almacenesdd '
.dd' (
Finddd( ,
(dd, -
iddd- /
)dd/ 0
;dd0 1
ifff 
(ff 
usff 
!=ff 
nullff 
)ff 
{gg 
Almacenhh 
tb_clihh 
=hh  
newhh! $
Almacenhh% ,
{ii 
idjj 
=jj 
usjj 
.jj 
Idjj 
,jj 
nombrekk 
=kk 
uskk 
.kk  
Nombrekk  &
,kk& '
descripcionll 
=ll  !
usll" $
.ll$ %
Descripcionll% 0
,ll0 1
	direccionmm 
=mm 
usmm  "
.mm" #
	Direccionmm# ,
,mm, -
telefononn 
=nn 
usnn !
.nn! "
Telefononn" *
,nn* +
estadooo 
=oo 
usoo 
.oo  
Estadooo  &
,oo& '
fecRegistropp 
=pp  !
uspp" $
.pp$ %
FecRegistropp% 0
,pp0 1
fecModificacionqq #
=qq$ %
usqq& (
.qq( )
FecModificacionqq) 8
}rr 
;rr 
returntt 
Tasktt 
.tt 

FromResulttt &
(tt& '
tb_clitt' -
)tt- .
;tt. /
}uu 
elsevv 
returnww 
Taskww 
.ww 

FromResultww &
<ww& '
Almacenww' .
>ww. /
(ww/ 0
nullww0 4
)ww4 5
;ww5 6
}xx 	
publiczz 
Taskzz 
<zz 
Almacenzz 
>zz 
GetAlmacenByAlmacenzz 0
(zz0 1
stringzz1 7
Almacenzz8 ?
)zz? @
{{{ 	
try|| 
{}} 
var~~ 
us~~ 
=~~ 
_context~~ !
.~~! "
	almacenes~~" +
.~~+ ,
Where~~, 1
(~~1 2
x~~2 3
=>~~4 6
x~~7 8
.~~8 9
Nombre~~9 ?
.~~? @
Trim~~@ D
(~~D E
)~~E F
.~~F G
ToLower~~G N
(~~N O
)~~O P
.~~P Q
Equals~~Q W
(~~W X
Almacen~~X _
.~~_ `
ToLower~~` g
(~~g h
)~~h i
)~~i j
)~~j k
.~~k l
FirstOrDefault~~l z
(~~z {
)~~{ |
;~~| }
if
ÄÄ 
(
ÄÄ 
us
ÄÄ 
!=
ÄÄ 
null
ÄÄ 
)
ÄÄ 
{
ÅÅ 
Almacen
ÇÇ 
tb_cli
ÇÇ "
=
ÇÇ# $
new
ÇÇ% (
Almacen
ÇÇ) 0
{
ÉÉ 
id
ÑÑ 
=
ÑÑ 
us
ÑÑ 
.
ÑÑ  
Id
ÑÑ  "
,
ÑÑ" #
nombre
ÖÖ 
=
ÖÖ  
us
ÖÖ! #
.
ÖÖ# $
Nombre
ÖÖ$ *
,
ÖÖ* +
descripcion
ÜÜ #
=
ÜÜ$ %
us
ÜÜ& (
.
ÜÜ( )
Descripcion
ÜÜ) 4
,
ÜÜ4 5
	direccion
áá !
=
áá" #
us
áá$ &
.
áá& '
	Direccion
áá' 0
,
áá0 1
telefono
àà  
=
àà! "
us
àà# %
.
àà% &
Telefono
àà& .
,
àà. /
estado
ââ 
=
ââ  
us
ââ! #
.
ââ# $
Estado
ââ$ *
,
ââ* +
fecRegistro
ää #
=
ää$ %
us
ää& (
.
ää( )
FecRegistro
ää) 4
,
ää4 5
fecModificacion
ãã '
=
ãã( )
us
ãã* ,
.
ãã, -
FecModificacion
ãã- <
}
åå 
;
åå 
return
éé 
Task
éé 
.
éé  

FromResult
éé  *
(
éé* +
tb_cli
éé+ 1
)
éé1 2
;
éé2 3
}
èè 
}
ëë 
catch
íí 
(
íí 
	Exception
íí 
)
íí 
{
ìì 
return
îî 
Task
îî 
.
îî 

FromResult
îî &
<
îî& '
Almacen
îî' .
>
îî. /
(
îî/ 0
null
îî0 4
)
îî4 5
;
îî5 6
}
ïï 
return
óó 
Task
óó 
.
óó 

FromResult
óó "
<
óó" #
Almacen
óó# *
>
óó* +
(
óó+ ,
null
óó, 0
)
óó0 1
;
óó1 2
}
òò 	
public
öö 
async
öö 
Task
öö 
<
öö 
List
öö 
<
öö 
Almacen
öö &
>
öö& '
>
öö' (
GetAlmacens
öö) 4
(
öö4 5
)
öö5 6
{
õõ 	
List
úú 
<
úú 
Almacen
úú 
>
úú 
	almacenes
úú #
=
úú$ %
new
úú& )
List
úú* .
<
úú. /
Almacen
úú/ 6
>
úú6 7
(
úú7 8
)
úú8 9
;
úú9 :
try
ûû 
{
üü 
var
†† 
result
†† 
=
†† 
await
†† "
Task
††# '
.
††' (
Run
††( +
(
††+ ,
(
††, -
)
††- .
=>
††/ 1
_context
††2 :
.
††: ;
	almacenes
††; D
.
††D E
ToListAsync
††E P
(
††P Q
)
††Q R
)
††R S
;
††S T
foreach
¢¢ 
(
¢¢ 
var
¢¢ 
us
¢¢ 
in
¢¢  "
result
¢¢# )
)
¢¢) *
{
££ 
	almacenes
§§ 
.
§§ 
Add
§§ !
(
§§! "
new
§§" %
Almacen
§§& -
{
•• 
id
¶¶ 
=
¶¶ 
us
¶¶ 
.
¶¶  
Id
¶¶  "
,
¶¶" #
nombre
ßß 
=
ßß  
us
ßß! #
.
ßß# $
Nombre
ßß$ *
,
ßß* +
descripcion
®® #
=
®®$ %
us
®®& (
.
®®( )
Descripcion
®®) 4
,
®®4 5
	direccion
©© !
=
©©" #
us
©©$ &
.
©©& '
	Direccion
©©' 0
,
©©0 1
telefono
™™  
=
™™! "
us
™™# %
.
™™% &
Telefono
™™& .
,
™™. /
estado
´´ 
=
´´  
us
´´! #
.
´´# $
Estado
´´$ *
,
´´* +
fecRegistro
¨¨ #
=
¨¨$ %
us
¨¨& (
.
¨¨( )
FecRegistro
¨¨) 4
,
¨¨4 5
fecModificacion
≠≠ '
=
≠≠( )
us
≠≠* ,
.
≠≠, -
FecModificacion
≠≠- <
}
ÆÆ 
)
ÆÆ 
;
ÆÆ 
}
ØØ 
}
∞∞ 
catch
±± 
(
±± 
	Exception
±± 
)
±± 
{
≤≤ 
	almacenes
≥≥ 
=
≥≥ 
new
≥≥ 
List
≥≥  $
<
≥≥$ %
Almacen
≥≥% ,
>
≥≥, -
(
≥≥- .
)
≥≥. /
;
≥≥/ 0
}
¥¥ 
return
∂∂ 
	almacenes
∂∂ 
;
∂∂ 
}
∑∑ 	
}
∏∏ 
}ππ ⁄U
aD:\Proyectos\NetCore\UPC_PI2_Backend\PremierBeef.Infrastructure\Repository\CategoriaRepository.cs
	namespace 	
PremierBeef
 
. 
Infrastructure $
.$ %

Repository% /
{ 
public		 

class		 
CategoriaRepository		 $
:		% & 
ICategoriaRepository		' ;
{

 
private 
readonly 
PremierContext '
_context( 0
;0 1
public 
CategoriaRepository "
(" #
PremierContext# 1
context2 9
)9 :
{ 	
_context 
= 
context 
; 
} 	
public 
Task 
< 
int 
> 
AddCategoria %
(% &
	Categoria& /
us0 2
)2 3
{ 	
int 
newId 
= 
$num 
; !
tb_producto_categoria !
tb_cli" (
=) *
new+ .!
tb_producto_categoria/ D
{ 
Nombre 
= 
us 
. 
nombre "
," #
Descripcion 
= 
us  
.  !
descripcion! ,
,, -
Estado 
= 
us 
. 
estado "
} 
; 
try 
{ 
_context 
. 

categorias #
.# $
Add$ '
(' (
tb_cli( .
). /
;/ 0
_context 
. 
SaveChanges $
($ %
)% &
;& '
newId!! 
=!! 
tb_cli!! 
.!! 
Id!! !
;!!! "
}"" 
catch## 
(## 
	Exception## 
)## 
{$$ 
tb_cli%% 
.%% 
Id%% 
=%% 
$num%% 
;%% 
}&& 
return(( 
Task(( 
.(( 

FromResult(( "
(((" #
newId((# (
)((( )
;(() *
})) 	
public++ 
Task++ 
<++ 
int++ 
>++ 
UpdateCategoria++ (
(++( )
	Categoria++) 2
us++3 5
)++5 6
{,, 	!
tb_producto_categoria-- !
tb_cli--" (
=--) *
new--+ .!
tb_producto_categoria--/ D
{.. 
Id// 
=// 
us// 
.// 
id// 
,// 
Nombre00 
=00 
us00 
.00 
nombre00 "
,00" #
Descripcion11 
=11 
us11  
.11  !
descripcion11! ,
,11, -
Estado22 
=22 
us22 
.22 
estado22 "
,22" #
}55 
;55 
try77 
{88 
_context== 
.== 

categorias== #
.==# $
Attach==$ *
(==* +
tb_cli==+ 1
)==1 2
;==2 3
_context>> 
.>> 
Entry>> 
(>> 
tb_cli>> %
)>>% &
.>>& '
State>>' ,
=>>- .
EntityState>>/ :
.>>: ;
Modified>>; C
;>>C D
_context?? 
.?? 
Entry?? 
(?? 
tb_cli?? %
)??% &
.??& '
Property??' /
(??/ 0
x??0 1
=>??2 4
x??5 6
.??6 7
Id??7 9
)??9 :
.??: ;

IsModified??; E
=??F G
false??H M
;??M N
_contextBB 
.BB 

categoriasBB #
.BB# $
UpdateBB$ *
(BB* +
tb_cliBB+ 1
)BB1 2
;BB2 3
_contextCC 
.CC 
SaveChangesCC $
(CC$ %
)CC% &
;CC& '
}DD 
catchEE 
(EE 
	ExceptionEE 
)EE 
{FF 
}HH 
returnKK 
TaskKK 
.KK 

FromResultKK "
(KK" #
$numKK# $
)KK$ %
;KK% &
}LL 	
publicNN 
TaskNN 
<NN 
intNN 
>NN 
RemoveCategoriaNN (
(NN( )
intNN) ,
idNN- /
)NN/ 0
{OO 	
varPP 
	CategoriaPP 
=PP 
_contextPP $
.PP$ %

categoriasPP% /
.PP/ 0
FindPP0 4
(PP4 5
idPP5 7
)PP7 8
;PP8 9
ifQQ 
(QQ 
	CategoriaQQ 
==QQ 
nullQQ !
)QQ! "
{RR 
returnSS 
TaskSS 
.SS 

FromResultSS &
(SS& '
$numSS' (
)SS( )
;SS) *
}TT 
_contextVV 
.VV 

categoriasVV 
.VV  
RemoveVV  &
(VV& '
	CategoriaVV' 0
)VV0 1
;VV1 2
_contextWW 
.WW 
SaveChangesWW  
(WW  !
)WW! "
;WW" #
returnYY 
TaskYY 
.YY 

FromResultYY "
(YY" #
$numYY# $
)YY$ %
;YY% &
}ZZ 	
public\\ 
Task\\ 
<\\ 
	Categoria\\ 
>\\ 
GetCategoriaById\\ /
(\\/ 0
int\\0 3
id\\4 6
)\\6 7
{]] 	
var^^ 
us^^ 
=^^ 
_context^^ 
.^^ 

categorias^^ (
.^^( )
Find^^) -
(^^- .
id^^. 0
)^^0 1
;^^1 2
if`` 
(`` 
us`` 
!=`` 
null`` 
)`` 
{aa 
	Categoriabb 
tb_clibb  
=bb! "
newbb# &
	Categoriabb' 0
{cc 
iddd 
=dd 
usdd 
.dd 
Iddd 
,dd 
nombreee 
=ee 
usee 
.ee  
Nombreee  &
,ee& '
descripcionff 
=ff  !
usff" $
.ff$ %
Descripcionff% 0
,ff0 1
estadogg 
=gg 
usgg 
.gg  
Estadogg  &
,gg& '
}jj 
;jj 
returnll 
Taskll 
.ll 

FromResultll &
(ll& '
tb_clill' -
)ll- .
;ll. /
}mm 
elsenn 
returnoo 
Taskoo 
.oo 

FromResultoo &
<oo& '
	Categoriaoo' 0
>oo0 1
(oo1 2
nulloo2 6
)oo6 7
;oo7 8
}pp 	
publicrr 
Taskrr 
<rr 
	Categoriarr 
>rr #
GetCategoriaByCategoriarr 6
(rr6 7
stringrr7 =
	categoriarr> G
)rrG H
{ss 	
trytt 
{uu 
varvv 
usvv 
=vv 
_contextvv !
.vv! "

categoriasvv" ,
.vv, -
Wherevv- 2
(vv2 3
xvv3 4
=>vv5 7
xvv8 9
.vv9 :
Nombrevv: @
.vv@ A
TrimvvA E
(vvE F
)vvF G
.vvG H
ToLowervvH O
(vvO P
)vvP Q
.vvQ R
EqualsvvR X
(vvX Y
	categoriavvY b
.vvb c
ToLowervvc j
(vvj k
)vvk l
)vvl m
)vvm n
.vvn o
FirstOrDefaultvvo }
(vv} ~
)vv~ 
;	vv Ä
ifxx 
(xx 
usxx 
!=xx 
nullxx 
)xx 
{yy 
	Categoriazz 
tb_clizz $
=zz% &
newzz' *
	Categoriazz+ 4
{{{ 
id|| 
=|| 
us|| 
.||  
Id||  "
,||" #
nombre}} 
=}}  
us}}! #
.}}# $
Nombre}}$ *
,}}* +
descripcion~~ #
=~~$ %
us~~& (
.~~( )
Descripcion~~) 4
,~~4 5
estado 
=  
us! #
.# $
Estado$ *
,* +
}
ÇÇ 
;
ÇÇ 
return
ÑÑ 
Task
ÑÑ 
.
ÑÑ  

FromResult
ÑÑ  *
(
ÑÑ* +
tb_cli
ÑÑ+ 1
)
ÑÑ1 2
;
ÑÑ2 3
}
ÖÖ 
}
áá 
catch
àà 
(
àà 
	Exception
àà 
)
àà 
{
ââ 
throw
ãã 
;
ãã 
}
åå 
return
éé 
Task
éé 
.
éé 

FromResult
éé "
<
éé" #
	Categoria
éé# ,
>
éé, -
(
éé- .
null
éé. 2
)
éé2 3
;
éé3 4
}
êê 	
public
íí 
async
íí 
Task
íí 
<
íí 
List
íí 
<
íí 
	Categoria
íí (
>
íí( )
>
íí) *
GetCategorias
íí+ 8
(
íí8 9
)
íí9 :
{
ìì 	
List
îî 
<
îî 
	Categoria
îî 
>
îî 

categorias
îî &
=
îî' (
new
îî) ,
List
îî- 1
<
îî1 2
	Categoria
îî2 ;
>
îî; <
(
îî< =
)
îî= >
;
îî> ?
try
ññ 
{
óó 
var
òò 
result
òò 
=
òò 
await
òò "
Task
òò# '
.
òò' (
Run
òò( +
(
òò+ ,
(
òò, -
)
òò- .
=>
òò/ 1
_context
òò2 :
.
òò: ;

categorias
òò; E
.
òòE F
ToListAsync
òòF Q
(
òòQ R
)
òòR S
)
òòS T
;
òòT U
foreach
öö 
(
öö 
var
öö 
us
öö 
in
öö  "
result
öö# )
)
öö) *
{
õõ 

categorias
úú 
.
úú 
Add
úú "
(
úú" #
new
úú# &
	Categoria
úú' 0
{
ùù 
id
ûû 
=
ûû 
us
ûû 
.
ûû  
Id
ûû  "
,
ûû" #
nombre
üü 
=
üü  
us
üü! #
.
üü# $
Nombre
üü$ *
,
üü* +
descripcion
†† #
=
††$ %
us
††& (
.
††( )
Descripcion
††) 4
,
††4 5
estado
°° 
=
°°  
us
°°! #
.
°°# $
Estado
°°$ *
,
°°* +
}
§§ 
)
§§ 
;
§§ 
}
•• 
}
¶¶ 
catch
ßß 
(
ßß 
	Exception
ßß 
)
ßß 
{
®® 
}
™™ 
return
≠≠ 

categorias
≠≠ 
;
≠≠ 
}
ÆÆ 	
}
ØØ 
}∞∞ –Ñ
_D:\Proyectos\NetCore\UPC_PI2_Backend\PremierBeef.Infrastructure\Repository\ClienteRepository.cs
	namespace 	
PremierBeef
 
. 
Infrastructure $
.$ %

Repository% /
{ 
public		 

class		 
ClienteRepository		 "
:		# $
IClienteRepository		% 7
{

 
private 
readonly 
PremierContext '
_context( 0
;0 1
public 
ClienteRepository  
(  !
PremierContext! /
context0 7
)7 8
{ 	
_context 
= 
context 
; 
} 	
public 
Task 
< 
int 
> 

AddCliente #
(# $
Cliente$ +
us, .
). /
{ 	
int 
newId 
= 
$num 
; 

tb_cliente 
tb_cli 
= 
new  #

tb_cliente$ .
{ 
Nombre 
= 
us 
. 
nombre "
," #

ApePaterno 
= 
us 
.  

apePaterno  *
,* +

ApeMaterno 
= 
us 
.  

apeMaterno  *
,* +
Telefono 
= 
us 
. 
telefono &
,& '
	Direccion 
= 
us 
. 
	direccion (
,( )
Estado 
= 
us 
. 
estado "
," #
EnviarPromociones !
=" #
us$ &
.& '
enviarPromociones' 8
,8 9
IdTipoDocumento 
=  !
us" $
.$ %
idTipoDocumento% 4
,4 5
NumeroDocumento 
=  !
us" $
.$ %
numeroDocumento% 4
,4 5
FecRegistro   
=   
us    
.    !
fecRegistro  ! ,
,  , -
FecModificacion!! 
=!!  !
us!!" $
.!!$ %
fecModificacion!!% 4
}"" 
;"" 
try$$ 
{%% 
_context&& 
.&& 
clientes&& !
.&&! "
Add&&" %
(&&% &
tb_cli&&& ,
)&&, -
;&&- .
_context'' 
.'' 
SaveChanges'' $
(''$ %
)''% &
;''& '
newId)) 
=)) 
tb_cli)) 
.)) 
Id)) !
;))! "
}** 
catch++ 
(++ 
	Exception++ 
)++ 
{,, 
tb_cli-- 
.-- 
Id-- 
=-- 
$num-- 
;-- 
}.. 
return00 
Task00 
.00 

FromResult00 "
(00" #
newId00# (
)00( )
;00) *
}11 	
public33 
Task33 
<33 
int33 
>33 
UpdateCliente33 &
(33& '
Cliente33' .
us33/ 1
)331 2
{44 	

tb_cliente55 
tb_cli55 
=55 
new55  #

tb_cliente55$ .
{66 
Id77 
=77 
us77 
.77 
id77 
,77 
Nombre88 
=88 
us88 
.88 
nombre88 "
,88" #

ApePaterno99 
=99 
us99 
.99  

apePaterno99  *
,99* +

ApeMaterno:: 
=:: 
us:: 
.::  

apeMaterno::  *
,::* +
Telefono;; 
=;; 
us;; 
.;; 
telefono;; &
,;;& '
	Direccion<< 
=<< 
us<< 
.<< 
	direccion<< (
,<<( )
Estado== 
=== 
us== 
.== 
estado== "
,==" #
EnviarPromociones>> !
=>>" #
us>>$ &
.>>& '
enviarPromociones>>' 8
,>>8 9
IdTipoDocumento?? 
=??  !
us??" $
.??$ %
idTipoDocumento??% 4
,??4 5
NumeroDocumento@@ 
=@@  !
us@@" $
.@@$ %
numeroDocumento@@% 4
,@@4 5
FecRegistroAA 
=AA 
usAA  
.AA  !
fecRegistroAA! ,
,AA, -
FecModificacionBB 
=BB  !
DateTimeBB" *
.BB* +
NowBB+ .
}CC 
;CC 
tryEE 
{FF 
_contextKK 
.KK 
clientesKK !
.KK! "
AttachKK" (
(KK( )
tb_cliKK) /
)KK/ 0
;KK0 1
_contextLL 
.LL 
EntryLL 
(LL 
tb_cliLL %
)LL% &
.LL& '
StateLL' ,
=LL- .
EntityStateLL/ :
.LL: ;
ModifiedLL; C
;LLC D
_contextMM 
.MM 
EntryMM 
(MM 
tb_cliMM %
)MM% &
.MM& '
PropertyMM' /
(MM/ 0
xMM0 1
=>MM2 4
xMM5 6
.MM6 7
IdMM7 9
)MM9 :
.MM: ;

IsModifiedMM; E
=MMF G
falseMMH M
;MMM N
_contextNN 
.NN 
EntryNN 
(NN 
tb_cliNN %
)NN% &
.NN& '
PropertyNN' /
(NN/ 0
XNN0 1
=>NN2 4
XNN5 6
.NN6 7
FecRegistroNN7 B
)NNB C
.NNC D

IsModifiedNND N
=NNO P
falseNNQ V
;NNV W
_contextQQ 
.QQ 
clientesQQ !
.QQ! "
UpdateQQ" (
(QQ( )
tb_cliQQ) /
)QQ/ 0
;QQ0 1
_contextRR 
.RR 
SaveChangesRR $
(RR$ %
)RR% &
;RR& '
}SS 
catchTT 
(TT 
	ExceptionTT 
)TT 
{UU 
}WW 
returnZZ 
TaskZZ 
.ZZ 

FromResultZZ "
(ZZ" #
$numZZ# $
)ZZ$ %
;ZZ% &
}[[ 	
public]] 
Task]] 
<]] 
int]] 
>]] 
RemoveCliente]] &
(]]& '
int]]' *
id]]+ -
)]]- .
{^^ 	
var__ 
Cliente__ 
=__ 
_context__ "
.__" #
clientes__# +
.__+ ,
Find__, 0
(__0 1
id__1 3
)__3 4
;__4 5
if`` 
(`` 
Cliente`` 
==`` 
null`` 
)``  
{aa 
returnbb 
Taskbb 
.bb 

FromResultbb &
(bb& '
$numbb' (
)bb( )
;bb) *
}cc 
_contextee 
.ee 
clientesee 
.ee 
Removeee $
(ee$ %
Clienteee% ,
)ee, -
;ee- .
_contextff 
.ff 
SaveChangesff  
(ff  !
)ff! "
;ff" #
returnhh 
Taskhh 
.hh 

FromResulthh "
(hh" #
$numhh# $
)hh$ %
;hh% &
}ii 	
publickk 
Taskkk 
<kk 
Clientekk 
>kk 
GetClienteByIdkk +
(kk+ ,
intkk, /
idkk0 2
)kk2 3
{ll 	
varmm 
usmm 
=mm 
_contextmm 
.mm 
clientesmm &
.mm& '
Findmm' +
(mm+ ,
idmm, .
)mm. /
;mm/ 0
ifoo 
(oo 
usoo 
!=oo 
nulloo 
)oo 
{pp 
Clienteqq 
tb_cliqq 
=qq  
newqq! $
Clienteqq% ,
{rr 
idss 
=ss 
usss 
.ss 
Idss 
,ss 
nombrett 
=tt 
ustt 
.tt  
Nombrett  &
,tt& '

apePaternouu 
=uu  
usuu! #
.uu# $

ApePaternouu$ .
,uu. /

apeMaternovv 
=vv  
usvv! #
.vv# $

ApeMaternovv$ .
,vv. /
telefonoww 
=ww 
usww !
.ww! "
Telefonoww" *
,ww* +
	direccionxx 
=xx 
usxx  "
.xx" #
	Direccionxx# ,
,xx, -
estadoyy 
=yy 
usyy 
.yy  
Estadoyy  &
,yy& '
enviarPromocioneszz %
=zz& '
uszz( *
.zz* +
EnviarPromocioneszz+ <
,zz< =
idTipoDocumento{{ #
={{$ %
us{{& (
.{{( )
IdTipoDocumento{{) 8
,{{8 9
numeroDocumento|| #
=||$ %
us||& (
.||( )
NumeroDocumento||) 8
,||8 9
fecRegistro}} 
=}}  !
us}}" $
.}}$ %
FecRegistro}}% 0
,}}0 1
fecModificacion~~ #
=~~$ %
us~~& (
.~~( )
FecModificacion~~) 8
} 
; 
return
ÅÅ 
Task
ÅÅ 
.
ÅÅ 

FromResult
ÅÅ &
(
ÅÅ& '
tb_cli
ÅÅ' -
)
ÅÅ- .
;
ÅÅ. /
}
ÇÇ 
else
ÉÉ 
return
ÑÑ 
Task
ÑÑ 
.
ÑÑ 

FromResult
ÑÑ &
<
ÑÑ& '
Cliente
ÑÑ' .
>
ÑÑ. /
(
ÑÑ/ 0
null
ÑÑ0 4
)
ÑÑ4 5
;
ÑÑ5 6
}
ÖÖ 	
public
áá 
Task
áá 
<
áá 
Cliente
áá 
>
áá !
GetClienteByCliente
áá 0
(
áá0 1
Cliente
áá1 8
cli
áá9 <
)
áá< =
{
àà 	
try
ââ 
{
ää 
var
ãã 
us
ãã 
=
ãã 
_context
ãã !
.
ãã! "
clientes
ãã" *
.
ãã* +
Where
ãã+ 0
(
ãã0 1
x
ãã1 2
=>
ãã3 5
x
ãã6 7
.
ãã7 8
Nombre
ãã8 >
.
ãã> ?
Trim
ãã? C
(
ããC D
)
ããD E
.
ããE F
ToLower
ããF M
(
ããM N
)
ããN O
.
ããO P
Equals
ããP V
(
ããV W
cli
ããW Z
.
ããZ [
nombre
ãã[ a
.
ããa b
ToLower
ããb i
(
ããi j
)
ããj k
)
ããk l
&&
ããm o
x
åå  !
.
åå! "

ApePaterno
åå" ,
.
åå, -
Trim
åå- 1
(
åå1 2
)
åå2 3
.
åå3 4
ToLower
åå4 ;
(
åå; <
)
åå< =
.
åå= >
Equals
åå> D
(
ååD E
cli
ååE H
.
ååH I

apePaterno
ååI S
.
ååS T
ToLower
ååT [
(
åå[ \
)
åå\ ]
)
åå] ^
&&
åå_ a
x
çç  !
.
çç! "

ApeMaterno
çç" ,
.
çç, -
Trim
çç- 1
(
çç1 2
)
çç2 3
.
çç3 4
ToLower
çç4 ;
(
çç; <
)
çç< =
.
çç= >
Equals
çç> D
(
ççD E
cli
ççE H
.
ççH I

apeMaterno
ççI S
.
ççS T
ToLower
ççT [
(
çç[ \
)
çç\ ]
)
çç] ^
)
éé 
.
éé 
FirstOrDefault
éé  
(
éé  !
)
éé! "
;
éé" #
if
êê 
(
êê 
us
êê 
!=
êê 
null
êê 
)
êê 
{
ëë 
Cliente
íí 
tb_cli
íí "
=
íí# $
new
íí% (
Cliente
íí) 0
{
ìì 
id
îî 
=
îî 
us
îî 
.
îî  
Id
îî  "
,
îî" #
nombre
ïï 
=
ïï  
us
ïï! #
.
ïï# $
Nombre
ïï$ *
,
ïï* +

apePaterno
ññ "
=
ññ# $
us
ññ% '
.
ññ' (

ApePaterno
ññ( 2
,
ññ2 3

apeMaterno
óó "
=
óó# $
us
óó% '
.
óó' (

ApeMaterno
óó( 2
,
óó2 3
telefono
òò  
=
òò! "
us
òò# %
.
òò% &
Telefono
òò& .
,
òò. /
	direccion
ôô !
=
ôô" #
us
ôô$ &
.
ôô& '
	Direccion
ôô' 0
,
ôô0 1
estado
öö 
=
öö  
us
öö! #
.
öö# $
Estado
öö$ *
,
öö* +
enviarPromociones
õõ )
=
õõ* +
us
õõ, .
.
õõ. /
EnviarPromociones
õõ/ @
,
õõ@ A
idTipoDocumento
úú '
=
úú( )
us
úú* ,
.
úú, -
IdTipoDocumento
úú- <
,
úú< =
numeroDocumento
ùù '
=
ùù( )
us
ùù* ,
.
ùù, -
NumeroDocumento
ùù- <
,
ùù< =
fecRegistro
ûû #
=
ûû$ %
us
ûû& (
.
ûû( )
FecRegistro
ûû) 4
,
ûû4 5
fecModificacion
üü '
=
üü( )
us
üü* ,
.
üü, -
FecModificacion
üü- <
}
†† 
;
†† 
return
¢¢ 
Task
¢¢ 
.
¢¢  

FromResult
¢¢  *
(
¢¢* +
tb_cli
¢¢+ 1
)
¢¢1 2
;
¢¢2 3
}
££ 
}
•• 
catch
¶¶ 
(
¶¶ 
	Exception
¶¶ 
)
¶¶ 
{
ßß 
throw
©© 
;
©© 
}
™™ 
return
¨¨ 
Task
¨¨ 
.
¨¨ 

FromResult
¨¨ "
<
¨¨" #
Cliente
¨¨# *
>
¨¨* +
(
¨¨+ ,
null
¨¨, 0
)
¨¨0 1
;
¨¨1 2
}
ÆÆ 	
public
∞∞ 
async
∞∞ 
Task
∞∞ 
<
∞∞ 
List
∞∞ 
<
∞∞ 
Cliente
∞∞ &
>
∞∞& '
>
∞∞' (
GetClientes
∞∞) 4
(
∞∞4 5
)
∞∞5 6
{
±± 	
List
≤≤ 
<
≤≤ 
Cliente
≤≤ 
>
≤≤ 
clientes
≤≤ "
=
≤≤# $
new
≤≤% (
List
≤≤) -
<
≤≤- .
Cliente
≤≤. 5
>
≤≤5 6
(
≤≤6 7
)
≤≤7 8
;
≤≤8 9
try
¥¥ 
{
µµ 
var
∂∂ 
result
∂∂ 
=
∂∂ 
await
∂∂ "
Task
∂∂# '
.
∂∂' (
Run
∂∂( +
(
∂∂+ ,
(
∂∂, -
)
∂∂- .
=>
∂∂/ 1
_context
∂∂2 :
.
∂∂: ;
clientes
∂∂; C
.
∂∂C D
ToListAsync
∂∂D O
(
∂∂O P
)
∂∂P Q
)
∂∂Q R
;
∂∂R S
foreach
∏∏ 
(
∏∏ 
var
∏∏ 
us
∏∏ 
in
∏∏  "
result
∏∏# )
)
∏∏) *
{
ππ 
clientes
∫∫ 
.
∫∫ 
Add
∫∫  
(
∫∫  !
new
∫∫! $
Cliente
∫∫% ,
{
ªª 
id
ºº 
=
ºº 
us
ºº 
.
ºº  
Id
ºº  "
,
ºº" #
nombre
ΩΩ 
=
ΩΩ  
us
ΩΩ! #
.
ΩΩ# $
Nombre
ΩΩ$ *
,
ΩΩ* +

apePaterno
ææ "
=
ææ# $
us
ææ% '
.
ææ' (

ApePaterno
ææ( 2
,
ææ2 3

apeMaterno
øø "
=
øø# $
us
øø% '
.
øø' (

ApeMaterno
øø( 2
,
øø2 3
telefono
¿¿  
=
¿¿! "
us
¿¿# %
.
¿¿% &
Telefono
¿¿& .
,
¿¿. /
	direccion
¡¡ !
=
¡¡" #
us
¡¡$ &
.
¡¡& '
	Direccion
¡¡' 0
,
¡¡0 1
estado
¬¬ 
=
¬¬  
us
¬¬! #
.
¬¬# $
Estado
¬¬$ *
,
¬¬* +
enviarPromociones
√√ )
=
√√* +
us
√√, .
.
√√. /
EnviarPromociones
√√/ @
,
√√@ A
idTipoDocumento
ƒƒ '
=
ƒƒ( )
us
ƒƒ* ,
.
ƒƒ, -
IdTipoDocumento
ƒƒ- <
,
ƒƒ< =
numeroDocumento
≈≈ '
=
≈≈( )
us
≈≈* ,
.
≈≈, -
NumeroDocumento
≈≈- <
,
≈≈< =
fecRegistro
∆∆ #
=
∆∆$ %
us
∆∆& (
.
∆∆( )
FecRegistro
∆∆) 4
,
∆∆4 5
fecModificacion
«« '
=
««( )
us
««* ,
.
««, -
FecModificacion
««- <
}
»» 
)
»» 
;
»» 
}
…… 
}
   
catch
ÀÀ 
(
ÀÀ 
	Exception
ÀÀ 
)
ÀÀ 
{
ÃÃ 
}
ŒŒ 
return
—— 
clientes
—— 
;
—— 
}
““ 	
}
”” 
}‘‘ ©j
`D:\Proyectos\NetCore\UPC_PI2_Backend\PremierBeef.Infrastructure\Repository\ProductoRepository.cs
	namespace 	
PremierBeef
 
. 
Infrastructure $
.$ %

Repository% /
{ 
public		 

class		 
ProductoRepository		 #
:		$ %
IProductoRepository		& 9
{

 
private 
readonly 
PremierContext '
_context( 0
;0 1
public 
ProductoRepository !
(! "
PremierContext" 0
context1 8
)8 9
{ 	
_context 
= 
context 
; 
} 	
public 
Task 
< 
int 
> 
AddProducto $
($ %
Producto% -
us. 0
)0 1
{ 	
int 
newId 
= 
$num 
; 
tb_producto 
tb_user 
=  !
new" %
tb_producto& 1
{ 
Nombre 
= 
us 
. 
nombre "
," #
Descripcion 
= 
us  
.  !
descripcion! ,
,, -
Precio 
= 
us 
. 
precio "
," #
IdCategoria 
= 
us  
.  !
idCategoria! ,
,, -
IdProveedor 
= 
us  
.  !
idProveedor! ,
,, -
FecRegistro 
= 
us  
.  !
fecRegistro! ,
,, -
FecModificacion 
=  !
us" $
.$ %
fecModificacion% 4
} 
; 
try   
{!! 
_context"" 
."" 
	productos"" "
.""" #
Add""# &
(""& '
tb_user""' .
)"". /
;""/ 0
_context## 
.## 
SaveChanges## $
(##$ %
)##% &
;##& '
newId%% 
=%% 
tb_user%% 
.%%  
Id%%  "
;%%" #
}&& 
catch'' 
('' 
	Exception'' 
)'' 
{(( 
tb_user)) 
.)) 
Id)) 
=)) 
$num)) 
;)) 
}** 
return,, 
Task,, 
.,, 

FromResult,, "
(,," #
newId,,# (
),,( )
;,,) *
}-- 	
public// 
Task// 
<// 
int// 
>// 
UpdateProducto// '
(//' (
Producto//( 0
us//1 3
)//3 4
{00 	
tb_producto11 
tb_user11 
=11  !
new11" %
tb_producto11& 1
{22 
Id33 
=33 
us33 
.33 
id33 
,33 
Nombre44 
=44 
us44 
.44 
nombre44 "
,44" #
Descripcion55 
=55 
us55  
.55  !
descripcion55! ,
,55, -
Precio66 
=66 
us66 
.66 
precio66 "
,66" #
IdCategoria77 
=77 
us77  
.77  !
idCategoria77! ,
,77, -
IdProveedor88 
=88 
us88  
.88  !
idProveedor88! ,
,88, -
FecRegistro99 
=99 
us99  
.99  !
fecRegistro99! ,
,99, -
FecModificacion:: 
=::  !
DateTime::" *
.::* +
Now::+ .
};; 
;;; 
try== 
{>> 
_contextCC 
.CC 
	productosCC "
.CC" #
AttachCC# )
(CC) *
tb_userCC* 1
)CC1 2
;CC2 3
_contextDD 
.DD 
EntryDD 
(DD 
tb_userDD &
)DD& '
.DD' (
StateDD( -
=DD. /
EntityStateDD0 ;
.DD; <
ModifiedDD< D
;DDD E
_contextEE 
.EE 
EntryEE 
(EE 
tb_userEE &
)EE& '
.EE' (
PropertyEE( 0
(EE0 1
xEE1 2
=>EE3 5
xEE6 7
.EE7 8
IdEE8 :
)EE: ;
.EE; <

IsModifiedEE< F
=EEG H
falseEEI N
;EEN O
_contextFF 
.FF 
EntryFF 
(FF 
tb_userFF &
)FF& '
.FF' (
PropertyFF( 0
(FF0 1
XFF1 2
=>FF3 5
XFF6 7
.FF7 8
FecRegistroFF8 C
)FFC D
.FFD E

IsModifiedFFE O
=FFP Q
falseFFR W
;FFW X
_contextHH 
.HH 
	productosHH "
.HH" #
UpdateHH# )
(HH) *
tb_userHH* 1
)HH1 2
;HH2 3
_contextII 
.II 
SaveChangesII $
(II$ %
)II% &
;II& '
}JJ 
catchKK 
(KK 
	ExceptionKK 
)KK 
{LL 
}NN 
returnQQ 
TaskQQ 
.QQ 

FromResultQQ "
(QQ" #
$numQQ# $
)QQ$ %
;QQ% &
}RR 	
publicTT 
TaskTT 
<TT 
intTT 
>TT 
RemoveProductoTT '
(TT' (
intTT( +
idTT, .
)TT. /
{UU 	
varVV 
ProductoVV 
=VV 
_contextVV #
.VV# $
	productosVV$ -
.VV- .
FindVV. 2
(VV2 3
idVV3 5
)VV5 6
;VV6 7
ifWW 
(WW 
ProductoWW 
==WW 
nullWW  
)WW  !
{XX 
returnYY 
TaskYY 
.YY 

FromResultYY &
(YY& '
$numYY' (
)YY( )
;YY) *
}ZZ 
_context\\ 
.\\ 
	productos\\ 
.\\ 
Remove\\ %
(\\% &
Producto\\& .
)\\. /
;\\/ 0
_context]] 
.]] 
SaveChanges]]  
(]]  !
)]]! "
;]]" #
return__ 
Task__ 
.__ 

FromResult__ "
(__" #
$num__# $
)__$ %
;__% &
}`` 	
publicbb 
Taskbb 
<bb 
Productobb 
>bb 
GetProductoByIdbb -
(bb- .
intbb. 1
idbb2 4
)bb4 5
{cc 	
vardd 
usdd 
=dd 
_contextdd 
.dd 
	productosdd '
.dd' (
Finddd( ,
(dd, -
iddd- /
)dd/ 0
;dd0 1
ifff 
(ff 
usff 
!=ff 
nullff 
)ff 
{gg 
Productohh 
tb_userhh  
=hh! "
newhh# &
Productohh' /
{ii 
idjj 
=jj 
usjj 
.jj 
Idjj 
,jj 
nombrekk 
=kk 
uskk 
.kk  
Nombrekk  &
,kk& '
descripcionll 
=ll  !
usll" $
.ll$ %
Descripcionll% 0
,ll0 1
preciomm 
=mm 
usmm 
.mm  
Preciomm  &
,mm& '
idCategoriann 
=nn  !
usnn" $
.nn$ %
IdCategoriann% 0
,nn0 1
idProveedoroo 
=oo  !
usoo" $
.oo$ %
IdProveedoroo% 0
,oo0 1
fecRegistropp 
=pp  !
uspp" $
.pp$ %
FecRegistropp% 0
,pp0 1
fecModificacionqq #
=qq$ %
usqq& (
.qq( )
FecModificacionqq) 8
}rr 
;rr 
returntt 
Tasktt 
.tt 

FromResulttt &
(tt& '
tb_usertt' .
)tt. /
;tt/ 0
}uu 
elsevv 
returnww 
Taskww 
.ww 

FromResultww &
<ww& '
Productoww' /
>ww/ 0
(ww0 1
nullww1 5
)ww5 6
;ww6 7
}xx 	
publiczz 
Taskzz 
<zz 
Productozz 
>zz !
GetProductoByProductozz 3
(zz3 4
stringzz4 :
Productozz; C
)zzC D
{{{ 	
try|| 
{}} 
var~~ 
us~~ 
=~~ 
_context~~ !
.~~! "
	productos~~" +
.~~+ ,
Where~~, 1
(~~1 2
x~~2 3
=>~~4 6
x~~7 8
.~~8 9
Nombre~~9 ?
.~~? @
Trim~~@ D
(~~D E
)~~E F
.~~F G
ToLower~~G N
(~~N O
)~~O P
.~~P Q
Equals~~Q W
(~~W X
Producto~~X `
.~~` a
ToLower~~a h
(~~h i
)~~i j
)~~j k
)~~k l
.~~l m
FirstOrDefault~~m {
(~~{ |
)~~| }
;~~} ~
if
ÄÄ 
(
ÄÄ 
us
ÄÄ 
!=
ÄÄ 
null
ÄÄ 
)
ÄÄ 
{
ÅÅ 
Producto
ÇÇ 
tb_user
ÇÇ $
=
ÇÇ% &
new
ÇÇ' *
Producto
ÇÇ+ 3
{
ÉÉ 
id
ÑÑ 
=
ÑÑ 
us
ÑÑ 
.
ÑÑ  
Id
ÑÑ  "
,
ÑÑ" #
nombre
ÖÖ 
=
ÖÖ  
us
ÖÖ! #
.
ÖÖ# $
Nombre
ÖÖ$ *
,
ÖÖ* +
descripcion
ÜÜ #
=
ÜÜ$ %
us
ÜÜ& (
.
ÜÜ( )
Descripcion
ÜÜ) 4
,
ÜÜ4 5
precio
áá 
=
áá  
us
áá! #
.
áá# $
Precio
áá$ *
,
áá* +
idCategoria
àà #
=
àà$ %
us
àà& (
.
àà( )
IdCategoria
àà) 4
,
àà4 5
idProveedor
ââ #
=
ââ$ %
us
ââ& (
.
ââ( )
IdProveedor
ââ) 4
,
ââ4 5
fecRegistro
ää #
=
ää$ %
us
ää& (
.
ää( )
FecRegistro
ää) 4
,
ää4 5
fecModificacion
ãã '
=
ãã( )
us
ãã* ,
.
ãã, -
FecModificacion
ãã- <
}
åå 
;
åå 
return
éé 
Task
éé 
.
éé  

FromResult
éé  *
(
éé* +
tb_user
éé+ 2
)
éé2 3
;
éé3 4
}
èè 
}
ëë 
catch
íí 
(
íí 
	Exception
íí 
)
íí 
{
ìì 
throw
ïï 
;
ïï 
}
ññ 
return
òò 
Task
òò 
.
òò 

FromResult
òò "
<
òò" #
Producto
òò# +
>
òò+ ,
(
òò, -
null
òò- 1
)
òò1 2
;
òò2 3
}
öö 	
public
úú 
async
úú 
Task
úú 
<
úú 
List
úú 
<
úú 
Producto
úú '
>
úú' (
>
úú( )
GetProductos
úú* 6
(
úú6 7
)
úú7 8
{
ùù 	
List
ûû 
<
ûû 
Producto
ûû 
>
ûû 
	productos
ûû $
=
ûû% &
new
ûû' *
List
ûû+ /
<
ûû/ 0
Producto
ûû0 8
>
ûû8 9
(
ûû9 :
)
ûû: ;
;
ûû; <
try
†† 
{
°° 
var
¢¢ 
result
¢¢ 
=
¢¢ 
await
¢¢ "
Task
¢¢# '
.
¢¢' (
Run
¢¢( +
(
¢¢+ ,
(
¢¢, -
)
¢¢- .
=>
¢¢/ 1
_context
¢¢2 :
.
¢¢: ;
	productos
¢¢; D
.
¢¢D E
ToListAsync
¢¢E P
(
¢¢P Q
)
¢¢Q R
)
¢¢R S
;
¢¢S T
foreach
§§ 
(
§§ 
var
§§ 
us
§§ 
in
§§  "
result
§§# )
)
§§) *
{
•• 
	productos
¶¶ 
.
¶¶ 
Add
¶¶ !
(
¶¶! "
new
¶¶" %
Producto
¶¶& .
{
ßß 
id
®® 
=
®® 
us
®® 
.
®®  
Id
®®  "
,
®®" #
nombre
©© 
=
©©  
us
©©! #
.
©©# $
Nombre
©©$ *
,
©©* +
descripcion
™™ #
=
™™$ %
us
™™& (
.
™™( )
Descripcion
™™) 4
,
™™4 5
precio
´´ 
=
´´  
us
´´! #
.
´´# $
Precio
´´$ *
,
´´* +
idCategoria
¨¨ #
=
¨¨$ %
us
¨¨& (
.
¨¨( )
IdCategoria
¨¨) 4
,
¨¨4 5
idProveedor
≠≠ #
=
≠≠$ %
us
≠≠& (
.
≠≠( )
IdProveedor
≠≠) 4
,
≠≠4 5
fecRegistro
ÆÆ #
=
ÆÆ$ %
us
ÆÆ& (
.
ÆÆ( )
FecRegistro
ÆÆ) 4
,
ÆÆ4 5
fecModificacion
ØØ '
=
ØØ( )
us
ØØ* ,
.
ØØ, -
FecModificacion
ØØ- <
}
∞∞ 
)
∞∞ 
;
∞∞ 
}
±± 
}
≤≤ 
catch
≥≥ 
(
≥≥ 
	Exception
≥≥ 
)
≥≥ 
{
¥¥ 
}
∂∂ 
return
ππ 
	productos
ππ 
;
ππ 
}
∫∫ 	
}
ªª 
}ºº «ï
aD:\Proyectos\NetCore\UPC_PI2_Backend\PremierBeef.Infrastructure\Repository\PromocionRepository.cs
	namespace 	
PremierBeef
 
. 
Infrastructure $
.$ %

Repository% /
{ 
public		 

class		 
PromocionRepository		 $
:		% & 
IPromocionRepository		' ;
{

 
private 
readonly 
PremierContext '
_context( 0
;0 1
public 
PromocionRepository "
(" #
PremierContext# 1
context2 9
)9 :
{ 	
_context 
= 
context 
; 
} 	
public 
async 
Task 
< 
List 
< 
	Promocion (
>( )
>) *
GetPromociones+ 9
(9 :
): ;
{ 	
List 
< 
	Promocion 
> 
roles !
=" #
new$ '
List( ,
<, -
	Promocion- 6
>6 7
(7 8
)8 9
;9 :
try 
{ 
var 
result 
= 
await "
Task# '
.' (
Run( +
(+ ,
(, -
)- .
=>/ 1
_context2 :
.: ;
promociones; F
.F G
ToListAsyncG R
(R S
)S T
)T U
;U V
foreach 
( 
var 
us 
in  "
result# )
)) *
{ 
roles 
. 
Add 
( 
new !
	Promocion" +
{ 
id 
= 
us 
.  
Id  "
," #
nombre 
=  
us! #
.# $
Nombre$ *
??+ -
$str. 0
,0 1
descripcion   #
=  $ %
us  & (
.  ( )
Descripcion  ) 4
??  5 7
$str  8 :
,  : ;
	fecInicio!! !
=!!" #
us!!$ &
.!!& '
	FecInicio!!' 0
,!!0 1
fecFin"" 
=""  
us""! #
.""# $
FecFin""$ *
,""* +
porcentajeDescuento## +
=##, -
us##. 0
.##0 1
PorcentajeDescuento##1 D
}$$ 
)$$ 
;$$ 
}%% 
}&& 
catch'' 
('' 
	Exception'' 
)'' 
{(( 
}** 
return-- 
roles-- 
;-- 
}.. 	
public00 
Task00 
<00 
int00 
>00 
AddPromocion00 %
(00% &
	Promocion00& /
us000 2
)002 3
{11 	
int22 
newId22 
=22 
$num22 
;22 
tb_promocion33 
tb_cli33 
=33  !
new33" %
tb_promocion33& 2
{44 
Nombre55 
=55 
us55 
.55 
nombre55 "
,55" #
Descripcion66 
=66 
us66  
.66  !
descripcion66! ,
,66, -
	FecInicio77 
=77 
us77 
.77 
	fecInicio77 (
,77( )
FecFin88 
=88 
us88 
.88 
fecFin88 "
,88" #
PorcentajeDescuento99 #
=99$ %
us99& (
.99( )
porcentajeDescuento99) <
,99< =
Estado:: 
=:: 
us:: 
.:: 
estado:: "
,::" #
FecRegistro;; 
=;; 
us;;  
.;;  !
fecRegistro;;! ,
,;;, -
FecModificacion<< 
=<<  !
us<<" $
.<<$ %
fecModificacion<<% 4
}== 
;== 
try?? 
{@@ 
_contextAA 
.AA 
promocionesAA $
.AA$ %
AddAA% (
(AA( )
tb_cliAA) /
)AA/ 0
;AA0 1
_contextBB 
.BB 
SaveChangesBB $
(BB$ %
)BB% &
;BB& '
newIdDD 
=DD 
tb_cliDD 
.DD 
IdDD !
;DD! "
}EE 
catchFF 
(FF 
	ExceptionFF 
)FF 
{GG 
tb_cliHH 
.HH 
IdHH 
=HH 
$numHH 
;HH 
}II 
returnKK 
TaskKK 
.KK 

FromResultKK "
(KK" #
newIdKK# (
)KK( )
;KK) *
}LL 	
publicNN 
TaskNN 
<NN 
boolNN 
>NN 
UpdatePromocionNN )
(NN) *
	PromocionNN* 3
usNN4 6
)NN6 7
{OO 	
boolPP 
resultPP 
;PP 
tb_promocionQQ 
tb_cliQQ 
=QQ  !
newQQ" %
tb_promocionQQ& 2
{RR 
IdSS 
=SS 
usSS 
.SS 
idSS 
,SS 
NombreTT 
=TT 
usTT 
.TT 
nombreTT "
,TT" #
DescripcionUU 
=UU 
usUU  
.UU  !
descripcionUU! ,
,UU, -
	FecInicioVV 
=VV 
usVV 
.VV 
	fecInicioVV (
,VV( )
FecFinWW 
=WW 
usWW 
.WW 
fecFinWW "
,WW" #
PorcentajeDescuentoXX #
=XX$ %
usXX& (
.XX( )
porcentajeDescuentoXX) <
,XX< =
EstadoYY 
=YY 
usYY 
.YY 
estadoYY "
,YY" #
FecRegistroZZ 
=ZZ 
usZZ  
.ZZ  !
fecRegistroZZ! ,
,ZZ, -
FecModificacion[[ 
=[[  !
DateTime[[" *
.[[* +
Now[[+ .
}\\ 
;\\ 
try^^ 
{__ 
_context`` 
.`` 
promociones`` $
.``$ %
Attach``% +
(``+ ,
tb_cli``, 2
)``2 3
;``3 4
_contextaa 
.aa 
Entryaa 
(aa 
tb_cliaa %
)aa% &
.aa& '
Stateaa' ,
=aa- .
EntityStateaa/ :
.aa: ;
Modifiedaa; C
;aaC D
_contextbb 
.bb 
Entrybb 
(bb 
tb_clibb %
)bb% &
.bb& '
Propertybb' /
(bb/ 0
xbb0 1
=>bb2 4
xbb5 6
.bb6 7
Idbb7 9
)bb9 :
.bb: ;

IsModifiedbb; E
=bbF G
falsebbH M
;bbM N
_contextcc 
.cc 
Entrycc 
(cc 
tb_clicc %
)cc% &
.cc& '
Propertycc' /
(cc/ 0
Xcc0 1
=>cc2 4
Xcc5 6
.cc6 7
FecRegistrocc7 B
)ccB C
.ccC D

IsModifiedccD N
=ccO P
falseccQ V
;ccV W
_contextee 
.ee 
promocionesee $
.ee$ %
Updateee% +
(ee+ ,
tb_cliee, 2
)ee2 3
;ee3 4
_contextff 
.ff 
SaveChangesff $
(ff$ %
)ff% &
;ff& '
resulthh 
=hh 
truehh 
;hh 
}ii 
catchjj 
(jj 
	Exceptionjj 
)jj 
{kk 
resultll 
=ll 
falsell 
;ll 
}mm 
returnpp 
Taskpp 
.pp 

FromResultpp "
(pp" #
resultpp# )
)pp) *
;pp* +
}qq 	
publicss 
Taskss 
<ss 
intss 
>ss 
RemovePromocionss (
(ss( )
intss) ,
idss- /
)ss/ 0
{tt 	
varuu 
	Promocionuu 
=uu 
_contextuu $
.uu$ %
promocionesuu% 0
.uu0 1
Finduu1 5
(uu5 6
iduu6 8
)uu8 9
;uu9 :
ifvv 
(vv 
	Promocionvv 
==vv 
nullvv !
)vv! "
{ww 
returnxx 
Taskxx 
.xx 

FromResultxx &
(xx& '
$numxx' (
)xx( )
;xx) *
}yy 
_context{{ 
.{{ 
promociones{{  
.{{  !
Remove{{! '
({{' (
	Promocion{{( 1
){{1 2
;{{2 3
_context|| 
.|| 
SaveChanges||  
(||  !
)||! "
;||" #
return~~ 
Task~~ 
.~~ 

FromResult~~ "
(~~" #
$num~~# $
)~~$ %
;~~% &
} 	
public
ÅÅ 
Task
ÅÅ 
<
ÅÅ 
	Promocion
ÅÅ 
>
ÅÅ 
GetPromocionById
ÅÅ /
(
ÅÅ/ 0
int
ÅÅ0 3
id
ÅÅ4 6
)
ÅÅ6 7
{
ÇÇ 	
var
ÉÉ 
us
ÉÉ 
=
ÉÉ 
_context
ÉÉ 
.
ÉÉ 
promociones
ÉÉ )
.
ÉÉ) *
Find
ÉÉ* .
(
ÉÉ. /
id
ÉÉ/ 1
)
ÉÉ1 2
;
ÉÉ2 3
if
ÖÖ 
(
ÖÖ 
us
ÖÖ 
!=
ÖÖ 
null
ÖÖ 
)
ÖÖ 
{
ÜÜ 
	Promocion
áá 
tb_cli
áá  
=
áá! "
new
áá# &
	Promocion
áá' 0
{
àà 
id
ââ 
=
ââ 
us
ââ 
.
ââ 
Id
ââ 
,
ââ 
nombre
ää 
=
ää 
us
ää 
.
ää  
Nombre
ää  &
,
ää& '
descripcion
ãã 
=
ãã  !
us
ãã" $
.
ãã$ %
Descripcion
ãã% 0
,
ãã0 1
	fecInicio
åå 
=
åå 
us
åå  "
.
åå" #
	FecInicio
åå# ,
,
åå, -
fecFin
çç 
=
çç 
us
çç 
.
çç  
FecFin
çç  &
,
çç& '!
porcentajeDescuento
éé '
=
éé( )
us
éé* ,
.
éé, -!
PorcentajeDescuento
éé- @
,
éé@ A
estado
èè 
=
èè 
us
èè 
.
èè  
Estado
èè  &
,
èè& '
fecRegistro
êê 
=
êê  !
us
êê" $
.
êê$ %
FecRegistro
êê% 0
,
êê0 1
fecModificacion
ëë #
=
ëë$ %
DateTime
ëë& .
.
ëë. /
Now
ëë/ 2
}
íí 
;
íí 
return
îî 
Task
îî 
.
îî 

FromResult
îî &
(
îî& '
tb_cli
îî' -
)
îî- .
;
îî. /
}
ïï 
else
ññ 
return
óó 
Task
óó 
.
óó 

FromResult
óó &
<
óó& '
	Promocion
óó' 0
>
óó0 1
(
óó1 2
null
óó2 6
)
óó6 7
;
óó7 8
}
òò 	
public
öö 
Task
öö 
<
öö 
	Promocion
öö 
>
öö %
GetPromocionByPromocion
öö 6
(
öö6 7
string
öö7 =
	promocion
öö> G
)
ööG H
{
õõ 	
try
úú 
{
ùù 
var
ûû 
us
ûû 
=
ûû 
_context
ûû !
.
ûû! "
promociones
ûû" -
.
ûû- .
Where
ûû. 3
(
ûû3 4
x
ûû4 5
=>
ûû6 8
x
ûû9 :
.
ûû: ;
Nombre
ûû; A
.
ûûA B
Trim
ûûB F
(
ûûF G
)
ûûG H
.
ûûH I
ToLower
ûûI P
(
ûûP Q
)
ûûQ R
.
ûûR S
Equals
ûûS Y
(
ûûY Z
	promocion
ûûZ c
.
ûûc d
ToLower
ûûd k
(
ûûk l
)
ûûl m
)
ûûm n
)
ûûn o
.
ûûo p
FirstOrDefault
ûûp ~
(
ûû~ 
)ûû Ä
;ûûÄ Å
if
†† 
(
†† 
us
†† 
!=
†† 
null
†† 
)
†† 
{
°° 
	Promocion
¢¢ 
tb_cli
¢¢ $
=
¢¢% &
new
¢¢' *
	Promocion
¢¢+ 4
{
££ 
id
§§ 
=
§§ 
us
§§ 
.
§§  
Id
§§  "
,
§§" #
nombre
•• 
=
••  
us
••! #
.
••# $
Nombre
••$ *
,
••* +
descripcion
¶¶ #
=
¶¶$ %
us
¶¶& (
.
¶¶( )
Descripcion
¶¶) 4
,
¶¶4 5
	fecInicio
ßß !
=
ßß" #
us
ßß$ &
.
ßß& '
	FecInicio
ßß' 0
,
ßß0 1
fecFin
®® 
=
®®  
us
®®! #
.
®®# $
FecFin
®®$ *
,
®®* +!
porcentajeDescuento
©© +
=
©©, -
us
©©. 0
.
©©0 1!
PorcentajeDescuento
©©1 D
,
©©D E
estado
™™ 
=
™™  
us
™™! #
.
™™# $
Estado
™™$ *
,
™™* +
fecRegistro
´´ #
=
´´$ %
us
´´& (
.
´´( )
FecRegistro
´´) 4
,
´´4 5
fecModificacion
¨¨ '
=
¨¨( )
DateTime
¨¨* 2
.
¨¨2 3
Now
¨¨3 6
}
≠≠ 
;
≠≠ 
return
ØØ 
Task
ØØ 
.
ØØ  

FromResult
ØØ  *
(
ØØ* +
tb_cli
ØØ+ 1
)
ØØ1 2
;
ØØ2 3
}
∞∞ 
}
≤≤ 
catch
≥≥ 
(
≥≥ 
	Exception
≥≥ 
)
≥≥ 
{
¥¥ 
throw
∂∂ 
;
∂∂ 
}
∑∑ 
return
ππ 
Task
ππ 
.
ππ 

FromResult
ππ "
<
ππ" #
	Promocion
ππ# ,
>
ππ, -
(
ππ- .
null
ππ. 2
)
ππ2 3
;
ππ3 4
}
ªª 	
public
ΩΩ 
Task
ΩΩ 
<
ΩΩ 
bool
ΩΩ 
>
ΩΩ !
AddPromocionDetalle
ΩΩ -
(
ΩΩ- .
PromocionDetalle
ΩΩ. >
us
ΩΩ? A
)
ΩΩA B
{
ææ 	
bool
øø 
result
øø 
=
øø 
false
øø 
;
øø  "
tb_promocion_detalle
¿¿  
tb_cli
¿¿! '
=
¿¿( )
new
¿¿* -"
tb_promocion_detalle
¿¿. B
{
¡¡ 

IdProducto
¬¬ 
=
¬¬ 
us
¬¬ 
.
¬¬  

idProducto
¬¬  *
,
¬¬* +
IdPromocion
√√ 
=
√√ 
us
√√  
.
√√  !
idPromocion
√√! ,
,
√√, -
Estado
ƒƒ 
=
ƒƒ 
true
ƒƒ 
}
≈≈ 
;
≈≈ 
try
«« 
{
»» 
_context
…… 
.
……  
promocionesDetalle
…… +
.
……+ ,
Add
……, /
(
……/ 0
tb_cli
……0 6
)
……6 7
;
……7 8
_context
   
.
   
SaveChanges
   $
(
  $ %
)
  % &
;
  & '
result
ÃÃ 
=
ÃÃ 
true
ÃÃ 
;
ÃÃ 
}
ÕÕ 
catch
ŒŒ 
(
ŒŒ 
	Exception
ŒŒ 
)
ŒŒ 
{
œœ 
}
–– 
return
““ 
Task
““ 
.
““ 

FromResult
““ "
(
““" #
result
““# )
)
““) *
;
““* +
}
”” 	
public
’’ 
Task
’’ 
<
’’ 
bool
’’ 
>
’’ (
RemovePromocionDetalleTodo
’’ 4
(
’’4 5
int
’’5 8
idProm
’’9 ?
)
’’? @
{
÷÷ 	
bool
◊◊ 
result
◊◊ 
=
◊◊ 
false
◊◊ 
;
◊◊  
try
ŸŸ 
{
⁄⁄ 
var
€€ 
detalle
€€ 
=
€€ 
_context
€€ &
.
€€& ' 
promocionesDetalle
€€' 9
.
€€9 :
Where
€€: ?
(
€€? @
x
€€@ A
=>
€€B D
x
€€E F
.
€€F G
IdPromocion
€€G R
==
€€S U
idProm
€€V \
)
€€\ ]
.
€€] ^
ToList
€€^ d
(
€€d e
)
€€e f
;
€€f g
_context
‹‹ 
.
‹‹  
promocionesDetalle
‹‹ +
.
‹‹+ ,
RemoveRange
‹‹, 7
(
‹‹7 8
detalle
‹‹8 ?
)
‹‹? @
;
‹‹@ A
_context
›› 
.
›› 
SaveChanges
›› $
(
››$ %
)
››% &
;
››& '
result
ﬂﬂ 
=
ﬂﬂ 
true
ﬂﬂ 
;
ﬂﬂ 
}
‡‡ 
catch
·· 
(
·· 
	Exception
·· 
)
·· 
{
‚‚ 
}
„„ 
return
ÂÂ 
Task
ÂÂ 
.
ÂÂ 

FromResult
ÂÂ "
(
ÂÂ" #
result
ÂÂ# )
)
ÂÂ) *
;
ÂÂ* +
}
ÊÊ 	
public
ËË 
async
ËË 
Task
ËË 
<
ËË 
List
ËË 
<
ËË 
int
ËË "
>
ËË" #
>
ËË# $&
GetPromocionProductosIds
ËË% =
(
ËË= >
int
ËË> A
idPromocion
ËËB M
)
ËËM N
{
ÈÈ 	
List
ÍÍ 
<
ÍÍ 
int
ÍÍ 
>
ÍÍ 
productosIds
ÍÍ "
=
ÍÍ# $
new
ÍÍ% (
List
ÍÍ) -
<
ÍÍ- .
int
ÍÍ. 1
>
ÍÍ1 2
(
ÍÍ2 3
)
ÍÍ3 4
;
ÍÍ4 5
try
ÏÏ 
{
ÌÌ 
var
ÓÓ 
result
ÓÓ 
=
ÓÓ 
await
ÓÓ "
Task
ÓÓ# '
.
ÓÓ' (
Run
ÓÓ( +
(
ÓÓ+ ,
(
ÓÓ, -
)
ÓÓ- .
=>
ÓÓ/ 1
_context
ÓÓ2 :
.
ÓÓ: ; 
promocionesDetalle
ÓÓ; M
.
ÓÓM N
Where
ÓÓN S
(
ÓÓS T
x
ÓÓT U
=>
ÓÓV X
x
ÓÓY Z
.
ÓÓZ [
IdPromocion
ÓÓ[ f
==
ÓÓg i
idPromocion
ÓÓj u
)
ÓÓu v
.
ÓÓv w
Select
ÓÓw }
(
ÓÓ} ~
y
ÓÓ~ 
=>ÓÓÄ Ç
yÓÓÉ Ñ
.ÓÓÑ Ö

IdProductoÓÓÖ è
)ÓÓè ê
.ÓÓê ë
ToListAsyncÓÓë ú
(ÓÓú ù
)ÓÓù û
)ÓÓû ü
;ÓÓü †
foreach
 
(
 
var
 
us
 
in
  "
result
# )
)
) *
{
ÒÒ 
productosIds
ÚÚ  
.
ÚÚ  !
Add
ÚÚ! $
(
ÚÚ$ %
us
ÚÚ% '
)
ÚÚ' (
;
ÚÚ( )
}
ÛÛ 
}
ÙÙ 
catch
ıı 
(
ıı 
	Exception
ıı 
)
ıı 
{
ˆˆ 
}
¯¯ 
return
˙˙ 
productosIds
˙˙ 
;
˙˙  
}
˚˚ 	
}
¸¸ 
}˝˝  o
aD:\Proyectos\NetCore\UPC_PI2_Backend\PremierBeef.Infrastructure\Repository\ProveedorRepository.cs
	namespace 	
PremierBeef
 
. 
Infrastructure $
.$ %

Repository% /
{ 
public		 

class		 
ProveedorRepository		 $
:		% & 
IProveedorRepository		' ;
{

 
private 
readonly 
PremierContext '
_context( 0
;0 1
public 
ProveedorRepository "
(" #
PremierContext# 1
context2 9
)9 :
{ 	
_context 
= 
context 
; 
} 	
public 
async 
Task 
< 
List 
< 
	Proveedor (
>( )
>) *
GetProveedores+ 9
(9 :
): ;
{ 	
List 
< 
	Proveedor 
> 
roles !
=" #
new$ '
List( ,
<, -
	Proveedor- 6
>6 7
(7 8
)8 9
;9 :
try 
{ 
var 
result 
= 
await "
Task# '
.' (
Run( +
(+ ,
(, -
)- .
=>/ 1
_context2 :
.: ;
proveedores; F
.F G
ToListAsyncG R
(R S
)S T
)T U
;U V
foreach 
( 
var 
us 
in  "
result# )
)) *
{ 
roles 
. 
Add 
( 
new !
	Proveedor" +
{ 
id 
= 
us 
.  
Id  "
," #
nombre 
=  
us! #
.# $
Nombre$ *
??+ -
$str. 0
,0 1
descripcion   #
=  $ %
us  & (
.  ( )
Descripcion  ) 4
??  5 7
$str  8 :
,  : ;
	direccion!! !
=!!" #
us!!$ &
.!!& '
	Direccion!!' 0
??!!1 3
$str!!4 6
,!!6 7
telefono""  
=""! "
us""# %
.""% &
Telefono""& .
??""/ 1
$str""2 4
,""4 5
idTipoDocumento## '
=##( )
us##* ,
.##, -
IdTipoDocumento##- <
,##< =
numeroDocumento$$ '
=$$( )
us$$* ,
.$$, -
NumeroDocumento$$- <
}%% 
)%% 
;%% 
}&& 
}'' 
catch(( 
((( 
	Exception(( 
)(( 
{)) 
}++ 
return.. 
roles.. 
;.. 
}// 	
public11 
Task11 
<11 
int11 
>11 
AddProveedor11 %
(11% &
	Proveedor11& /
us110 2
)112 3
{22 	
int33 
newId33 
=33 
$num33 
;33 
tb_proveedor44 
tb_cli44 
=44  !
new44" %
tb_proveedor44& 2
{55 
Nombre66 
=66 
us66 
.66 
nombre66 "
,66" #
Descripcion77 
=77 
us77  
.77  !
descripcion77! ,
,77, -
	Direccion88 
=88 
us88 
.88 
	direccion88 (
,88( )
Telefono99 
=99 
us99 
.99 
telefono99 &
,99& '
IdTipoDocumento:: 
=::  !
us::" $
.::$ %
idTipoDocumento::% 4
,::4 5
NumeroDocumento;; 
=;;  !
us;;" $
.;;$ %
numeroDocumento;;% 4
,;;4 5
FecRegistro<< 
=<< 
us<<  
.<<  !
fecRegistro<<! ,
,<<, -
FecModificacion== 
===  !
us==" $
.==$ %
fecModificacion==% 4
}>> 
;>> 
try@@ 
{AA 
_contextBB 
.BB 
proveedoresBB $
.BB$ %
AddBB% (
(BB( )
tb_cliBB) /
)BB/ 0
;BB0 1
_contextCC 
.CC 
SaveChangesCC $
(CC$ %
)CC% &
;CC& '
newIdEE 
=EE 
tb_cliEE 
.EE 
IdEE !
;EE! "
}FF 
catchGG 
(GG 
	ExceptionGG 
)GG 
{HH 
tb_cliII 
.II 
IdII 
=II 
$numII 
;II 
}JJ 
returnLL 
TaskLL 
.LL 

FromResultLL "
(LL" #
newIdLL# (
)LL( )
;LL) *
}MM 	
publicOO 
TaskOO 
<OO 
intOO 
>OO 
UpdateProveedorOO (
(OO( )
	ProveedorOO) 2
usOO3 5
)OO5 6
{PP 	
tb_proveedorQQ 
tb_cliQQ 
=QQ  !
newQQ" %
tb_proveedorQQ& 2
{RR 
IdSS 
=SS 
usSS 
.SS 
idSS 
,SS 
NombreTT 
=TT 
usTT 
.TT 
nombreTT "
,TT" #
DescripcionUU 
=UU 
usUU  
.UU  !
descripcionUU! ,
,UU, -
	DireccionVV 
=VV 
usVV 
.VV 
	direccionVV (
,VV( )
TelefonoWW 
=WW 
usWW 
.WW 
telefonoWW &
,WW& '
IdTipoDocumentoXX 
=XX  !
usXX" $
.XX$ %
idTipoDocumentoXX% 4
,XX4 5
NumeroDocumentoYY 
=YY  !
usYY" $
.YY$ %
numeroDocumentoYY% 4
,YY4 5
FecRegistroZZ 
=ZZ 
usZZ  
.ZZ  !
fecRegistroZZ! ,
,ZZ, -
FecModificacion[[ 
=[[  !
DateTime[[" *
.[[* +
Now[[+ .
}\\ 
;\\ 
try^^ 
{__ 
_contextdd 
.dd 
proveedoresdd $
.dd$ %
Attachdd% +
(dd+ ,
tb_clidd, 2
)dd2 3
;dd3 4
_contextee 
.ee 
Entryee 
(ee 
tb_cliee %
)ee% &
.ee& '
Stateee' ,
=ee- .
EntityStateee/ :
.ee: ;
Modifiedee; C
;eeC D
_contextff 
.ff 
Entryff 
(ff 
tb_cliff %
)ff% &
.ff& '
Propertyff' /
(ff/ 0
xff0 1
=>ff2 4
xff5 6
.ff6 7
Idff7 9
)ff9 :
.ff: ;

IsModifiedff; E
=ffF G
falseffH M
;ffM N
_contextgg 
.gg 
Entrygg 
(gg 
tb_cligg %
)gg% &
.gg& '
Propertygg' /
(gg/ 0
Xgg0 1
=>gg2 4
Xgg5 6
.gg6 7
FecRegistrogg7 B
)ggB C
.ggC D

IsModifiedggD N
=ggO P
falseggQ V
;ggV W
_contextii 
.ii 
proveedoresii $
.ii$ %
Updateii% +
(ii+ ,
tb_cliii, 2
)ii2 3
;ii3 4
_contextjj 
.jj 
SaveChangesjj $
(jj$ %
)jj% &
;jj& '
}kk 
catchll 
(ll 
	Exceptionll 
)ll 
{mm 
}oo 
returnrr 
Taskrr 
.rr 

FromResultrr "
(rr" #
$numrr# $
)rr$ %
;rr% &
}ss 	
publicuu 
Taskuu 
<uu 
intuu 
>uu 
RemoveProveedoruu (
(uu( )
intuu) ,
iduu- /
)uu/ 0
{vv 	
varww 
	Proveedorww 
=ww 
_contextww $
.ww$ %
proveedoresww% 0
.ww0 1
Findww1 5
(ww5 6
idww6 8
)ww8 9
;ww9 :
ifxx 
(xx 
	Proveedorxx 
==xx 
nullxx !
)xx! "
{yy 
returnzz 
Taskzz 
.zz 

FromResultzz &
(zz& '
$numzz' (
)zz( )
;zz) *
}{{ 
_context}} 
.}} 
proveedores}}  
.}}  !
Remove}}! '
(}}' (
	Proveedor}}( 1
)}}1 2
;}}2 3
_context~~ 
.~~ 
SaveChanges~~  
(~~  !
)~~! "
;~~" #
return
ÄÄ 
Task
ÄÄ 
.
ÄÄ 

FromResult
ÄÄ "
(
ÄÄ" #
$num
ÄÄ# $
)
ÄÄ$ %
;
ÄÄ% &
}
ÅÅ 	
public
ÉÉ 
Task
ÉÉ 
<
ÉÉ 
	Proveedor
ÉÉ 
>
ÉÉ 
GetProveedorById
ÉÉ /
(
ÉÉ/ 0
int
ÉÉ0 3
id
ÉÉ4 6
)
ÉÉ6 7
{
ÑÑ 	
var
ÖÖ 
us
ÖÖ 
=
ÖÖ 
_context
ÖÖ 
.
ÖÖ 
proveedores
ÖÖ )
.
ÖÖ) *
Find
ÖÖ* .
(
ÖÖ. /
id
ÖÖ/ 1
)
ÖÖ1 2
;
ÖÖ2 3
if
áá 
(
áá 
us
áá 
!=
áá 
null
áá 
)
áá 
{
àà 
	Proveedor
ââ 
tb_cli
ââ  
=
ââ! "
new
ââ# &
	Proveedor
ââ' 0
{
ää 
id
ãã 
=
ãã 
us
ãã 
.
ãã 
Id
ãã 
,
ãã 
nombre
åå 
=
åå 
us
åå 
.
åå  
Nombre
åå  &
,
åå& '
descripcion
çç 
=
çç  !
us
çç" $
.
çç$ %
Descripcion
çç% 0
,
çç0 1
	direccion
éé 
=
éé 
us
éé  "
.
éé" #
	Direccion
éé# ,
,
éé, -
telefono
èè 
=
èè 
us
èè !
.
èè! "
Telefono
èè" *
,
èè* +
idTipoDocumento
êê #
=
êê$ %
us
êê& (
.
êê( )
IdTipoDocumento
êê) 8
,
êê8 9
numeroDocumento
ëë #
=
ëë$ %
us
ëë& (
.
ëë( )
NumeroDocumento
ëë) 8
,
ëë8 9
fecRegistro
íí 
=
íí  !
us
íí" $
.
íí$ %
FecRegistro
íí% 0
,
íí0 1
fecModificacion
ìì #
=
ìì$ %
us
ìì& (
.
ìì( )
FecModificacion
ìì) 8
}
îî 
;
îî 
return
ññ 
Task
ññ 
.
ññ 

FromResult
ññ &
(
ññ& '
tb_cli
ññ' -
)
ññ- .
;
ññ. /
}
óó 
else
òò 
return
ôô 
Task
ôô 
.
ôô 

FromResult
ôô &
<
ôô& '
	Proveedor
ôô' 0
>
ôô0 1
(
ôô1 2
null
ôô2 6
)
ôô6 7
;
ôô7 8
}
öö 	
public
úú 
Task
úú 
<
úú 
	Proveedor
úú 
>
úú %
GetProveedorByProveedor
úú 6
(
úú6 7
string
úú7 =
	Proveedor
úú> G
)
úúG H
{
ùù 	
try
ûû 
{
üü 
var
†† 
us
†† 
=
†† 
_context
†† !
.
††! "
proveedores
††" -
.
††- .
Where
††. 3
(
††3 4
x
††4 5
=>
††6 8
x
††9 :
.
††: ;
Nombre
††; A
.
††A B
Trim
††B F
(
††F G
)
††G H
.
††H I
ToLower
††I P
(
††P Q
)
††Q R
.
††R S
Equals
††S Y
(
††Y Z
	Proveedor
††Z c
.
††c d
ToLower
††d k
(
††k l
)
††l m
)
††m n
)
††n o
.
††o p
FirstOrDefault
††p ~
(
††~ 
)†† Ä
;††Ä Å
if
¢¢ 
(
¢¢ 
us
¢¢ 
!=
¢¢ 
null
¢¢ 
)
¢¢ 
{
££ 
	Proveedor
§§ 
tb_cli
§§ $
=
§§% &
new
§§' *
	Proveedor
§§+ 4
{
•• 
id
¶¶ 
=
¶¶ 
us
¶¶ 
.
¶¶  
Id
¶¶  "
,
¶¶" #
nombre
ßß 
=
ßß  
us
ßß! #
.
ßß# $
Nombre
ßß$ *
,
ßß* +
descripcion
®® #
=
®®$ %
us
®®& (
.
®®( )
Descripcion
®®) 4
,
®®4 5
	direccion
©© !
=
©©" #
us
©©$ &
.
©©& '
	Direccion
©©' 0
,
©©0 1
telefono
™™  
=
™™! "
us
™™# %
.
™™% &
Telefono
™™& .
,
™™. /
idTipoDocumento
´´ '
=
´´( )
us
´´* ,
.
´´, -
IdTipoDocumento
´´- <
,
´´< =
numeroDocumento
¨¨ '
=
¨¨( )
us
¨¨* ,
.
¨¨, -
NumeroDocumento
¨¨- <
,
¨¨< =
fecRegistro
≠≠ #
=
≠≠$ %
us
≠≠& (
.
≠≠( )
FecRegistro
≠≠) 4
,
≠≠4 5
fecModificacion
ÆÆ '
=
ÆÆ( )
us
ÆÆ* ,
.
ÆÆ, -
FecModificacion
ÆÆ- <
}
ØØ 
;
ØØ 
return
±± 
Task
±± 
.
±±  

FromResult
±±  *
(
±±* +
tb_cli
±±+ 1
)
±±1 2
;
±±2 3
}
≤≤ 
}
≥≥ 
catch
¥¥ 
(
¥¥ 
	Exception
¥¥ 
)
¥¥ 
{
µµ 
throw
∂∂ 
;
∂∂ 
}
∑∑ 
return
ππ 
Task
ππ 
.
ππ 

FromResult
ππ "
<
ππ" #
	Proveedor
ππ# ,
>
ππ, -
(
ππ- .
null
ππ. 2
)
ππ2 3
;
ππ3 4
}
∫∫ 	
}
ªª 
}ºº ©c
_D:\Proyectos\NetCore\UPC_PI2_Backend\PremierBeef.Infrastructure\Repository\ReclamoRepository.cs
	namespace 	
PremierBeef
 
. 
Infrastructure $
.$ %

Repository% /
{ 
public		 

class		 
ReclamoRepository		 "
:		# $
IReclamoRepository		% 7
{

 
private 
readonly 
PremierContext '
_context( 0
;0 1
public 
ReclamoRepository  
(  !
PremierContext! /
context0 7
)7 8
{ 	
_context 
= 
context 
; 
} 	
public 
Task 
< 
int 
> 

AddReclamo #
(# $
Reclamo$ +
us, .
). /
{ 	
int 
newId 
= 
$num 
; 

tb_reclamo 
tb_cli 
= 
new  #

tb_reclamo$ .
{ 
Detalle 
= 
us 
. 
detalle $
,$ %
	IdUsuario 
= 
us 
. 
	idUsuario (
,( )
IdPedido 
= 
us 
. 
idPedido &
,& '
IdTipoReclamo 
= 
us  "
." #
idTipoReclamo# 0
,0 1
IdUsuarioRespuesta "
=# $
us% '
.' (
idUsuarioRespuesta( :
,: ;
	Respuesta 
= 
us 
. 
	respuesta (
,( )
FecRegistro 
= 
us  
.  !
fecRegistro! ,
,, -
FecModificacion 
=  !
us" $
.$ %
fecModificacion% 4
} 
; 
try!! 
{"" 
_context## 
.## 
reclamos## !
.##! "
Add##" %
(##% &
tb_cli##& ,
)##, -
;##- .
_context$$ 
.$$ 
SaveChanges$$ $
($$$ %
)$$% &
;$$& '
newId&& 
=&& 
tb_cli&& 
.&& 
Id&& !
;&&! "
}'' 
catch(( 
((( 
	Exception(( 
)(( 
{)) 
tb_cli** 
.** 
Id** 
=** 
$num** 
;** 
}++ 
return-- 
Task-- 
.-- 

FromResult-- "
(--" #
newId--# (
)--( )
;--) *
}.. 	
public00 
Task00 
<00 
int00 
>00 
UpdateReclamo00 &
(00& '
Reclamo00' .
us00/ 1
)001 2
{11 	

tb_reclamo22 
tb_cli22 
=22 
new22  #

tb_reclamo22$ .
{33 
Detalle44 
=44 
us44 
.44 
detalle44 $
,44$ %
	IdUsuario55 
=55 
us55 
.55 
	idUsuario55 (
,55( )
IdPedido66 
=66 
us66 
.66 
idPedido66 &
,66& '
IdTipoReclamo77 
=77 
us77  "
.77" #
idTipoReclamo77# 0
,770 1
	Respuesta88 
=88 
us88 
.88 
	respuesta88 (
,88( )
IdUsuarioRespuesta99 "
=99# $
us99% '
.99' (
idUsuarioRespuesta99( :
,99: ;
FecRegistro:: 
=:: 
us::  
.::  !
fecRegistro::! ,
,::, -
FecModificacion;; 
=;;  !
DateTime;;" *
.;;* +
Now;;+ .
,;;. /

FecReclamo<< 
=<< 
us<< 
.<<  

fecReclamo<<  *
,<<* +
FecRespuesta== 
=== 
us== !
.==! "
fecRespuesta==" .
,==. /
Estado>> 
=>> 
us>> 
.>> 
estado>> "
,>>" #
EstadoReclamo?? 
=?? 
us??  "
.??" #
estadoReclamo??# 0
}@@ 
;@@ 
tryBB 
{CC 
_contextHH 
.HH 
reclamosHH !
.HH! "
AttachHH" (
(HH( )
tb_cliHH) /
)HH/ 0
;HH0 1
_contextII 
.II 
EntryII 
(II 
tb_cliII %
)II% &
.II& '
StateII' ,
=II- .
EntityStateII/ :
.II: ;
ModifiedII; C
;IIC D
_contextJJ 
.JJ 
EntryJJ 
(JJ 
tb_cliJJ %
)JJ% &
.JJ& '
PropertyJJ' /
(JJ/ 0
xJJ0 1
=>JJ2 4
xJJ5 6
.JJ6 7
IdJJ7 9
)JJ9 :
.JJ: ;

IsModifiedJJ; E
=JJF G
falseJJH M
;JJM N
_contextKK 
.KK 
EntryKK 
(KK 
tb_cliKK %
)KK% &
.KK& '
PropertyKK' /
(KK/ 0
XKK0 1
=>KK2 4
XKK5 6
.KK6 7
FecRegistroKK7 B
)KKB C
.KKC D

IsModifiedKKD N
=KKO P
falseKKQ V
;KKV W
_contextMM 
.MM 
reclamosMM !
.MM! "
UpdateMM" (
(MM( )
tb_cliMM) /
)MM/ 0
;MM0 1
_contextNN 
.NN 
SaveChangesNN $
(NN$ %
)NN% &
;NN& '
}OO 
catchPP 
(PP 
	ExceptionPP 
)PP 
{QQ 
}SS 
returnVV 
TaskVV 
.VV 

FromResultVV "
(VV" #
$numVV# $
)VV$ %
;VV% &
}WW 	
publicYY 
TaskYY 
<YY 
intYY 
>YY 
RemoveReclamoYY &
(YY& '
intYY' *
idYY+ -
)YY- .
{ZZ 	
var[[ 
Reclamo[[ 
=[[ 
_context[[ "
.[[" #
reclamos[[# +
.[[+ ,
Find[[, 0
([[0 1
id[[1 3
)[[3 4
;[[4 5
if\\ 
(\\ 
Reclamo\\ 
==\\ 
null\\ 
)\\  
{]] 
return^^ 
Task^^ 
.^^ 

FromResult^^ &
(^^& '
$num^^' (
)^^( )
;^^) *
}__ 
_contextaa 
.aa 
reclamosaa 
.aa 
Removeaa $
(aa$ %
Reclamoaa% ,
)aa, -
;aa- .
_contextbb 
.bb 
SaveChangesbb  
(bb  !
)bb! "
;bb" #
returndd 
Taskdd 
.dd 

FromResultdd "
(dd" #
$numdd# $
)dd$ %
;dd% &
}ee 	
publicgg 
Taskgg 
<gg 
Reclamogg 
>gg 
GetReclamoByIdgg +
(gg+ ,
intgg, /
idgg0 2
)gg2 3
{hh 	
varii 
usii 
=ii 
_contextii 
.ii 
reclamosii &
.ii& '
Findii' +
(ii+ ,
idii, .
)ii. /
;ii/ 0
ifkk 
(kk 
uskk 
!=kk 
nullkk 
)kk 
{ll 
Reclamomm 
tb_climm 
=mm  
newmm! $
Reclamomm% ,
{nn 
idoo 
=oo 
usoo 
.oo 
Idoo 
,oo 
detallepp 
=pp 
uspp  
.pp  !
Detallepp! (
,pp( )
	idUsuarioqq 
=qq 
usqq  "
.qq" #
	IdUsuarioqq# ,
,qq, -
idPedidorr 
=rr 
usrr !
.rr! "
IdPedidorr" *
,rr* +
idTipoReclamoss !
=ss" #
usss$ &
.ss& '
IdTipoReclamoss' 4
,ss4 5
idUsuarioRespuestatt &
=tt' (
ustt) +
.tt+ ,
IdUsuarioRespuestatt, >
,tt> ?
	respuestauu 
=uu 
usuu  "
.uu" #
	Respuestauu# ,
,uu, -
fecRegistrovv 
=vv  !
usvv" $
.vv$ %
FecRegistrovv% 0
,vv0 1
fecModificacionww #
=ww$ %
usww& (
.ww( )
FecModificacionww) 8
,ww8 9

fecReclamoxx 
=xx  
usxx! #
.xx# $

FecReclamoxx$ .
,xx. /
fecRespuestayy  
=yy! "
usyy# %
.yy% &
FecRespuestayy& 2
,yy2 3
estadozz 
=zz 
uszz 
.zz  
Estadozz  &
,zz& '
estadoReclamo{{ !
={{" #
us{{$ &
.{{& '
EstadoReclamo{{' 4
}|| 
;|| 
return~~ 
Task~~ 
.~~ 

FromResult~~ &
(~~& '
tb_cli~~' -
)~~- .
;~~. /
} 
else
ÄÄ 
return
ÅÅ 
Task
ÅÅ 
.
ÅÅ 

FromResult
ÅÅ &
<
ÅÅ& '
Reclamo
ÅÅ' .
>
ÅÅ. /
(
ÅÅ/ 0
null
ÅÅ0 4
)
ÅÅ4 5
;
ÅÅ5 6
}
ÇÇ 	
public
ÑÑ 
async
ÑÑ 
Task
ÑÑ 
<
ÑÑ 
List
ÑÑ 
<
ÑÑ 
Reclamo
ÑÑ &
>
ÑÑ& '
>
ÑÑ' (
GetReclamos
ÑÑ) 4
(
ÑÑ4 5
)
ÑÑ5 6
{
ÖÖ 	
List
ÜÜ 
<
ÜÜ 
Reclamo
ÜÜ 
>
ÜÜ 
reclamos
ÜÜ "
=
ÜÜ# $
new
ÜÜ% (
List
ÜÜ) -
<
ÜÜ- .
Reclamo
ÜÜ. 5
>
ÜÜ5 6
(
ÜÜ6 7
)
ÜÜ7 8
;
ÜÜ8 9
try
àà 
{
ââ 
var
ää 
result
ää 
=
ää 
await
ää "
Task
ää# '
.
ää' (
Run
ää( +
(
ää+ ,
(
ää, -
)
ää- .
=>
ää/ 1
_context
ää2 :
.
ää: ;
reclamos
ää; C
.
ääC D
ToListAsync
ääD O
(
ääO P
)
ääP Q
)
ääQ R
;
ääR S
foreach
åå 
(
åå 
var
åå 
us
åå 
in
åå  "
result
åå# )
)
åå) *
{
çç 
reclamos
éé 
.
éé 
Add
éé  
(
éé  !
new
éé! $
Reclamo
éé% ,
{
èè 
id
êê 
=
êê 
us
êê 
.
êê  
Id
êê  "
,
êê" #
detalle
ëë 
=
ëë  !
us
ëë" $
.
ëë$ %
Detalle
ëë% ,
,
ëë, -
	idUsuario
íí !
=
íí" #
us
íí$ &
.
íí& '
	IdUsuario
íí' 0
,
íí0 1
idPedido
ìì  
=
ìì! "
us
ìì# %
.
ìì% &
IdPedido
ìì& .
,
ìì. /
idTipoReclamo
îî %
=
îî& '
us
îî( *
.
îî* +
IdTipoReclamo
îî+ 8
,
îî8 9 
idUsuarioRespuesta
ïï *
=
ïï+ ,
us
ïï- /
.
ïï/ 0 
IdUsuarioRespuesta
ïï0 B
,
ïïB C
	respuesta
ññ !
=
ññ" #
us
ññ$ &
.
ññ& '
	Respuesta
ññ' 0
,
ññ0 1
fecRegistro
óó #
=
óó$ %
us
óó& (
.
óó( )
FecRegistro
óó) 4
,
óó4 5
fecModificacion
òò '
=
òò( )
us
òò* ,
.
òò, -
FecModificacion
òò- <
,
òò< =

fecReclamo
ôô "
=
ôô# $
us
ôô% '
.
ôô' (

FecReclamo
ôô( 2
,
ôô2 3
fecRespuesta
öö $
=
öö% &
us
öö' )
.
öö) *
FecRespuesta
öö* 6
,
öö6 7
estado
õõ 
=
õõ  
us
õõ! #
.
õõ# $
Estado
õõ$ *
,
õõ* +
estadoReclamo
úú %
=
úú& '
us
úú( *
.
úú* +
EstadoReclamo
úú+ 8
}
ùù 
)
ùù 
;
ùù 
}
ûû 
}
üü 
catch
†† 
(
†† 
	Exception
†† 
)
†† 
{
°° 
}
££ 
return
¶¶ 
reclamos
¶¶ 
;
¶¶ 
}
ßß 	
}
®® 
}©© Ì
cD:\Proyectos\NetCore\UPC_PI2_Backend\PremierBeef.Infrastructure\Repository\ReclamoTipoRepository.cs
	namespace 	
PremierBeef
 
. 
Infrastructure $
.$ %

Repository% /
{ 
public 

class !
ReclamoTipoRepository &
:' ("
IReclamoTipoRepository) ?
{		 
private

 
readonly

 
PremierContext

 '
_context

( 0
;

0 1
public !
ReclamoTipoRepository $
($ %
PremierContext% 3
context4 ;
); <
{ 	
_context 
= 
context 
; 
} 	
public 
async 
Task 
< 
List 
< 
ReclamoTipo *
>* +
>+ ,
GetReclamoTipos- <
(< =
)= >
{ 	
List 
< 
ReclamoTipo 
> 
reclamoTipos *
=+ ,
new- 0
List1 5
<5 6
ReclamoTipo6 A
>A B
(B C
)C D
;D E
try 
{ 
var 
result 
= 
await "
Task# '
.' (
Run( +
(+ ,
(, -
)- .
=>/ 1
_context2 :
.: ;
reclamoTipos; G
.G H
WhereH M
(M N
xN O
=>P R
xS T
.T U
EstadoU [
)[ \
.\ ]
ToListAsync] h
(h i
)i j
)j k
;k l
foreach 
( 
var 
us 
in  "
result# )
)) *
{ 
reclamoTipos  
.  !
Add! $
($ %
new% (
ReclamoTipo) 4
{ 
id 
= 
us 
.  
Id  "
," #
nombre 
=  
us! #
.# $
Nombre$ *
,* +
descripcion #
=$ %
us& (
.( )
Descripcion) 4
,4 5
estado   
=    
us  ! #
.  # $
Estado  $ *
}!! 
)!! 
;!! 
}"" 
}## 
catch$$ 
($$ 
	Exception$$ 
)$$ 
{%% 
}'' 
return** 
reclamoTipos** 
;**  
}++ 	
},, 
}-- ıç
_D:\Proyectos\NetCore\UPC_PI2_Backend\PremierBeef.Infrastructure\Repository\ReporteRepository.cs
	namespace 	
PremierBeef
 
. 
Infrastructure $
.$ %

Repository% /
{ 
public 

class 
ReporteRepository "
:# $
IReporteRepository% 7
{		 
private

 
readonly

 
PremierContext

 '
_context

( 0
;

0 1
public 
ReporteRepository  
(  !
PremierContext! /
context0 7
)7 8
{ 	
_context 
= 
context 
; 
} 	
public 
Task 
< 
List 
< 
ReporteVentas &
>& '
>' (
GetReporteVentas) 9
(9 :
FiltroReporte: G
filtroH N
)N O
{ 	
List 
< 
ReporteVentas 
> 
reporte  '
=( )
new* -
List. 2
<2 3
ReporteVentas3 @
>@ A
(A B
)B C
;C D
try 
{ 
var 
result 
= 
_context %
.% &"
dbo_GetReporteReclamos& <
.< =

FromSqlRaw= G
(G H
$strH s
,s t
filtrou {
.{ |
	fecInicio	| Ö
,
Ö Ü
filtro
á ç
.
ç é
fecFin
é î
,
î ï
filtro
ñ ú
.
ú ù
idPedido
ù •
)
• ¶
.
¶ ß
ToList
ß ≠
(
≠ Æ
)
Æ Ø
;
Ø ∞
if 
( 
result 
!= 
null "
)" #
{ 
foreach 
( 
var  
us! #
in$ &
result' -
)- .
{ 
reporte 
.  
Add  #
(# $
new$ '
ReporteVentas( 5
{ 
id 
=  
us! #
.# $
Id$ &
,& '
detalle   #
=  $ %
us  & (
.  ( )
Detalle  ) 0
,  0 1
usuarioRegistro!! +
=!!, -
us!!. 0
.!!0 1
UsuarioRegistro!!1 @
,!!@ A#
usuarioRegistroCompleto"" 3
=""4 5
us""6 8
.""8 9#
UsuarioRegistroCompleto""9 P
,""P Q
fechaReclamo## (
=##) *
us##+ -
.##- .
FechaReclamo##. :
,##: ;
tipoReclamo$$ '
=$$( )
us$$* ,
.$$, -
TipoReclamo$$- 8
,$$8 9
pedido%% "
=%%# $
us%%% '
.%%' (
Pedido%%( .
,%%. /
cliente&& #
=&&$ %
us&&& (
.&&( )
Cliente&&) 0
,&&0 1
	respuesta'' %
=''& '
us''( *
.''* +
	Respuesta''+ 4
,''4 5
usuarioRespuesta(( ,
=((- .
us((/ 1
.((1 2
UsuarioRespuesta((2 B
,((B C$
usuarioRespuestaCompleto)) 4
=))5 6
us))7 9
.))9 :$
UsuarioRespuestaCompleto)): R
,))R S
fechaRespuesta** *
=**+ ,
us**- /
.**/ 0
FechaRespuesta**0 >
}++ 
)++ 
;++ 
},, 
}.. 
}// 
catch00 
(00 
	Exception00 
)00 
{11 
reporte22 
=22 
new22 
List22 "
<22" #
ReporteVentas22# 0
>220 1
(221 2
)222 3
;223 4
}33 
return55 
Task55 
.55 

FromResult55 "
(55" #
reporte55# *
)55* +
;55+ ,
}66 	
public88 
Task88 
<88 
List88 
<88 
ReportePedidos88 '
>88' (
>88( )
GetReportePedidos88* ;
(88; <
FiltroReporte88< I
filtro88J P
)88P Q
{99 	
List:: 
<:: 
ReportePedidos:: 
>::  
reporte::! (
=::) *
new::+ .
List::/ 3
<::3 4
ReportePedidos::4 B
>::B C
(::C D
)::D E
;::E F
try;; 
{<< 
var== 
result== 
=== 
_context== %
.==% &"
dbo_GetReporteReclamos==& <
.==< =

FromSqlRaw=== G
(==G H
$str==H s
,==s t
filtro==u {
.=={ |
	fecInicio	==| Ö
,
==Ö Ü
filtro
==á ç
.
==ç é
fecFin
==é î
,
==î ï
filtro
==ñ ú
.
==ú ù
idPedido
==ù •
)
==• ¶
.
==¶ ß
ToList
==ß ≠
(
==≠ Æ
)
==Æ Ø
;
==Ø ∞
if@@ 
(@@ 
result@@ 
!=@@ 
null@@ "
)@@" #
{AA 
foreachBB 
(BB 
varBB  
usBB! #
inBB$ &
resultBB' -
)BB- .
{CC 
reporteDD 
.DD  
AddDD  #
(DD# $
newDD$ '
ReportePedidosDD( 6
{EE 
idFF 
=FF  
usFF! #
.FF# $
IdFF$ &
,FF& '
detalleGG #
=GG$ %
usGG& (
.GG( )
DetalleGG) 0
,GG0 1
usuarioRegistroHH +
=HH, -
usHH. 0
.HH0 1
UsuarioRegistroHH1 @
,HH@ A#
usuarioRegistroCompletoII 3
=II4 5
usII6 8
.II8 9#
UsuarioRegistroCompletoII9 P
,IIP Q
fechaReclamoJJ (
=JJ) *
usJJ+ -
.JJ- .
FechaReclamoJJ. :
,JJ: ;
tipoReclamoKK '
=KK( )
usKK* ,
.KK, -
TipoReclamoKK- 8
,KK8 9
pedidoLL "
=LL# $
usLL% '
.LL' (
PedidoLL( .
,LL. /
clienteMM #
=MM$ %
usMM& (
.MM( )
ClienteMM) 0
,MM0 1
	respuestaNN %
=NN& '
usNN( *
.NN* +
	RespuestaNN+ 4
,NN4 5
usuarioRespuestaOO ,
=OO- .
usOO/ 1
.OO1 2
UsuarioRespuestaOO2 B
,OOB C$
usuarioRespuestaCompletoPP 4
=PP5 6
usPP7 9
.PP9 :$
UsuarioRespuestaCompletoPP: R
,PPR S
fechaRespuestaQQ *
=QQ+ ,
usQQ- /
.QQ/ 0
FechaRespuestaQQ0 >
}RR 
)RR 
;RR 
}SS 
}UU 
}VV 
catchWW 
(WW 
	ExceptionWW 
)WW 
{XX 
reporteYY 
=YY 
newYY 
ListYY "
<YY" #
ReportePedidosYY# 1
>YY1 2
(YY2 3
)YY3 4
;YY4 5
}ZZ 
return\\ 
Task\\ 
.\\ 

FromResult\\ "
(\\" #
reporte\\# *
)\\* +
;\\+ ,
}]] 	
public__ 
Task__ 
<__ 
List__ 
<__ 
ReporteStock__ %
>__% &
>__& '
GetReporteStock__( 7
(__7 8
FiltroReporte__8 E
filtro__F L
)__L M
{`` 	
Listaa 
<aa 
ReporteStockaa 
>aa 
reporteaa &
=aa' (
newaa) ,
Listaa- 1
<aa1 2
ReporteStockaa2 >
>aa> ?
(aa? @
)aa@ A
;aaA B
trybb 
{cc 
vardd 
resultdd 
=dd 
_contextdd %
.dd% &"
dbo_GetReporteReclamosdd& <
.dd< =

FromSqlRawdd= G
(ddG H
$strddH s
,dds t
filtroddu {
.dd{ |
	fecInicio	dd| Ö
,
ddÖ Ü
filtro
ddá ç
.
ddç é
fecFin
ddé î
,
ddî ï
filtro
ddñ ú
.
ddú ù
idPedido
ddù •
)
dd• ¶
.
dd¶ ß
ToList
ddß ≠
(
dd≠ Æ
)
ddÆ Ø
;
ddØ ∞
ifgg 
(gg 
resultgg 
!=gg 
nullgg "
)gg" #
{hh 
foreachii 
(ii 
varii  
usii! #
inii$ &
resultii' -
)ii- .
{jj 
reportekk 
.kk  
Addkk  #
(kk# $
newkk$ '
ReporteStockkk( 4
{ll 
idmm 
=mm  
usmm! #
.mm# $
Idmm$ &
,mm& '
detallenn #
=nn$ %
usnn& (
.nn( )
Detallenn) 0
,nn0 1
usuarioRegistrooo +
=oo, -
usoo. 0
.oo0 1
UsuarioRegistrooo1 @
,oo@ A#
usuarioRegistroCompletopp 3
=pp4 5
uspp6 8
.pp8 9#
UsuarioRegistroCompletopp9 P
,ppP Q
fechaReclamoqq (
=qq) *
usqq+ -
.qq- .
FechaReclamoqq. :
,qq: ;
tipoReclamorr '
=rr( )
usrr* ,
.rr, -
TipoReclamorr- 8
,rr8 9
pedidoss "
=ss# $
usss% '
.ss' (
Pedidoss( .
,ss. /
clientett #
=tt$ %
ustt& (
.tt( )
Clientett) 0
,tt0 1
	respuestauu %
=uu& '
usuu( *
.uu* +
	Respuestauu+ 4
,uu4 5
usuarioRespuestavv ,
=vv- .
usvv/ 1
.vv1 2
UsuarioRespuestavv2 B
,vvB C$
usuarioRespuestaCompletoww 4
=ww5 6
usww7 9
.ww9 :$
UsuarioRespuestaCompletoww: R
,wwR S
fechaRespuestaxx *
=xx+ ,
usxx- /
.xx/ 0
FechaRespuestaxx0 >
}yy 
)yy 
;yy 
}zz 
}|| 
}}} 
catch~~ 
(~~ 
	Exception~~ 
)~~ 
{ 
reporte
ÄÄ 
=
ÄÄ 
new
ÄÄ 
List
ÄÄ "
<
ÄÄ" #
ReporteStock
ÄÄ# /
>
ÄÄ/ 0
(
ÄÄ0 1
)
ÄÄ1 2
;
ÄÄ2 3
}
ÅÅ 
return
ÉÉ 
Task
ÉÉ 
.
ÉÉ 

FromResult
ÉÉ "
(
ÉÉ" #
reporte
ÉÉ# *
)
ÉÉ* +
;
ÉÉ+ ,
}
ÑÑ 	
public
ÜÜ 
Task
ÜÜ 
<
ÜÜ 
List
ÜÜ 
<
ÜÜ 
ReporteReclamos
ÜÜ (
>
ÜÜ( )
>
ÜÜ) * 
GetReporteReclamos
ÜÜ+ =
(
ÜÜ= >
FiltroReporte
ÜÜ> K
filtro
ÜÜL R
)
ÜÜR S
{
áá 	
List
àà 
<
àà 
ReporteReclamos
àà  
>
àà  !
reporte
àà" )
=
àà* +
new
àà, /
List
àà0 4
<
àà4 5
ReporteReclamos
àà5 D
>
ààD E
(
ààE F
)
ààF G
;
ààG H
try
ââ 
{
ää 
var
ãã 
result
ãã 
=
ãã 
_context
ãã %
.
ãã% &$
dbo_GetReporteReclamos
ãã& <
.
ãã< =

FromSqlRaw
ãã= G
(
ããG H
$str
ããH s
,
ããs t
filtro
ããu {
.
ãã{ |
	fecInicioãã| Ö
,ããÖ Ü
filtroããá ç
.ããç é
fecFinããé î
,ããî ï
filtroããñ ú
.ããú ù
idPedidoããù •
)ãã• ¶
.ãã¶ ß
ToListããß ≠
(ãã≠ Æ
)ããÆ Ø
;ããØ ∞
if
éé 
(
éé 
result
éé 
!=
éé 
null
éé "
)
éé" #
{
èè 
foreach
êê 
(
êê 
var
êê  
us
êê! #
in
êê$ &
result
êê' -
)
êê- .
{
ëë 
reporte
íí 
.
íí  
Add
íí  #
(
íí# $
new
íí$ '
ReporteReclamos
íí( 7
{
ìì 
id
îî 
=
îî  
us
îî! #
.
îî# $
Id
îî$ &
,
îî& '
detalle
ïï #
=
ïï$ %
us
ïï& (
.
ïï( )
Detalle
ïï) 0
,
ïï0 1
usuarioRegistro
ññ +
=
ññ, -
us
ññ. 0
.
ññ0 1
UsuarioRegistro
ññ1 @
,
ññ@ A%
usuarioRegistroCompleto
óó 3
=
óó4 5
us
óó6 8
.
óó8 9%
UsuarioRegistroCompleto
óó9 P
,
óóP Q
fechaReclamo
òò (
=
òò) *
us
òò+ -
.
òò- .
FechaReclamo
òò. :
,
òò: ;
tipoReclamo
ôô '
=
ôô( )
us
ôô* ,
.
ôô, -
TipoReclamo
ôô- 8
,
ôô8 9
pedido
öö "
=
öö# $
us
öö% '
.
öö' (
Pedido
öö( .
,
öö. /
cliente
õõ #
=
õõ$ %
us
õõ& (
.
õõ( )
Cliente
õõ) 0
,
õõ0 1
	respuesta
úú %
=
úú& '
us
úú( *
.
úú* +
	Respuesta
úú+ 4
,
úú4 5
usuarioRespuesta
ùù ,
=
ùù- .
us
ùù/ 1
.
ùù1 2
UsuarioRespuesta
ùù2 B
,
ùùB C&
usuarioRespuestaCompleto
ûû 4
=
ûû5 6
us
ûû7 9
.
ûû9 :&
UsuarioRespuestaCompleto
ûû: R
,
ûûR S
fechaRespuesta
üü *
=
üü+ ,
us
üü- /
.
üü/ 0
FechaRespuesta
üü0 >
}
†† 
)
†† 
;
†† 
}
°° 
}
££ 
}
§§ 
catch
•• 
(
•• 
	Exception
•• 
)
•• 
{
¶¶ 
reporte
ßß 
=
ßß 
new
ßß 
List
ßß "
<
ßß" #
ReporteReclamos
ßß# 2
>
ßß2 3
(
ßß3 4
)
ßß4 5
;
ßß5 6
}
®® 
return
™™ 
Task
™™ 
.
™™ 

FromResult
™™ "
(
™™" #
reporte
™™# *
)
™™* +
;
™™+ ,
}
´´ 	
public
≠≠ 
Task
≠≠ 
<
≠≠ 
List
≠≠ 
<
≠≠ 
ReporteDelivery
≠≠ (
>
≠≠( )
>
≠≠) * 
GetReporteDelivery
≠≠+ =
(
≠≠= >
FiltroReporte
≠≠> K
filtro
≠≠L R
)
≠≠R S
{
ÆÆ 	
List
ØØ 
<
ØØ 
ReporteDelivery
ØØ  
>
ØØ  !
reporte
ØØ" )
=
ØØ* +
new
ØØ, /
List
ØØ0 4
<
ØØ4 5
ReporteDelivery
ØØ5 D
>
ØØD E
(
ØØE F
)
ØØF G
;
ØØG H
try
∞∞ 
{
±± 
var
≤≤ 
result
≤≤ 
=
≤≤ 
_context
≤≤ %
.
≤≤% &$
dbo_GetReporteReclamos
≤≤& <
.
≤≤< =

FromSqlRaw
≤≤= G
(
≤≤G H
$str
≤≤H s
,
≤≤s t
filtro
≤≤u {
.
≤≤{ |
	fecInicio≤≤| Ö
,≤≤Ö Ü
filtro≤≤á ç
.≤≤ç é
fecFin≤≤é î
,≤≤î ï
filtro≤≤ñ ú
.≤≤ú ù
idPedido≤≤ù •
)≤≤• ¶
.≤≤¶ ß
ToList≤≤ß ≠
(≤≤≠ Æ
)≤≤Æ Ø
;≤≤Ø ∞
if
µµ 
(
µµ 
result
µµ 
!=
µµ 
null
µµ "
)
µµ" #
{
∂∂ 
foreach
∑∑ 
(
∑∑ 
var
∑∑  
us
∑∑! #
in
∑∑$ &
result
∑∑' -
)
∑∑- .
{
∏∏ 
reporte
ππ 
.
ππ  
Add
ππ  #
(
ππ# $
new
ππ$ '
ReporteDelivery
ππ( 7
{
∫∫ 
id
ªª 
=
ªª  
us
ªª! #
.
ªª# $
Id
ªª$ &
,
ªª& '
detalle
ºº #
=
ºº$ %
us
ºº& (
.
ºº( )
Detalle
ºº) 0
,
ºº0 1
usuarioRegistro
ΩΩ +
=
ΩΩ, -
us
ΩΩ. 0
.
ΩΩ0 1
UsuarioRegistro
ΩΩ1 @
,
ΩΩ@ A%
usuarioRegistroCompleto
ææ 3
=
ææ4 5
us
ææ6 8
.
ææ8 9%
UsuarioRegistroCompleto
ææ9 P
,
ææP Q
fechaReclamo
øø (
=
øø) *
us
øø+ -
.
øø- .
FechaReclamo
øø. :
,
øø: ;
tipoReclamo
¿¿ '
=
¿¿( )
us
¿¿* ,
.
¿¿, -
TipoReclamo
¿¿- 8
,
¿¿8 9
pedido
¡¡ "
=
¡¡# $
us
¡¡% '
.
¡¡' (
Pedido
¡¡( .
,
¡¡. /
cliente
¬¬ #
=
¬¬$ %
us
¬¬& (
.
¬¬( )
Cliente
¬¬) 0
,
¬¬0 1
	respuesta
√√ %
=
√√& '
us
√√( *
.
√√* +
	Respuesta
√√+ 4
,
√√4 5
usuarioRespuesta
ƒƒ ,
=
ƒƒ- .
us
ƒƒ/ 1
.
ƒƒ1 2
UsuarioRespuesta
ƒƒ2 B
,
ƒƒB C&
usuarioRespuestaCompleto
≈≈ 4
=
≈≈5 6
us
≈≈7 9
.
≈≈9 :&
UsuarioRespuestaCompleto
≈≈: R
,
≈≈R S
fechaRespuesta
∆∆ *
=
∆∆+ ,
us
∆∆- /
.
∆∆/ 0
FechaRespuesta
∆∆0 >
}
«« 
)
«« 
;
«« 
}
»» 
}
   
}
ÀÀ 
catch
ÃÃ 
(
ÃÃ 
	Exception
ÃÃ 
)
ÃÃ 
{
ÕÕ 
reporte
ŒŒ 
=
ŒŒ 
new
ŒŒ 
List
ŒŒ "
<
ŒŒ" #
ReporteDelivery
ŒŒ# 2
>
ŒŒ2 3
(
ŒŒ3 4
)
ŒŒ4 5
;
ŒŒ5 6
}
œœ 
return
—— 
Task
—— 
.
—— 

FromResult
—— "
(
——" #
reporte
——# *
)
——* +
;
——+ ,
}
““ 	
}
‘‘ 
}’’ ä
[D:\Proyectos\NetCore\UPC_PI2_Backend\PremierBeef.Infrastructure\Repository\RolRepository.cs
	namespace 	
PremierBeef
 
. 
Infrastructure $
.$ %

Repository% /
{ 
public 

class 
RolRepository 
:  
IRolRepository! /
{		 
private

 
readonly

 
PremierContext

 '
_context

( 0
;

0 1
public 
RolRepository 
( 
PremierContext +
context, 3
)3 4
{ 	
_context 
= 
context 
; 
} 	
public 
async 
Task 
< 
List 
< 
Rol "
>" #
># $
GetRoles% -
(- .
). /
{ 	
List 
< 
Rol 
> 
roles 
= 
new !
List" &
<& '
Rol' *
>* +
(+ ,
), -
;- .
try 
{ 
var 
result 
= 
await "
Task# '
.' (
Run( +
(+ ,
(, -
)- .
=>/ 1
_context2 :
.: ;
roles; @
.@ A
WhereA F
(F G
xG H
=>I K
xL M
.M N
EstadoN T
)T U
.U V
ToListAsyncV a
(a b
)b c
)c d
;d e
foreach 
( 
var 
us 
in  "
result# )
)) *
{ 
roles 
. 
Add 
( 
new !
Rol" %
{ 
id 
= 
us 
.  
Id  "
," #
nombre 
=  
us! #
.# $
Nombre$ *
,* +
descripcion #
=$ %
us& (
.( )
Descripcion) 4
,4 5
estado   
=    
us  ! #
.  # $
Estado  $ *
}!! 
)!! 
;!! 
}"" 
}## 
catch$$ 
($$ 
	Exception$$ 
)$$ 
{%% 
}'' 
return** 
roles** 
;** 
}++ 	
},, 
}-- Ï
eD:\Proyectos\NetCore\UPC_PI2_Backend\PremierBeef.Infrastructure\Repository\TipoDocumentoRepository.cs
	namespace 	
PremierBeef
 
. 
Infrastructure $
.$ %

Repository% /
{ 
public 

class #
TipoDocumentoRepository (
:) *$
ITipoDocumentoRepository+ C
{		 
private

 
readonly

 
PremierContext

 '
_context

( 0
;

0 1
public #
TipoDocumentoRepository &
(& '
PremierContext' 5
context6 =
)= >
{ 	
_context 
= 
context 
; 
} 	
public 
async 
Task 
< 
List 
< 
TipoDocumento ,
>, -
>- .
GetTipoDocumentos/ @
(@ A
)A B
{ 	
List 
< 
TipoDocumento 
> 
tipos  %
=& '
new( +
List, 0
<0 1
TipoDocumento1 >
>> ?
(? @
)@ A
;A B
try 
{ 
var 
result 
= 
await "
Task# '
.' (
Run( +
(+ ,
(, -
)- .
=>/ 1
_context2 :
.: ;
tipoDocumentos; I
.I J
WhereJ O
(O P
xP Q
=>R T
xU V
.V W
EstadoW ]
)] ^
.^ _
ToListAsync_ j
(j k
)k l
)l m
;m n
foreach 
( 
var 
us 
in  "
result# )
)) *
{ 
tipos 
. 
Add 
( 
new !
TipoDocumento" /
{ 
id 
= 
us 
.  
Id  "
," #
nombre 
=  
us! #
.# $
Nombre$ *
,* +
descripcion #
=$ %
us& (
.( )
Descripcion) 4
,4 5
estado   
=    
us  ! #
.  # $
Estado  $ *
}!! 
)!! 
;!! 
}"" 
}## 
catch$$ 
($$ 
	Exception$$ 
)$$ 
{%% 
}'' 
return)) 
tipos)) 
;)) 
}** 	
}++ 
},, ¶¶
_D:\Proyectos\NetCore\UPC_PI2_Backend\PremierBeef.Infrastructure\Repository\UsuarioRepository.cs
	namespace 	
PremierBeef
 
. 
Infrastructure $
.$ %

Repository% /
{ 
public		 

class		 
UsuarioRepository		 "
:		# $
IUsuarioRepository		% 7
{

 
private 
readonly 
PremierContext '
_context( 0
;0 1
public 
UsuarioRepository  
(  !
PremierContext! /
context0 7
)7 8
{ 	
_context 
= 
context 
; 
} 	
public 
Task 
< 
int 
> 

AddUsuario #
(# $
Usuario$ +
us, .
). /
{ 	
int 
newId 
= 
$num 
; 

tb_usuario 
tb_user 
=  
new! $

tb_usuario% /
{ 
Usuario 
= 
us 
. 
usuario $
,$ %
Clave 
= 
us 
. 
clave  
,  !
Correo 
= 
us 
. 
correo "
," #
Nombre 
= 
us 
. 
nombre "
," #

ApePaterno 
= 
us 
.  

apePaterno  *
,* +

ApeMaterno 
= 
us 
.  

apeMaterno  *
,* +
Telefono 
= 
us 
. 
telefono &
,& '
IdRol 
= 
us 
. 
idRol  
,  !
FecRegistro 
= 
us  
.  !
fecRegistro! ,
,, -
FecModificacion   
=    !
us  " $
.  $ %
fecModificacion  % 4
}!! 
;!! 
try## 
{$$ 
_context%% 
.%% 
usuarios%% !
.%%! "
Add%%" %
(%%% &
tb_user%%& -
)%%- .
;%%. /
_context&& 
.&& 
SaveChanges&& $
(&&$ %
)&&% &
;&&& '
newId(( 
=(( 
tb_user(( 
.((  
Id((  "
;((" #
})) 
catch** 
(** 
	Exception** 
)** 
{++ 
tb_user,, 
.,, 
Id,, 
=,, 
$num,, 
;,, 
}-- 
return// 
Task// 
.// 

FromResult// "
(//" #
newId//# (
)//( )
;//) *
}00 	
public22 
Task22 
<22 
bool22 
>22 
UpdateUsuario22 '
(22' (
Usuario22( /
us220 2
)222 3
{33 	
bool44 
result44 
=44 
false44 
;44  

tb_usuario55 
updUser55 
=55  
new55! $

tb_usuario55% /
{66 
Id77 
=77 
us77 
.77 
id77 
,77 
Usuario88 
=88 
us88 
.88 
usuario88 $
,88$ %
Clave99 
=99 
us99 
.99 
clave99  
,99  !
Correo:: 
=:: 
us:: 
.:: 
correo:: "
,::" #
Nombre;; 
=;; 
us;; 
.;; 
nombre;; "
,;;" #

ApePaterno<< 
=<< 
us<< 
.<<  

apePaterno<<  *
,<<* +

ApeMaterno== 
=== 
us== 
.==  

apeMaterno==  *
,==* +
Telefono>> 
=>> 
us>> 
.>> 
telefono>> &
,>>& '
IdRol?? 
=?? 
us?? 
.?? 
idRol??  
,??  !
FecModificacion@@ 
=@@  !
DateTime@@" *
.@@* +
Now@@+ .
}AA 
;AA 
tryCC 
{DD 
_contextJJ 
.JJ 
usuariosJJ !
.JJ! "
AttachJJ" (
(JJ( )
updUserJJ) 0
)JJ0 1
;JJ1 2
_contextKK 
.KK 
EntryKK 
(KK 
updUserKK &
)KK& '
.KK' (
StateKK( -
=KK. /
EntityStateKK0 ;
.KK; <
ModifiedKK< D
;KKD E
_contextLL 
.LL 
EntryLL 
(LL 
updUserLL &
)LL& '
.LL' (
PropertyLL( 0
(LL0 1
xLL1 2
=>LL3 5
xLL6 7
.LL7 8
IdLL8 :
)LL: ;
.LL; <

IsModifiedLL< F
=LLG H
falseLLI N
;LLN O
_contextMM 
.MM 
EntryMM 
(MM 
updUserMM &
)MM& '
.MM' (
PropertyMM( 0
(MM0 1
XMM1 2
=>MM3 5
XMM6 7
.MM7 8
FecRegistroMM8 C
)MMC D
.MMD E

IsModifiedMME O
=MMP Q
falseMMR W
;MMW X
_contextOO 
.OO 
EntryOO 
(OO 
updUserOO &
)OO& '
.OO' (
StateOO( -
=OO. /
EntityStateOO0 ;
.OO; <
DetachedOO< D
;OOD E
_contextQQ 
.QQ 
usuariosQQ !
.QQ! "
UpdateQQ" (
(QQ( )
updUserQQ) 0
)QQ0 1
;QQ1 2
_contextSS 
.SS 
SaveChangesSS $
(SS$ %
)SS% &
;SS& '
resultUU 
=UU 
trueUU 
;UU 
}VV 
catchWW 
(WW 
	ExceptionWW 
)WW 
{XX 
resultYY 
=YY 
falseYY 
;YY 
}ZZ 
return]] 
Task]] 
.]] 

FromResult]] "
(]]" #
result]]# )
)]]) *
;]]* +
}^^ 	
public`` 
Task`` 
<`` 
bool`` 
>`` 
RemoveUsuario`` '
(``' (
int``( +
id``, .
)``. /
{aa 	
varbb 
usuariobb 
=bb 
_contextbb "
.bb" #
usuariosbb# +
.bb+ ,
Findbb, 0
(bb0 1
idbb1 3
)bb3 4
;bb4 5
ifcc 
(cc 
usuariocc 
==cc 
nullcc 
)cc  
{dd 
returnee 
Taskee 
.ee 

FromResultee &
(ee& '
trueee' +
)ee+ ,
;ee, -
}ff 
_contexthh 
.hh 
usuarioshh 
.hh 
Removehh $
(hh$ %
usuariohh% ,
)hh, -
;hh- .
_contextii 
.ii 
SaveChangesii  
(ii  !
)ii! "
;ii" #
returnkk 
Taskkk 
.kk 

FromResultkk "
(kk" #
falsekk# (
)kk( )
;kk) *
}ll 	
publicnn 
Tasknn 
<nn 
Usuarionn 
>nn 
GetUsuarioByIdnn +
(nn+ ,
intnn, /
idnn0 2
)nn2 3
{oo 	
varpp 
uspp 
=pp 
_contextpp 
.pp 
usuariospp &
.pp& '
Findpp' +
(pp+ ,
idpp, .
)pp. /
;pp/ 0
ifrr 
(rr 
usrr 
!=rr 
nullrr 
)rr 
{ss 
Usuariott 
tb_usertt 
=tt  !
newtt" %
Usuariott& -
{uu 
idvv 
=vv 
usvv 
.vv 
Idvv 
,vv 
usuarioww 
=ww 
usww  
.ww  !
Usuarioww! (
,ww( )
clavexx 
=xx 
usxx 
.xx 
Clavexx $
,xx$ %
correoyy 
=yy 
usyy 
.yy  
Correoyy  &
,yy& '
nombrezz 
=zz 
uszz 
.zz  
Nombrezz  &
,zz& '

apePaterno{{ 
={{  
us{{! #
.{{# $

ApePaterno{{$ .
,{{. /

apeMaterno|| 
=||  
us||! #
.||# $

ApeMaterno||$ .
,||. /
telefono}} 
=}} 
us}} !
.}}! "
Telefono}}" *
,}}* +
idRol~~ 
=~~ 
us~~ 
.~~ 
IdRol~~ $
,~~$ %
fecRegistro 
=  !
us" $
.$ %
FecRegistro% 0
,0 1
fecModificacion
ÄÄ #
=
ÄÄ$ %
us
ÄÄ& (
.
ÄÄ( )
FecModificacion
ÄÄ) 8
}
ÅÅ 
;
ÅÅ 
_context
ÉÉ 
.
ÉÉ 
Entry
ÉÉ 
(
ÉÉ 
us
ÉÉ !
)
ÉÉ! "
.
ÉÉ" #
State
ÉÉ# (
=
ÉÉ) *
EntityState
ÉÉ+ 6
.
ÉÉ6 7
Detached
ÉÉ7 ?
;
ÉÉ? @
return
ÖÖ 
Task
ÖÖ 
.
ÖÖ 

FromResult
ÖÖ &
(
ÖÖ& '
tb_user
ÖÖ' .
)
ÖÖ. /
;
ÖÖ/ 0
}
ÜÜ 
else
áá 
return
àà 
Task
àà 
.
àà 

FromResult
àà &
<
àà& '
Usuario
àà' .
>
àà. /
(
àà/ 0
null
àà0 4
)
àà4 5
;
àà5 6
}
ââ 	
public
ãã 
Task
ãã 
<
ãã 
Usuario
ãã 
>
ãã !
GetUsuarioByUsuario
ãã 0
(
ãã0 1
string
ãã1 7
usuario
ãã8 ?
)
ãã? @
{
åå 	
try
çç 
{
éé 
var
èè 
us
èè 
=
èè 
_context
èè !
.
èè! "
usuarios
èè" *
.
èè* +
Where
èè+ 0
(
èè0 1
x
èè1 2
=>
èè3 5
x
èè6 7
.
èè7 8
Usuario
èè8 ?
.
èè? @
Trim
èè@ D
(
èèD E
)
èèE F
.
èèF G
ToLower
èèG N
(
èèN O
)
èèO P
.
èèP Q
Equals
èèQ W
(
èèW X
usuario
èèX _
.
èè_ `
ToLower
èè` g
(
èèg h
)
èèh i
)
èèi j
)
èèj k
.
èèk l
FirstOrDefault
èèl z
(
èèz {
)
èè{ |
;
èè| }
if
ëë 
(
ëë 
us
ëë 
!=
ëë 
null
ëë 
)
ëë 
{
íí 
Usuario
ìì 
tb_user
ìì #
=
ìì$ %
new
ìì& )
Usuario
ìì* 1
{
îî 
id
ïï 
=
ïï 
us
ïï 
.
ïï  
Id
ïï  "
,
ïï" #
usuario
ññ 
=
ññ  !
us
ññ" $
.
ññ$ %
Usuario
ññ% ,
,
ññ, -
clave
óó 
=
óó 
us
óó  "
.
óó" #
Clave
óó# (
,
óó( )
nombre
òò 
=
òò  
us
òò! #
.
òò# $
Nombre
òò$ *
,
òò* +

apePaterno
ôô "
=
ôô# $
us
ôô% '
.
ôô' (

ApePaterno
ôô( 2
,
ôô2 3

apeMaterno
öö "
=
öö# $
us
öö% '
.
öö' (

ApeMaterno
öö( 2
,
öö2 3
correo
õõ 
=
õõ  
us
õõ! #
.
õõ# $
Correo
õõ$ *
,
õõ* +
telefono
úú  
=
úú! "
us
úú# %
.
úú% &
Telefono
úú& .
,
úú. /
idRol
ùù 
=
ùù 
us
ùù  "
.
ùù" #
IdRol
ùù# (
,
ùù( )
fecRegistro
ûû #
=
ûû$ %
us
ûû& (
.
ûû( )
FecRegistro
ûû) 4
,
ûû4 5
fecModificacion
üü '
=
üü( )
us
üü* ,
.
üü, -
FecModificacion
üü- <
}
†† 
;
†† 
return
¢¢ 
Task
¢¢ 
.
¢¢  

FromResult
¢¢  *
(
¢¢* +
tb_user
¢¢+ 2
)
¢¢2 3
;
¢¢3 4
}
££ 
}
•• 
catch
¶¶ 
(
¶¶ 
	Exception
¶¶ 
)
¶¶ 
{
ßß 
throw
©© 
;
©© 
}
™™ 
return
¨¨ 
Task
¨¨ 
.
¨¨ 

FromResult
¨¨ "
<
¨¨" #
Usuario
¨¨# *
>
¨¨* +
(
¨¨+ ,
null
¨¨, 0
)
¨¨0 1
;
¨¨1 2
}
≠≠ 	
public
ØØ 
Task
ØØ 
<
ØØ 
Usuario
ØØ 
>
ØØ  
GetUsuarioByCorreo
ØØ /
(
ØØ/ 0
string
ØØ0 6
correo
ØØ7 =
)
ØØ= >
{
∞∞ 	
try
±± 
{
≤≤ 
var
≥≥ 
us
≥≥ 
=
≥≥ 
_context
≥≥ !
.
≥≥! "
usuarios
≥≥" *
.
≥≥* +
Where
≥≥+ 0
(
≥≥0 1
x
≥≥1 2
=>
≥≥3 5
x
≥≥6 7
.
≥≥7 8
Correo
≥≥8 >
.
≥≥> ?
Trim
≥≥? C
(
≥≥C D
)
≥≥D E
.
≥≥E F
ToLower
≥≥F M
(
≥≥M N
)
≥≥N O
.
≥≥O P
Equals
≥≥P V
(
≥≥V W
correo
≥≥W ]
.
≥≥] ^
ToLower
≥≥^ e
(
≥≥e f
)
≥≥f g
)
≥≥g h
)
≥≥h i
.
≥≥i j
FirstOrDefault
≥≥j x
(
≥≥x y
)
≥≥y z
;
≥≥z {
if
µµ 
(
µµ 
us
µµ 
!=
µµ 
null
µµ 
)
µµ 
{
∂∂ 
Usuario
∑∑ 
tb_user
∑∑ #
=
∑∑$ %
new
∑∑& )
Usuario
∑∑* 1
{
∏∏ 
id
ππ 
=
ππ 
us
ππ 
.
ππ  
Id
ππ  "
,
ππ" #
usuario
∫∫ 
=
∫∫  !
us
∫∫" $
.
∫∫$ %
Usuario
∫∫% ,
,
∫∫, -
clave
ªª 
=
ªª 
us
ªª  "
.
ªª" #
Clave
ªª# (
,
ªª( )
correo
ºº 
=
ºº  
us
ºº! #
.
ºº# $
Correo
ºº$ *
,
ºº* +
nombre
ΩΩ 
=
ΩΩ  
us
ΩΩ! #
.
ΩΩ# $
Nombre
ΩΩ$ *
,
ΩΩ* +

apePaterno
ææ "
=
ææ# $
us
ææ% '
.
ææ' (

ApePaterno
ææ( 2
,
ææ2 3

apeMaterno
øø "
=
øø# $
us
øø% '
.
øø' (

ApeMaterno
øø( 2
,
øø2 3
telefono
¿¿  
=
¿¿! "
us
¿¿# %
.
¿¿% &
Telefono
¿¿& .
,
¿¿. /
idRol
¡¡ 
=
¡¡ 
us
¡¡  "
.
¡¡" #
IdRol
¡¡# (
,
¡¡( )
fecRegistro
¬¬ #
=
¬¬$ %
us
¬¬& (
.
¬¬( )
FecRegistro
¬¬) 4
,
¬¬4 5
fecModificacion
√√ '
=
√√( )
us
√√* ,
.
√√, -
FecModificacion
√√- <
}
ƒƒ 
;
ƒƒ 
return
∆∆ 
Task
∆∆ 
.
∆∆  

FromResult
∆∆  *
(
∆∆* +
tb_user
∆∆+ 2
)
∆∆2 3
;
∆∆3 4
}
«« 
}
…… 
catch
   
(
   
	Exception
   
)
   
{
ÀÀ 
throw
ÕÕ 
;
ÕÕ 
}
ŒŒ 
return
–– 
Task
–– 
.
–– 

FromResult
–– "
<
––" #
Usuario
––# *
>
––* +
(
––+ ,
null
––, 0
)
––0 1
;
––1 2
}
—— 	
public
”” 
async
”” 
Task
”” 
<
”” 
List
”” 
<
”” 
Usuario
”” &
>
””& '
>
””' (
GetUsuarios
””) 4
(
””4 5
)
””5 6
{
‘‘ 	
List
’’ 
<
’’ 
Usuario
’’ 
>
’’ 
usuarios
’’ "
=
’’# $
new
’’% (
List
’’) -
<
’’- .
Usuario
’’. 5
>
’’5 6
(
’’6 7
)
’’7 8
;
’’8 9
try
◊◊ 
{
ÿÿ 
var
ŸŸ 
result
ŸŸ 
=
ŸŸ 
await
ŸŸ "
Task
ŸŸ# '
.
ŸŸ' (
Run
ŸŸ( +
(
ŸŸ+ ,
(
ŸŸ, -
)
ŸŸ- .
=>
ŸŸ/ 1
_context
ŸŸ2 :
.
ŸŸ: ;
usuarios
ŸŸ; C
.
ŸŸC D
ToListAsync
ŸŸD O
(
ŸŸO P
)
ŸŸP Q
)
ŸŸQ R
;
ŸŸR S
foreach
€€ 
(
€€ 
var
€€ 
us
€€ 
in
€€  "
result
€€# )
)
€€) *
{
‹‹ 
usuarios
›› 
.
›› 
Add
››  
(
››  !
new
››! $
Usuario
››% ,
{
ﬁﬁ 
id
ﬂﬂ 
=
ﬂﬂ 
us
ﬂﬂ 
.
ﬂﬂ  
Id
ﬂﬂ  "
,
ﬂﬂ" #
usuario
‡‡ 
=
‡‡  !
us
‡‡" $
.
‡‡$ %
Usuario
‡‡% ,
,
‡‡, -
clave
·· 
=
·· 
us
··  "
.
··" #
Clave
··# (
,
··( )
correo
‚‚ 
=
‚‚  
us
‚‚! #
.
‚‚# $
Correo
‚‚$ *
,
‚‚* +
nombre
„„ 
=
„„  
us
„„! #
.
„„# $
Nombre
„„$ *
,
„„* +

apePaterno
‰‰ "
=
‰‰# $
us
‰‰% '
.
‰‰' (

ApePaterno
‰‰( 2
,
‰‰2 3

apeMaterno
ÂÂ "
=
ÂÂ# $
us
ÂÂ% '
.
ÂÂ' (

ApeMaterno
ÂÂ( 2
,
ÂÂ2 3
telefono
ÊÊ  
=
ÊÊ! "
us
ÊÊ# %
.
ÊÊ% &
Telefono
ÊÊ& .
,
ÊÊ. /
idRol
ÁÁ 
=
ÁÁ 
us
ÁÁ  "
.
ÁÁ" #
IdRol
ÁÁ# (
,
ÁÁ( )
fecRegistro
ËË #
=
ËË$ %
us
ËË& (
.
ËË( )
FecRegistro
ËË) 4
,
ËË4 5
fecModificacion
ÈÈ '
=
ÈÈ( )
us
ÈÈ* ,
.
ÈÈ, -
FecModificacion
ÈÈ- <
}
ÍÍ 
)
ÍÍ 
;
ÍÍ 
}
ÎÎ 
}
ÏÏ 
catch
ÌÌ 
(
ÌÌ 
	Exception
ÌÌ 
)
ÌÌ 
{
ÓÓ 
}
 
return
ÛÛ 
usuarios
ÛÛ 
;
ÛÛ 
}
ÙÙ 	
public
ˆˆ 
Task
ˆˆ 
<
ˆˆ 
bool
ˆˆ 
>
ˆˆ 
UpdateContrase√±a
ˆˆ *
(
ˆˆ* +
string
ˆˆ+ 1
correo
ˆˆ2 8
,
ˆˆ8 9
string
ˆˆ: @
nuevaContrase√±a
ˆˆA P
)
ˆˆP Q
{
˜˜ 	
bool
¯¯ 
result
¯¯ 
=
¯¯ 
false
¯¯ 
;
¯¯  
try
˘˘ 
{
˙˙ 
var
˚˚ 
usuario
˚˚ 
=
˚˚ 
_context
˚˚ &
.
˚˚& '
usuarios
˚˚' /
.
˚˚/ 0
Where
˚˚0 5
(
˚˚5 6
x
˚˚6 7
=>
˚˚8 :
x
˚˚; <
.
˚˚< =
Correo
˚˚= C
.
˚˚C D
Trim
˚˚D H
(
˚˚H I
)
˚˚I J
.
˚˚J K
ToLower
˚˚K R
(
˚˚R S
)
˚˚S T
.
˚˚T U
Equals
˚˚U [
(
˚˚[ \
correo
˚˚\ b
.
˚˚b c
ToLower
˚˚c j
(
˚˚j k
)
˚˚k l
)
˚˚l m
)
˚˚m n
.
˚˚n o
FirstOrDefault
˚˚o }
(
˚˚} ~
)
˚˚~ 
;˚˚ Ä
if
˝˝ 
(
˝˝ 
usuario
˝˝ 
!=
˝˝ 
null
˝˝ #
)
˝˝# $
{
˛˛ 
usuario
ˇˇ 
.
ˇˇ 
Clave
ˇˇ !
=
ˇˇ" #
nuevaContrase√±a
ˇˇ$ 3
.
ˇˇ3 4
Trim
ˇˇ4 8
(
ˇˇ8 9
)
ˇˇ9 :
;
ˇˇ: ;
usuario
ÄÄ 
.
ÄÄ 
FecModificacion
ÄÄ +
=
ÄÄ, -
DateTime
ÄÄ. 6
.
ÄÄ6 7
Now
ÄÄ7 :
;
ÄÄ: ;
_context
ÇÇ 
.
ÇÇ 
Update
ÇÇ #
(
ÇÇ# $
usuario
ÇÇ$ +
)
ÇÇ+ ,
;
ÇÇ, -
_context
ÉÉ 
.
ÉÉ 
SaveChanges
ÉÉ (
(
ÉÉ( )
)
ÉÉ) *
;
ÉÉ* +
result
ÖÖ 
=
ÖÖ 
true
ÖÖ !
;
ÖÖ! "
}
ÜÜ 
}
áá 
catch
àà 
(
àà 
	Exception
àà 
)
àà 
{
ââ 
result
ää 
=
ää 
false
ää 
;
ää 
}
ãã 
return
çç 
Task
çç 
.
çç 

FromResult
çç "
(
çç" #
result
çç# )
)
çç) *
;
çç* +
}
éé 	
}
êê 
}ëë 