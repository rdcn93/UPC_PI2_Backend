Ñ)
VD:\Proyectos\NetCore\UPC_PI2_Backend\PremierBeef.Infrastructure\Data\PremierContext.cs
	namespace 	
PremierBeef
 
. 
Infrastructure $
.$ %
Data% )
{ 
public 

class 
PremierContext 
:  !
	DbContext" +
{ 
public		 
PremierContext		 
(		 
)		 
{

 	
} 	
public 
PremierContext 
( 
DbContextOptions .
<. /
PremierContext/ =
>= >
options? F
)F G
:H I
baseJ N
(N O
optionsO V
)V W
{ 	
} 	
public 
DbSet 
< 

tb_usuario 
>  
usuarios! )
{* +
get, /
;/ 0
set1 4
;4 5
}6 7
public 
DbSet 
< 
tb_rol 
> 
roles "
{# $
get% (
;( )
set* -
;- .
}/ 0
public 
DbSet 
< 
tb_producto  
>  !
	productos" +
{, -
get. 1
;1 2
set3 6
;6 7
}8 9
public 
DbSet 
< !
tb_producto_categoria *
>* +

categorias, 6
{7 8
get9 <
;< =
set> A
;A B
}C D
public 
DbSet 
< 
tb_proveedor !
>! "
proveedores# .
{/ 0
get1 4
;4 5
set6 9
;9 :
}; <
public 
DbSet 
< 

tb_cliente 
>  
clientes! )
{* +
get, /
;/ 0
set1 4
;4 5
}6 7
public 
DbSet 
< 

tb_almacen 
>  
	almacenes! *
{+ ,
get- 0
;0 1
set2 5
;5 6
}7 8
public 
DbSet 
< 

tb_reclamo 
>  
reclamos! )
{* +
get, /
;/ 0
set1 4
;4 5
}6 7
public 
DbSet 
< 
tb_reclamo_tipo $
>$ %
reclamoTipos& 2
{3 4
get5 8
;8 9
set: =
;= >
}? @
public 
DbSet 
< 
tb_tipo_documento &
>& '
tipoDocumentos( 6
{7 8
get9 <
;< =
set> A
;A B
}C D
public 
DbSet 
< 
tb_promocion !
>! "
promociones# .
{/ 0
get1 4
;4 5
set6 9
;9 :
}; <
public 
virtual 
DbSet 
<  
tb_promocion_detalle 1
>1 2
promocionesDetalle3 E
{F G
getH K
;K L
setM P
;P Q
}R S
[   	
	NotMapped  	 
]   
public!! 
DbSet!! 
<!! "
dbo_GetReporteReclamos!! +
>!!+ ,"
dbo_GetReporteReclamos!!- C
{!!D E
get!!F I
;!!I J
set!!K N
;!!N O
}!!P Q
public"" 
DbSet"" 
<""  
dbo_GetReporteVentas"" )
>"") * 
dbo_GetReporteVentas""+ ?
{""@ A
get""B E
;""E F
set""G J
;""J K
}""L M
	protected%% 
override%% 
void%% 
OnModelCreating%%  /
(%%/ 0
ModelBuilder%%0 <
modelBuilder%%= I
)%%I J
{&& 	
modelBuilder(( 
.(( +
ApplyConfigurationsFromAssembly(( 8
(((8 9
typeof((9 ?
(((? @
PremierContext((@ N
)((N O
.((O P
Assembly((P X
)((X Y
;((Y Z
modelBuilder** 
.** 
Entity** 
<**   
tb_promocion_detalle**  4
>**4 5
(**5 6
)**6 7
.**7 8
HasKey**8 >
(**> ?
x**? @
=>**A C
new**D G
{**H I
x**J K
.**K L
IdPromocion**L W
,**W X
x**Y Z
.**Z [

IdProducto**[ e
}**f g
)**g h
;**h i
}00 	
	protected22 
override22 
void22 
OnConfiguring22  -
(22- .#
DbContextOptionsBuilder22. E
optionsBuilder22F T
)22T U
{33 	
base44 
.44 
OnConfiguring44 
(44 
optionsBuilder44 -
)44- .
;44. /
optionsBuilder66 
.66 &
EnableSensitiveDataLogging66 5
(665 6
)666 7
;667 8
}77 	
}88 
}99 ›
`D:\Proyectos\NetCore\UPC_PI2_Backend\PremierBeef.Infrastructure\Models\dbo_GetReporteReclamos.cs
	namespace 	
PremierBeef
 
. 
Infrastructure $
.$ %
Models% +
{ 
public 

class "
dbo_GetReporteReclamos '
{ 
public 
int 
Id 
{ 
get 
; 
set  
;  !
}" #
public 
string 
Detalle 
{ 
get  #
;# $
set% (
;( )
}* +
public 
string 
UsuarioRegistro %
{& '
get( +
;+ ,
set- 0
;0 1
}2 3
public 
string #
UsuarioRegistroCompleto -
{. /
get0 3
;3 4
set5 8
;8 9
}: ;
public		 
string		 
FechaReclamo		 "
{		# $
get		% (
;		( )
set		* -
;		- .
}		/ 0
public

 
string

 
TipoReclamo

 !
{

" #
get

$ '
;

' (
set

) ,
;

, -
}

. /
public 
int 
Pedido 
{ 
get 
;  
set! $
;$ %
}& '
public 
string 
Cliente 
{ 
get  #
;# $
set% (
;( )
}* +
public 
string 
	Respuesta 
{  !
get" %
;% &
set' *
;* +
}, -
public 
string 
UsuarioRespuesta &
{' (
get) ,
;, -
set. 1
;1 2
}3 4
public 
string $
UsuarioRespuestaCompleto .
{/ 0
get1 4
;4 5
set6 9
;9 :
}; <
public 
string 
FechaRespuesta $
{% &
get' *
;* +
set, /
;/ 0
}1 2
} 
} ö
^D:\Proyectos\NetCore\UPC_PI2_Backend\PremierBeef.Infrastructure\Models\dbo_GetReporteVentas.cs
	namespace 	
PremierBeef
 
. 
Infrastructure $
.$ %
Models% +
{ 
public		 

class		  
dbo_GetReporteVentas		 %
{

 
public 
int 
Id 
{ 
get 
; 
set  
;  !
}" #
public 
string 
Cliente 
{ 
get  #
;# $
set% (
;( )
}* +
public 
string 
Tipo_documento $
{% &
get' *
;* +
set, /
;/ 0
}1 2
public 
string 
	Documento 
{  !
get" %
;% &
set' *
;* +
}, -
public 
string 
Fecha_emision #
{$ %
get& )
;) *
set+ .
;. /
}0 1
public 
string 
Tipo_comprobante &
{' (
get) ,
;, -
set. 1
;1 2
}3 4
public 
string 
Serie_comprobante '
{( )
get* -
;- .
set/ 2
;2 3
}4 5
public 
decimal 
Importe_grabado &
{' (
get) ,
;, -
set. 1
;1 2
}3 4
public 
decimal 
Importe_igv "
{# $
get% (
;( )
set* -
;- .
}/ 0
public 
decimal 
Importe_total $
{% &
get' *
;* +
set, /
;/ 0
}1 2
} 
} ·
TD:\Proyectos\NetCore\UPC_PI2_Backend\PremierBeef.Infrastructure\Models\tb_almacen.cs
	namespace 	
PremierBeef
 
. 
Infrastructure $
.$ %
Models% +
{ 
[ 
Table 

(
 
$str 
) 
] 
public 

class 

tb_almacen 
{ 
[		 	
Key			 
]		 
[

 	
DatabaseGenerated

	 
(

 #
DatabaseGeneratedOption

 2
.

2 3
Identity

3 ;
)

; <
]

< =
public 
int 
Id 
{ 
get 
; 
set  
;  !
}" #
public 
string 
Nombre 
{ 
get "
;" #
set$ '
;' (
}) *
public 
string 
Descripcion !
{" #
get$ '
;' (
set) ,
;, -
}. /
public 
string 
	Direccion 
{  !
get" %
;% &
set' *
;* +
}, -
public 
string 
Telefono 
{  
get! $
;$ %
set& )
;) *
}+ ,
public 
bool 
Estado 
{ 
get  
;  !
set" %
;% &
}' (
public 
DateTime 
FecRegistro #
{$ %
get& )
;) *
set+ .
;. /
}0 1
public 
DateTime 
FecModificacion '
{( )
get* -
;- .
set/ 2
;2 3
}4 5
} 
} ‰
TD:\Proyectos\NetCore\UPC_PI2_Backend\PremierBeef.Infrastructure\Models\tb_cliente.cs
	namespace 	
PremierBeef
 
. 
Infrastructure $
.$ %
Models% +
{ 
[ 
Table 

(
 
$str 
) 
] 
public 

class 

tb_cliente 
{ 
[		 	
Key			 
]		 
[

 	
DatabaseGenerated

	 
(

 #
DatabaseGeneratedOption

 2
.

2 3
Identity

3 ;
)

; <
]

< =
public 
int 
Id 
{ 
get 
; 
set  
;  !
}" #
public 
string 
Nombre 
{ 
get "
;" #
set$ '
;' (
}) *
public 
string 

ApePaterno  
{! "
get# &
;& '
set( +
;+ ,
}- .
public 
string 

ApeMaterno  
{! "
get# &
;& '
set( +
;+ ,
}- .
public 
string 
Telefono 
{  
get! $
;$ %
set& )
;) *
}+ ,
public 
string 
	Direccion 
{  !
get" %
;% &
set' *
;* +
}, -
public 
int 
IdTipoDocumento "
{# $
get% (
;( )
set* -
;- .
}/ 0
public 
string 
NumeroDocumento %
{& '
get( +
;+ ,
set- 0
;0 1
}2 3
public 
bool 
EnviarPromociones %
{& '
get( +
;+ ,
set- 0
;0 1
}2 3
public 
bool 
Estado 
{ 
get  
;  !
set" %
;% &
}' (
public 
DateTime 
FecRegistro #
{$ %
get& )
;) *
set+ .
;. /
}0 1
public 
DateTime 
FecModificacion '
{( )
get* -
;- .
set/ 2
;2 3
}4 5
} 
} Ü
UD:\Proyectos\NetCore\UPC_PI2_Backend\PremierBeef.Infrastructure\Models\tb_producto.cs
	namespace 	
PremierBeef
 
. 
Infrastructure $
.$ %
Models% +
{ 
[ 
Table 

(
 
$str 
) 
] 
public 

class 
tb_producto 
{ 
[		 	
Key			 
]		 
[

 	
DatabaseGenerated

	 
(

 #
DatabaseGeneratedOption

 2
.

2 3
Identity

3 ;
)

; <
]

< =
public 
int 
Id 
{ 
get 
; 
set  
;  !
}" #
public 
string 
Nombre 
{ 
get "
;" #
set$ '
;' (
}) *
public 
string 
Descripcion !
{" #
get$ '
;' (
set) ,
;, -
}. /
public 
decimal 
Precio 
{ 
get  #
;# $
set% (
;( )
}* +
[ 	

ForeignKey	 
( 
$str "
)" #
]# $
public 
int 
IdCategoria 
{  
get! $
;$ %
set& )
;) *
}+ ,
[ 	

ForeignKey	 
( 
$str "
)" #
]# $
public 
int 
IdProveedor 
{  
get! $
;$ %
set& )
;) *
}+ ,
public 
DateTime 
FecRegistro #
{$ %
get& )
;) *
set+ .
;. /
}0 1
public 
DateTime 
FecModificacion '
{( )
get* -
;- .
set/ 2
;2 3
}4 5
public 
List 
< 
tb_promocion  
>  !
promociones" -
{. /
get0 3
;3 4
set5 8
;8 9
}: ;
} 
} ¯	
_D:\Proyectos\NetCore\UPC_PI2_Backend\PremierBeef.Infrastructure\Models\tb_producto_categoria.cs
	namespace 	
PremierBeef
 
. 
Infrastructure $
.$ %
Models% +
{ 
[ 
Table 

(
 
$str "
)" #
]# $
public 

class !
tb_producto_categoria &
{ 
[		 	
Key			 
]		 
[

 	
DatabaseGenerated

	 
(

 #
DatabaseGeneratedOption

 2
.

2 3
Identity

3 ;
)

; <
]

< =
public 
int 
Id 
{ 
get 
; 
set  
;  !
}" #
public 
string 
Nombre 
{ 
get "
;" #
set$ '
;' (
}) *
public 
string 
Descripcion !
{" #
get$ '
;' (
set) ,
;, -
}. /
public 
bool 
Estado 
{ 
get  
;  !
set" %
;% &
}' (
} 
} ·
VD:\Proyectos\NetCore\UPC_PI2_Backend\PremierBeef.Infrastructure\Models\tb_promocion.cs
	namespace 	
PremierBeef
 
. 
Infrastructure $
.$ %
Models% +
{ 
[ 
Table 

(
 
$str 
) 
] 
public 

class 
tb_promocion 
{		 
[

 	
Key

	 
]

 
[ 	
DatabaseGenerated	 
( #
DatabaseGeneratedOption 2
.2 3
Identity3 ;
); <
]< =
public 
int 
Id 
{ 
get 
; 
set  
;  !
}" #
public 
string 
Nombre 
{ 
get "
;" #
set$ '
;' (
}) *
public 
string 
Descripcion !
{" #
get$ '
;' (
set) ,
;, -
}. /
public 
DateTime 
	FecInicio !
{" #
get$ '
;' (
set) ,
;, -
}. /
public 
DateTime 
FecFin 
{  
get! $
;$ %
set& )
;) *
}+ ,
public 
decimal 
PorcentajeDescuento *
{+ ,
get- 0
;0 1
set2 5
;5 6
}7 8
public 
bool 
Estado 
{ 
get  
;  !
set" %
;% &
}' (
public 
DateTime 
FecRegistro #
{$ %
get& )
;) *
set+ .
;. /
}0 1
public 
DateTime 
FecModificacion '
{( )
get* -
;- .
set/ 2
;2 3
}4 5
public 
List 
< 
tb_producto 
>  
	productos! *
{+ ,
get- 0
;0 1
set2 5
;5 6
}7 8
} 
} ç
^D:\Proyectos\NetCore\UPC_PI2_Backend\PremierBeef.Infrastructure\Models\tb_promocion_detalle.cs
	namespace 	
PremierBeef
 
. 
Infrastructure $
.$ %
Models% +
{ 
[ 
Table 

(
 
$str !
)! "
]" #
public 

class  
tb_promocion_detalle %
{ 
public 
int 
IdPromocion 
{  
get! $
;$ %
set& )
;) *
}+ ,
public		 
int		 

IdProducto		 
{		 
get		  #
;		# $
set		% (
;		( )
}		* +
public

 
bool

 
Estado

 
{

 
get

  
;

  !
set

" %
;

% &
}

' (
} 
} ê
VD:\Proyectos\NetCore\UPC_PI2_Backend\PremierBeef.Infrastructure\Models\tb_proveedor.cs
	namespace 	
PremierBeef
 
. 
Infrastructure $
.$ %
Models% +
{ 
[ 
Table 

(
 
$str 
) 
] 
public 

class 
tb_proveedor 
{ 
[		 	
Key			 
]		 
[

 	
DatabaseGenerated

	 
(

 #
DatabaseGeneratedOption

 2
.

2 3
Identity

3 ;
)

; <
]

< =
public 
int 
Id 
{ 
get 
; 
set  
;  !
}" #
public 
string 
Nombre 
{ 
get "
;" #
set$ '
;' (
}) *
public 
string 
Descripcion !
{" #
get$ '
;' (
set) ,
;, -
}. /
public 
string 
	Direccion 
{  !
get" %
;% &
set' *
;* +
}, -
public 
string 
Telefono 
{  
get! $
;$ %
set& )
;) *
}+ ,
public 
int 
IdTipoDocumento "
{# $
get% (
;( )
set* -
;- .
}/ 0
public 
string 
NumeroDocumento %
{& '
get( +
;+ ,
set- 0
;0 1
}2 3
public 
DateTime 
FecRegistro #
{$ %
get& )
;) *
set+ .
;. /
}0 1
public 
DateTime 
FecModificacion '
{( )
get* -
;- .
set/ 2
;2 3
}4 5
} 
} ˚
TD:\Proyectos\NetCore\UPC_PI2_Backend\PremierBeef.Infrastructure\Models\tb_reclamo.cs
	namespace 	
PremierBeef
 
. 
Infrastructure $
.$ %
Models% +
{ 
[ 
Table 

(
 
$str 
) 
] 
public 

class 

tb_reclamo 
{ 
[		 	
Key			 
]		 
[

 	
DatabaseGenerated

	 
(

 #
DatabaseGeneratedOption

 2
.

2 3
Identity

3 ;
)

; <
]

< =
public 
int 
Id 
{ 
get 
; 
set  
;  !
}" #
public 
string 
Detalle 
{ 
get  #
;# $
set% (
;( )
}* +
public 
int 
	IdUsuario 
{ 
get "
;" #
set$ '
;' (
}) *
public 
int 
IdPedido 
{ 
get !
;! "
set# &
;& '
}( )
public 
int 
IdTipoReclamo  
{! "
get# &
;& '
set( +
;+ ,
}- .
public 
string 
	Respuesta 
{  !
get" %
;% &
set' *
;* +
}, -
public 
int 
IdUsuarioRespuesta %
{& '
get( +
;+ ,
set- 0
;0 1
}2 3
public 
DateTime 
FecRegistro #
{$ %
get& )
;) *
set+ .
;. /
}0 1
public 
DateTime 
FecModificacion '
{( )
get* -
;- .
set/ 2
;2 3
}4 5
public 
DateTime 

FecReclamo "
{# $
get% (
;( )
set* -
;- .
}/ 0
public 
DateTime 
FecRespuesta $
{% &
get' *
;* +
set, /
;/ 0
}1 2
public 
int 
EstadoReclamo  
{! "
get# &
;& '
set( +
;+ ,
}- .
public 
bool 
Estado 
{ 
get  
;  !
set" %
;% &
}' (
} 
} Ï	
YD:\Proyectos\NetCore\UPC_PI2_Backend\PremierBeef.Infrastructure\Models\tb_reclamo_tipo.cs
	namespace 	
PremierBeef
 
. 
Infrastructure $
.$ %
Models% +
{ 
[ 
Table 

(
 
$str 
) 
] 
public 

class 
tb_reclamo_tipo  
{ 
[		 	
Key			 
]		 
[

 	
DatabaseGenerated

	 
(

 #
DatabaseGeneratedOption

 2
.

2 3
Identity

3 ;
)

; <
]

< =
public 
int 
Id 
{ 
get 
; 
set  
;  !
}" #
public 
string 
Nombre 
{ 
get "
;" #
set$ '
;' (
}) *
public 
string 
Descripcion !
{" #
get$ '
;' (
set) ,
;, -
}. /
public 
bool 
Estado 
{ 
get  
;  !
set" %
;% &
}' (
} 
} ⁄	
PD:\Proyectos\NetCore\UPC_PI2_Backend\PremierBeef.Infrastructure\Models\tb_rol.cs
	namespace 	
PremierBeef
 
. 
Infrastructure $
.$ %
Models% +
{ 
[ 
Table 

(
 
$str 
) 
] 
public 

class 
tb_rol 
{ 
[		 	
Key			 
]		 
[

 	
DatabaseGenerated

	 
(

 #
DatabaseGeneratedOption

 2
.

2 3
Identity

3 ;
)

; <
]

< =
public 
int 
Id 
{ 
get 
; 
set  
;  !
}" #
public 
string 
Nombre 
{ 
get "
;" #
set$ '
;' (
}) *
public 
string 
Descripcion !
{" #
get$ '
;' (
set) ,
;, -
}. /
public 
bool 
Estado 
{ 
get  
;  !
set" %
;% &
}' (
} 
} ò
[D:\Proyectos\NetCore\UPC_PI2_Backend\PremierBeef.Infrastructure\Models\tb_tipo_documento.cs
	namespace 	
PremierBeef
 
. 
Infrastructure $
.$ %
Models% +
{ 
[ 
Table 

(
 
$str 
) 
]  
public 

class 
tb_tipo_documento "
{ 
[		 	
Key			 
]		 
[

 	
DatabaseGenerated

	 
(

 #
DatabaseGeneratedOption

 2
.

2 3
Identity

3 ;
)

; <
]

< =
public 
int 
Id 
{ 
get 
; 
set  
;  !
}" #
public 
string 
Nombre 
{ 
get "
;" #
set$ '
;' (
}) *
public 
string 
Descripcion !
{" #
get$ '
;' (
set) ,
;, -
}. /
public 
int #
LongitudNumeroDocumento *
{+ ,
get- 0
;0 1
set2 5
;5 6
}7 8
public 
bool 
Estado 
{ 
get  
;  !
set" %
;% &
}' (
} 
} ì
TD:\Proyectos\NetCore\UPC_PI2_Backend\PremierBeef.Infrastructure\Models\tb_usuario.cs
	namespace 	
PremierBeef
 
. 
Infrastructure $
.$ %
Models% +
{ 
[ 
Table 

(
 
$str 
) 
] 
public 

class 

tb_usuario 
{ 
[		 	
Key			 
]		 
[

 	
DatabaseGenerated

	 
(

 #
DatabaseGeneratedOption

 2
.

2 3
Identity

3 ;
)

; <
]

< =
public 
int 
Id 
{ 
get 
; 
set  
;  !
}" #
public 
string 
Usuario 
{ 
get  #
;# $
set% (
;( )
}* +
public 
string 
Clave 
{ 
get !
;! "
set# &
;& '
}( )
public 
string 
Correo 
{ 
get "
;" #
set$ '
;' (
}) *
public 
string 
Nombre 
{ 
get "
;" #
set$ '
;' (
}) *
public 
string 

ApePaterno  
{! "
get# &
;& '
set( +
;+ ,
}- .
public 
string 

ApeMaterno  
{! "
get# &
;& '
set( +
;+ ,
}- .
public 
string 
Telefono 
{  
get! $
;$ %
set& )
;) *
}+ ,
[ 	

ForeignKey	 
( 
$str 
) 
] 
public 
int 
IdRol 
{ 
get 
; 
set  #
;# $
}% &
public 
DateTime 
FecRegistro #
{$ %
get& )
;) *
set+ .
;. /
}0 1
public 
DateTime 
FecModificacion '
{( )
get* -
;- .
set/ 2
;2 3
}4 5
} 
} ∞s
_D:\Proyectos\NetCore\UPC_PI2_Backend\PremierBeef.Infrastructure\Repository\AlmacenRepository.cs
	namespace 	
PremierBeef
 
. 
Infrastructure $
.$ %

Repository% /
{ 
public		 

class		 
AlmacenRepository		 "
:		# $
IAlmacenRepository		% 7
{

 
private 
readonly 
PremierContext '
_context( 0
;0 1
public 
AlmacenRepository  
(  !
PremierContext! /
context0 7
)7 8
{ 	
_context 
= 
context 
; 
} 	
public 
Task 
< 
int 
> 

AddAlmacen #
(# $
Almacen$ +
us, .
). /
{ 	
int 
newId 
= 
$num 
; 

tb_almacen 
tb_cli 
= 
new  #

tb_almacen$ .
{ 
Nombre 
= 
us 
. 
nombre "
," #
Descripcion 
= 
us  
.  !
descripcion! ,
,, -
	Direccion 
= 
us 
. 
	direccion (
,( )
Telefono 
= 
us 
. 
telefono &
,& '
Estado 
= 
us 
. 
estado "
," #
FecRegistro 
= 
us  
.  !
fecRegistro! ,
,, -
FecModificacion 
=  !
us" $
.$ %
fecModificacion% 4
} 
; 
try   
{!! 
_context"" 
."" 
	almacenes"" "
.""" #
Add""# &
(""& '
tb_cli""' -
)""- .
;"". /
_context## 
.## 
SaveChanges## $
(##$ %
)##% &
;##& '
newId%% 
=%% 
tb_cli%% 
.%% 
Id%% !
;%%! "
}&& 
catch'' 
('' 
	Exception'' 
)'' 
{(( 
tb_cli)) 
.)) 
Id)) 
=)) 
$num)) 
;)) 
}** 
return,, 
Task,, 
.,, 

FromResult,, "
(,," #
newId,,# (
),,( )
;,,) *
}-- 	
public// 
Task// 
<// 
bool// 
>// 
UpdateAlmacen// '
(//' (
Almacen//( /
al//0 2
)//2 3
{00 	
bool11 
result11 
=11 
false11 
;11  
try33 
{44 
var55 
almacen55 
=55 
_context55 &
.55& '
	almacenes55' 0
.550 1
Find551 5
(555 6
al556 8
.558 9
id559 ;
)55; <
;55< =
if77 
(77 
almacen77 
!=77 
null77 #
)77# $
{88 
almacen99 
.99 
Nombre99 "
=99# $
al99% '
.99' (
nombre99( .
;99. /
almacen:: 
.:: 
Descripcion:: '
=::( )
al::* ,
.::, -
descripcion::- 8
;::8 9
almacen;; 
.;; 
	Direccion;; %
=;;& '
al;;( *
.;;* +
	direccion;;+ 4
;;;4 5
almacen<< 
.<< 
FecRegistro<< '
=<<( )
almacen<<* 1
.<<1 2
FecRegistro<<2 =
;<<= >
almacen== 
.== 
FecModificacion== +
===, -
DateTime==. 6
.==6 7
Now==7 :
;==: ;
almacen>> 
.>> 
Telefono>> $
=>>% &
al>>' )
.>>) *
telefono>>* 2
;>>2 3
almacen?? 
.?? 
Estado?? "
=??# $
true??% )
;??) *
_contextBB 
.BB 
	almacenesBB &
.BB& '
AttachBB' -
(BB- .
almacenBB. 5
)BB5 6
;BB6 7
_contextCC 
.CC 
EntryCC "
(CC" #
almacenCC# *
)CC* +
.CC+ ,
StateCC, 1
=CC2 3
EntityStateCC4 ?
.CC? @
ModifiedCC@ H
;CCH I
_contextDD 
.DD 
EntryDD "
(DD" #
almacenDD# *
)DD* +
.DD+ ,
PropertyDD, 4
(DD4 5
xDD5 6
=>DD7 9
xDD: ;
.DD; <
IdDD< >
)DD> ?
.DD? @

IsModifiedDD@ J
=DDK L
falseDDM R
;DDR S
_contextEE 
.EE 
EntryEE "
(EE" #
almacenEE# *
)EE* +
.EE+ ,
PropertyEE, 4
(EE4 5
XEE5 6
=>EE7 9
XEE: ;
.EE; <
FecRegistroEE< G
)EEG H
.EEH I

IsModifiedEEI S
=EET U
falseEEV [
;EE[ \
_contextGG 
.GG 
EntryGG "
(GG" #
almacenGG# *
)GG* +
.GG+ ,
StateGG, 1
=GG2 3
EntityStateGG4 ?
.GG? @
DetachedGG@ H
;GGH I
_contextII 
.II 
	almacenesII &
.II& '
UpdateII' -
(II- .
almacenII. 5
)II5 6
;II6 7
varKK 
sdsKK 
=KK 
_contextKK &
.KK& '
SaveChangesKK' 2
(KK2 3
)KK3 4
;KK4 5
resultMM 
=MM 
trueMM !
;MM! "
}NN 
}OO 
catchPP 
(PP 
	ExceptionPP 
)PP 
{QQ 
}SS 
returnUU 
TaskUU 
.UU 

FromResultUU "
(UU" #
resultUU# )
)UU) *
;UU* +
}VV 	
publicXX 
TaskXX 
<XX 
intXX 
>XX 
RemoveAlmacenXX &
(XX& '
intXX' *
idXX+ -
)XX- .
{YY 	
varZZ 
AlmacenZZ 
=ZZ 
_contextZZ "
.ZZ" #
	almacenesZZ# ,
.ZZ, -
FindZZ- 1
(ZZ1 2
idZZ2 4
)ZZ4 5
;ZZ5 6
if[[ 
([[ 
Almacen[[ 
==[[ 
null[[ 
)[[  
{\\ 
return]] 
Task]] 
.]] 

FromResult]] &
(]]& '
$num]]' (
)]]( )
;]]) *
}^^ 
_context`` 
.`` 
	almacenes`` 
.`` 
Remove`` %
(``% &
Almacen``& -
)``- .
;``. /
_contextaa 
.aa 
SaveChangesaa  
(aa  !
)aa! "
;aa" #
returncc 
Taskcc 
.cc 

FromResultcc "
(cc" #
$numcc# $
)cc$ %
;cc% &
}dd 	
publicff 
Taskff 
<ff 
Almacenff 
>ff 
GetAlmacenByIdff +
(ff+ ,
intff, /
idff0 2
)ff2 3
{gg 	
varhh 
ushh 
=hh 
_contexthh 
.hh 
	almaceneshh '
.hh' (
Findhh( ,
(hh, -
idhh- /
)hh/ 0
;hh0 1
ifjj 
(jj 
usjj 
!=jj 
nulljj 
)jj 
{kk 
Almacenll 
tb_clill 
=ll  
newll! $
Almacenll% ,
{mm 
idnn 
=nn 
usnn 
.nn 
Idnn 
,nn 
nombreoo 
=oo 
usoo 
.oo  
Nombreoo  &
,oo& '
descripcionpp 
=pp  !
uspp" $
.pp$ %
Descripcionpp% 0
,pp0 1
	direccionqq 
=qq 
usqq  "
.qq" #
	Direccionqq# ,
,qq, -
telefonorr 
=rr 
usrr !
.rr! "
Telefonorr" *
,rr* +
estadoss 
=ss 
usss 
.ss  
Estadoss  &
,ss& '
fecRegistrott 
=tt  !
ustt" $
.tt$ %
FecRegistrott% 0
,tt0 1
fecModificacionuu #
=uu$ %
usuu& (
.uu( )
FecModificacionuu) 8
}vv 
;vv 
returnxx 
Taskxx 
.xx 

FromResultxx &
(xx& '
tb_clixx' -
)xx- .
;xx. /
}yy 
elsezz 
return{{ 
Task{{ 
.{{ 

FromResult{{ &
<{{& '
Almacen{{' .
>{{. /
({{/ 0
null{{0 4
){{4 5
;{{5 6
}|| 	
public~~ 
Task~~ 
<~~ 
Almacen~~ 
>~~ 
GetAlmacenByAlmacen~~ 0
(~~0 1
string~~1 7
Almacen~~8 ?
)~~? @
{ 	
try
ÄÄ 
{
ÅÅ 
var
ÇÇ 
us
ÇÇ 
=
ÇÇ 
_context
ÇÇ !
.
ÇÇ! "
	almacenes
ÇÇ" +
.
ÇÇ+ ,
Where
ÇÇ, 1
(
ÇÇ1 2
x
ÇÇ2 3
=>
ÇÇ4 6
x
ÇÇ7 8
.
ÇÇ8 9
Nombre
ÇÇ9 ?
.
ÇÇ? @
Trim
ÇÇ@ D
(
ÇÇD E
)
ÇÇE F
.
ÇÇF G
ToLower
ÇÇG N
(
ÇÇN O
)
ÇÇO P
.
ÇÇP Q
Equals
ÇÇQ W
(
ÇÇW X
Almacen
ÇÇX _
.
ÇÇ_ `
ToLower
ÇÇ` g
(
ÇÇg h
)
ÇÇh i
)
ÇÇi j
)
ÇÇj k
.
ÇÇk l
FirstOrDefault
ÇÇl z
(
ÇÇz {
)
ÇÇ{ |
;
ÇÇ| }
if
ÑÑ 
(
ÑÑ 
us
ÑÑ 
!=
ÑÑ 
null
ÑÑ 
)
ÑÑ 
{
ÖÖ 
Almacen
ÜÜ 
tb_cli
ÜÜ "
=
ÜÜ# $
new
ÜÜ% (
Almacen
ÜÜ) 0
{
áá 
id
àà 
=
àà 
us
àà 
.
àà  
Id
àà  "
,
àà" #
nombre
ââ 
=
ââ  
us
ââ! #
.
ââ# $
Nombre
ââ$ *
,
ââ* +
descripcion
ää #
=
ää$ %
us
ää& (
.
ää( )
Descripcion
ää) 4
,
ää4 5
	direccion
ãã !
=
ãã" #
us
ãã$ &
.
ãã& '
	Direccion
ãã' 0
,
ãã0 1
telefono
åå  
=
åå! "
us
åå# %
.
åå% &
Telefono
åå& .
,
åå. /
estado
çç 
=
çç  
us
çç! #
.
çç# $
Estado
çç$ *
,
çç* +
fecRegistro
éé #
=
éé$ %
us
éé& (
.
éé( )
FecRegistro
éé) 4
,
éé4 5
fecModificacion
èè '
=
èè( )
us
èè* ,
.
èè, -
FecModificacion
èè- <
}
êê 
;
êê 
return
íí 
Task
íí 
.
íí  

FromResult
íí  *
(
íí* +
tb_cli
íí+ 1
)
íí1 2
;
íí2 3
}
ìì 
}
ïï 
catch
ññ 
(
ññ 
	Exception
ññ 
)
ññ 
{
óó 
return
òò 
Task
òò 
.
òò 

FromResult
òò &
<
òò& '
Almacen
òò' .
>
òò. /
(
òò/ 0
null
òò0 4
)
òò4 5
;
òò5 6
}
ôô 
return
õõ 
Task
õõ 
.
õõ 

FromResult
õõ "
<
õõ" #
Almacen
õõ# *
>
õõ* +
(
õõ+ ,
null
õõ, 0
)
õõ0 1
;
õõ1 2
}
úú 	
public
ûû 
async
ûû 
Task
ûû 
<
ûû 
List
ûû 
<
ûû 
Almacen
ûû &
>
ûû& '
>
ûû' (
GetAlmacens
ûû) 4
(
ûû4 5
)
ûû5 6
{
üü 	
List
†† 
<
†† 
Almacen
†† 
>
†† 
	almacenes
†† #
=
††$ %
new
††& )
List
††* .
<
††. /
Almacen
††/ 6
>
††6 7
(
††7 8
)
††8 9
;
††9 :
try
¢¢ 
{
££ 
var
§§ 
result
§§ 
=
§§ 
await
§§ "
Task
§§# '
.
§§' (
Run
§§( +
(
§§+ ,
(
§§, -
)
§§- .
=>
§§/ 1
_context
§§2 :
.
§§: ;
	almacenes
§§; D
.
§§D E
ToListAsync
§§E P
(
§§P Q
)
§§Q R
)
§§R S
;
§§S T
foreach
¶¶ 
(
¶¶ 
var
¶¶ 
us
¶¶ 
in
¶¶  "
result
¶¶# )
)
¶¶) *
{
ßß 
	almacenes
®® 
.
®® 
Add
®® !
(
®®! "
new
®®" %
Almacen
®®& -
{
©© 
id
™™ 
=
™™ 
us
™™ 
.
™™  
Id
™™  "
,
™™" #
nombre
´´ 
=
´´  
us
´´! #
.
´´# $
Nombre
´´$ *
,
´´* +
descripcion
¨¨ #
=
¨¨$ %
us
¨¨& (
.
¨¨( )
Descripcion
¨¨) 4
,
¨¨4 5
	direccion
≠≠ !
=
≠≠" #
us
≠≠$ &
.
≠≠& '
	Direccion
≠≠' 0
,
≠≠0 1
telefono
ÆÆ  
=
ÆÆ! "
us
ÆÆ# %
.
ÆÆ% &
Telefono
ÆÆ& .
,
ÆÆ. /
estado
ØØ 
=
ØØ  
us
ØØ! #
.
ØØ# $
Estado
ØØ$ *
,
ØØ* +
fecRegistro
∞∞ #
=
∞∞$ %
us
∞∞& (
.
∞∞( )
FecRegistro
∞∞) 4
,
∞∞4 5
fecModificacion
±± '
=
±±( )
us
±±* ,
.
±±, -
FecModificacion
±±- <
}
≤≤ 
)
≤≤ 
;
≤≤ 
}
≥≥ 
}
¥¥ 
catch
µµ 
(
µµ 
	Exception
µµ 
)
µµ 
{
∂∂ 
	almacenes
∑∑ 
=
∑∑ 
new
∑∑ 
List
∑∑  $
<
∑∑$ %
Almacen
∑∑% ,
>
∑∑, -
(
∑∑- .
)
∑∑. /
;
∑∑/ 0
}
∏∏ 
return
∫∫ 
	almacenes
∫∫ 
;
∫∫ 
}
ªª 	
}
ºº 
}ΩΩ áT
aD:\Proyectos\NetCore\UPC_PI2_Backend\PremierBeef.Infrastructure\Repository\CategoriaRepository.cs
	namespace 	
PremierBeef
 
. 
Infrastructure $
.$ %

Repository% /
{ 
public		 

class		 
CategoriaRepository		 $
:		% & 
ICategoriaRepository		' ;
{

 
private 
readonly 
PremierContext '
_context( 0
;0 1
public 
CategoriaRepository "
(" #
PremierContext# 1
context2 9
)9 :
{ 	
_context 
= 
context 
; 
} 	
public 
Task 
< 
int 
> 
AddCategoria %
(% &
	Categoria& /
us0 2
)2 3
{ 	
int 
newId 
= 
$num 
; !
tb_producto_categoria !
tb_cli" (
=) *
new+ .!
tb_producto_categoria/ D
{ 
Nombre 
= 
us 
. 
nombre "
," #
Descripcion 
= 
us  
.  !
descripcion! ,
,, -
Estado 
= 
us 
. 
estado "
} 
; 
try 
{ 
_context 
. 

categorias #
.# $
Add$ '
(' (
tb_cli( .
). /
;/ 0
_context 
. 
SaveChanges $
($ %
)% &
;& '
newId!! 
=!! 
tb_cli!! 
.!! 
Id!! !
;!!! "
}"" 
catch## 
(## 
	Exception## 
)## 
{$$ 
tb_cli%% 
.%% 
Id%% 
=%% 
$num%% 
;%% 
}&& 
return(( 
Task(( 
.(( 

FromResult(( "
(((" #
newId((# (
)((( )
;(() *
})) 	
public++ 
Task++ 
<++ 
bool++ 
>++ 
UpdateCategoria++ )
(++) *
	Categoria++* 3
cat++4 7
)++7 8
{,, 	
bool-- 
result-- 
=-- 
false-- 
;--  
try// 
{00 
var11 
	categoria11 
=11 
_context11  (
.11( )

categorias11) 3
.113 4
Find114 8
(118 9
cat119 <
.11< =
id11= ?
)11? @
;11@ A
if33 
(33 
	categoria33 
!=33  
null33! %
)33% &
{44 
	categoria55 
.55 
Nombre55 $
=55% &
cat55' *
.55* +
nombre55+ 1
;551 2
	categoria66 
.66 
Descripcion66 )
=66* +
cat66, /
.66/ 0
descripcion660 ;
;66; <
	categoria77 
.77 
Estado77 $
=77% &
true77' +
;77+ ,
_context:: 
.:: 

categorias:: '
.::' (
Attach::( .
(::. /
	categoria::/ 8
)::8 9
;::9 :
_context<< 
.<< 

categorias<< '
.<<' (
Update<<( .
(<<. /
	categoria<</ 8
)<<8 9
;<<9 :
_context== 
.== 
SaveChanges== (
(==( )
)==) *
;==* +
result?? 
=?? 
true?? !
;??! "
}@@ 
}AA 
catchBB 
(BB 
	ExceptionBB 
)BB 
{CC 
}EE 
returnGG 
TaskGG 
.GG 

FromResultGG "
(GG" #
resultGG# )
)GG) *
;GG* +
}HH 	
publicJJ 
TaskJJ 
<JJ 
intJJ 
>JJ 
RemoveCategoriaJJ (
(JJ( )
intJJ) ,
idJJ- /
)JJ/ 0
{KK 	
varLL 
	CategoriaLL 
=LL 
_contextLL $
.LL$ %

categoriasLL% /
.LL/ 0
FindLL0 4
(LL4 5
idLL5 7
)LL7 8
;LL8 9
ifMM 
(MM 
	CategoriaMM 
==MM 
nullMM !
)MM! "
{NN 
returnOO 
TaskOO 
.OO 

FromResultOO &
(OO& '
$numOO' (
)OO( )
;OO) *
}PP 
_contextRR 
.RR 

categoriasRR 
.RR  
RemoveRR  &
(RR& '
	CategoriaRR' 0
)RR0 1
;RR1 2
_contextSS 
.SS 
SaveChangesSS  
(SS  !
)SS! "
;SS" #
returnUU 
TaskUU 
.UU 

FromResultUU "
(UU" #
$numUU# $
)UU$ %
;UU% &
}VV 	
publicXX 
TaskXX 
<XX 
	CategoriaXX 
>XX 
GetCategoriaByIdXX /
(XX/ 0
intXX0 3
idXX4 6
)XX6 7
{YY 	
varZZ 
usZZ 
=ZZ 
_contextZZ 
.ZZ 

categoriasZZ (
.ZZ( )
FindZZ) -
(ZZ- .
idZZ. 0
)ZZ0 1
;ZZ1 2
if\\ 
(\\ 
us\\ 
!=\\ 
null\\ 
)\\ 
{]] 
	Categoria^^ 
tb_cli^^  
=^^! "
new^^# &
	Categoria^^' 0
{__ 
id`` 
=`` 
us`` 
.`` 
Id`` 
,`` 
nombreaa 
=aa 
usaa 
.aa  
Nombreaa  &
,aa& '
descripcionbb 
=bb  !
usbb" $
.bb$ %
Descripcionbb% 0
,bb0 1
estadocc 
=cc 
uscc 
.cc  
Estadocc  &
,cc& '
}ff 
;ff 
returnhh 
Taskhh 
.hh 

FromResulthh &
(hh& '
tb_clihh' -
)hh- .
;hh. /
}ii 
elsejj 
returnkk 
Taskkk 
.kk 

FromResultkk &
<kk& '
	Categoriakk' 0
>kk0 1
(kk1 2
nullkk2 6
)kk6 7
;kk7 8
}ll 	
publicnn 
Tasknn 
<nn 
	Categoriann 
>nn #
GetCategoriaByCategoriann 6
(nn6 7
stringnn7 =
	categoriann> G
)nnG H
{oo 	
trypp 
{qq 
varrr 
usrr 
=rr 
_contextrr !
.rr! "

categoriasrr" ,
.rr, -
Whererr- 2
(rr2 3
xrr3 4
=>rr5 7
xrr8 9
.rr9 :
Nombrerr: @
.rr@ A
TrimrrA E
(rrE F
)rrF G
.rrG H
ToLowerrrH O
(rrO P
)rrP Q
.rrQ R
EqualsrrR X
(rrX Y
	categoriarrY b
.rrb c
ToLowerrrc j
(rrj k
)rrk l
)rrl m
)rrm n
.rrn o
FirstOrDefaultrro }
(rr} ~
)rr~ 
;	rr Ä
iftt 
(tt 
ustt 
!=tt 
nulltt 
)tt 
{uu 
	Categoriavv 
tb_clivv $
=vv% &
newvv' *
	Categoriavv+ 4
{ww 
idxx 
=xx 
usxx 
.xx  
Idxx  "
,xx" #
nombreyy 
=yy  
usyy! #
.yy# $
Nombreyy$ *
,yy* +
descripcionzz #
=zz$ %
uszz& (
.zz( )
Descripcionzz) 4
,zz4 5
estado{{ 
={{  
us{{! #
.{{# $
Estado{{$ *
,{{* +
}~~ 
;~~ 
return
ÄÄ 
Task
ÄÄ 
.
ÄÄ  

FromResult
ÄÄ  *
(
ÄÄ* +
tb_cli
ÄÄ+ 1
)
ÄÄ1 2
;
ÄÄ2 3
}
ÅÅ 
}
ÉÉ 
catch
ÑÑ 
(
ÑÑ 
	Exception
ÑÑ 
)
ÑÑ 
{
ÖÖ 
throw
áá 
;
áá 
}
àà 
return
ää 
Task
ää 
.
ää 

FromResult
ää "
<
ää" #
	Categoria
ää# ,
>
ää, -
(
ää- .
null
ää. 2
)
ää2 3
;
ää3 4
}
åå 	
public
éé 
async
éé 
Task
éé 
<
éé 
List
éé 
<
éé 
	Categoria
éé (
>
éé( )
>
éé) *
GetCategorias
éé+ 8
(
éé8 9
)
éé9 :
{
èè 	
List
êê 
<
êê 
	Categoria
êê 
>
êê 

categorias
êê &
=
êê' (
new
êê) ,
List
êê- 1
<
êê1 2
	Categoria
êê2 ;
>
êê; <
(
êê< =
)
êê= >
;
êê> ?
try
íí 
{
ìì 
var
îî 
result
îî 
=
îî 
await
îî "
Task
îî# '
.
îî' (
Run
îî( +
(
îî+ ,
(
îî, -
)
îî- .
=>
îî/ 1
_context
îî2 :
.
îî: ;

categorias
îî; E
.
îîE F
ToListAsync
îîF Q
(
îîQ R
)
îîR S
)
îîS T
;
îîT U
foreach
ññ 
(
ññ 
var
ññ 
us
ññ 
in
ññ  "
result
ññ# )
)
ññ) *
{
óó 

categorias
òò 
.
òò 
Add
òò "
(
òò" #
new
òò# &
	Categoria
òò' 0
{
ôô 
id
öö 
=
öö 
us
öö 
.
öö  
Id
öö  "
,
öö" #
nombre
õõ 
=
õõ  
us
õõ! #
.
õõ# $
Nombre
õõ$ *
,
õõ* +
descripcion
úú #
=
úú$ %
us
úú& (
.
úú( )
Descripcion
úú) 4
,
úú4 5
estado
ùù 
=
ùù  
us
ùù! #
.
ùù# $
Estado
ùù$ *
,
ùù* +
}
†† 
)
†† 
;
†† 
}
°° 
}
¢¢ 
catch
££ 
(
££ 
	Exception
££ 
)
££ 
{
§§ 
}
¶¶ 
return
©© 

categorias
©© 
;
©© 
}
™™ 	
}
´´ 
}¨¨ ßù
_D:\Proyectos\NetCore\UPC_PI2_Backend\PremierBeef.Infrastructure\Repository\ClienteRepository.cs
	namespace 	
PremierBeef
 
. 
Infrastructure $
.$ %

Repository% /
{ 
public		 

class		 
ClienteRepository		 "
:		# $
IClienteRepository		% 7
{

 
private 
readonly 
PremierContext '
_context( 0
;0 1
public 
ClienteRepository  
(  !
PremierContext! /
context0 7
)7 8
{ 	
_context 
= 
context 
; 
} 	
public 
Task 
< 
int 
> 

AddCliente #
(# $
Cliente$ +
us, .
). /
{ 	
int 
newId 
= 
$num 
; 

tb_cliente 
tb_cli 
= 
new  #

tb_cliente$ .
{ 
Nombre 
= 
us 
. 
nombre "
," #

ApePaterno 
= 
us 
.  

apePaterno  *
,* +

ApeMaterno 
= 
us 
.  

apeMaterno  *
,* +
Telefono 
= 
us 
. 
telefono &
,& '
	Direccion 
= 
us 
. 
	direccion (
,( )
Estado 
= 
us 
. 
estado "
," #
EnviarPromociones !
=" #
us$ &
.& '
enviarPromociones' 8
,8 9
IdTipoDocumento 
=  !
us" $
.$ %
idTipoDocumento% 4
,4 5
NumeroDocumento 
=  !
us" $
.$ %
numeroDocumento% 4
,4 5
FecRegistro   
=   
us    
.    !
fecRegistro  ! ,
,  , -
FecModificacion!! 
=!!  !
us!!" $
.!!$ %
fecModificacion!!% 4
}"" 
;"" 
try$$ 
{%% 
_context&& 
.&& 
clientes&& !
.&&! "
Add&&" %
(&&% &
tb_cli&&& ,
)&&, -
;&&- .
_context'' 
.'' 
SaveChanges'' $
(''$ %
)''% &
;''& '
newId)) 
=)) 
tb_cli)) 
.)) 
Id)) !
;))! "
}** 
catch++ 
(++ 
	Exception++ 
)++ 
{,, 
tb_cli-- 
.-- 
Id-- 
=-- 
$num-- 
;-- 
}.. 
return00 
Task00 
.00 

FromResult00 "
(00" #
newId00# (
)00( )
;00) *
}11 	
public33 
Task33 
<33 
bool33 
>33 
UpdateCliente33 '
(33' (
Cliente33( /
cli330 3
)333 4
{44 	
bool55 
result55 
=55 
false55 
;55  
try77 
{88 
var99 
cliente99 
=99 
_context99 &
.99& '
clientes99' /
.99/ 0
Find990 4
(994 5
cli995 8
.998 9
id999 ;
)99; <
;99< =
if;; 
(;; 
cliente;; 
!=;; 
null;; #
);;# $
{<< 
cliente== 
.== 
Nombre== "
===# $
cli==% (
.==( )
nombre==) /
;==/ 0
cliente>> 
.>> 

ApePaterno>> &
=>>' (
cli>>) ,
.>>, -

apePaterno>>- 7
;>>7 8
cliente?? 
.?? 

ApeMaterno?? &
=??' (
cli??) ,
.??, -

apeMaterno??- 7
;??7 8
cliente@@ 
.@@ 
Telefono@@ $
=@@% &
cli@@' *
.@@* +
telefono@@+ 3
;@@3 4
clienteAA 
.AA 
	DireccionAA %
=AA& '
cliAA( +
.AA+ ,
	direccionAA, 5
;AA5 6
clienteBB 
.BB 
EstadoBB "
=BB# $
trueBB% )
;BB) *
clienteCC 
.CC 
EnviarPromocionesCC -
=CC. /
cliCC0 3
.CC3 4
enviarPromocionesCC4 E
;CCE F
clienteDD 
.DD 
IdTipoDocumentoDD +
=DD, -
cliDD. 1
.DD1 2
idTipoDocumentoDD2 A
;DDA B
clienteEE 
.EE 
NumeroDocumentoEE +
=EE, -
cliEE. 1
.EE1 2
numeroDocumentoEE2 A
;EEA B
clienteFF 
.FF 
FecRegistroFF '
=FF( )
clienteFF* 1
.FF1 2
FecRegistroFF2 =
;FF= >
clienteGG 
.GG 
FecModificacionGG +
=GG, -
DateTimeGG. 6
.GG6 7
NowGG7 :
;GG: ;
_contextII 
.II 
clientesII %
.II% &
AttachII& ,
(II, -
clienteII- 4
)II4 5
;II5 6
_contextKK 
.KK 
clientesKK %
.KK% &
UpdateKK& ,
(KK, -
clienteKK- 4
)KK4 5
;KK5 6
varMM 
sdsMM 
=MM 
_contextMM &
.MM& '
SaveChangesMM' 2
(MM2 3
)MM3 4
;MM4 5
resultOO 
=OO 
trueOO !
;OO! "
}PP 
}QQ 
catchRR 
(RR 
	ExceptionRR 
)RR 
{SS 
}UU 
returnWW 
TaskWW 
.WW 

FromResultWW "
(WW" #
resultWW# )
)WW) *
;WW* +
}XX 	
publicZZ 
TaskZZ 
<ZZ 
intZZ 
>ZZ 
RemoveClienteZZ &
(ZZ& '
intZZ' *
idZZ+ -
)ZZ- .
{[[ 	
var\\ 
Cliente\\ 
=\\ 
_context\\ "
.\\" #
clientes\\# +
.\\+ ,
Find\\, 0
(\\0 1
id\\1 3
)\\3 4
;\\4 5
if]] 
(]] 
Cliente]] 
==]] 
null]] 
)]]  
{^^ 
return__ 
Task__ 
.__ 

FromResult__ &
(__& '
$num__' (
)__( )
;__) *
}`` 
_contextbb 
.bb 
clientesbb 
.bb 
Removebb $
(bb$ %
Clientebb% ,
)bb, -
;bb- .
_contextcc 
.cc 
SaveChangescc  
(cc  !
)cc! "
;cc" #
returnee 
Taskee 
.ee 

FromResultee "
(ee" #
$numee# $
)ee$ %
;ee% &
}ff 	
publichh 
Taskhh 
<hh 
Clientehh 
>hh 
GetClienteByIdhh +
(hh+ ,
inthh, /
idhh0 2
)hh2 3
{ii 	
varjj 
usjj 
=jj 
_contextjj 
.jj 
clientesjj &
.jj& '
Findjj' +
(jj+ ,
idjj, .
)jj. /
;jj/ 0
ifll 
(ll 
usll 
!=ll 
nullll 
)ll 
{mm 
Clientenn 
tb_clinn 
=nn  
newnn! $
Clientenn% ,
{oo 
idpp 
=pp 
uspp 
.pp 
Idpp 
,pp 
nombreqq 
=qq 
usqq 
.qq  
Nombreqq  &
,qq& '

apePaternorr 
=rr  
usrr! #
.rr# $

ApePaternorr$ .
,rr. /

apeMaternoss 
=ss  
usss! #
.ss# $

ApeMaternoss$ .
,ss. /
telefonott 
=tt 
ustt !
.tt! "
Telefonott" *
,tt* +
	direccionuu 
=uu 
usuu  "
.uu" #
	Direccionuu# ,
,uu, -
estadovv 
=vv 
usvv 
.vv  
Estadovv  &
,vv& '
enviarPromocionesww %
=ww& '
usww( *
.ww* +
EnviarPromocionesww+ <
,ww< =
idTipoDocumentoxx #
=xx$ %
usxx& (
.xx( )
IdTipoDocumentoxx) 8
,xx8 9
numeroDocumentoyy #
=yy$ %
usyy& (
.yy( )
NumeroDocumentoyy) 8
,yy8 9
fecRegistrozz 
=zz  !
uszz" $
.zz$ %
FecRegistrozz% 0
,zz0 1
fecModificacion{{ #
={{$ %
us{{& (
.{{( )
FecModificacion{{) 8
}|| 
;|| 
return~~ 
Task~~ 
.~~ 

FromResult~~ &
(~~& '
tb_cli~~' -
)~~- .
;~~. /
} 
else
ÄÄ 
return
ÅÅ 
Task
ÅÅ 
.
ÅÅ 

FromResult
ÅÅ &
<
ÅÅ& '
Cliente
ÅÅ' .
>
ÅÅ. /
(
ÅÅ/ 0
null
ÅÅ0 4
)
ÅÅ4 5
;
ÅÅ5 6
}
ÇÇ 	
public
ÑÑ 
Task
ÑÑ 
<
ÑÑ 
Cliente
ÑÑ 
>
ÑÑ !
GetClienteByCliente
ÑÑ 0
(
ÑÑ0 1
Cliente
ÑÑ1 8
cli
ÑÑ9 <
)
ÑÑ< =
{
ÖÖ 	
try
ÜÜ 
{
áá 
var
àà 
us
àà 
=
àà 
_context
àà !
.
àà! "
clientes
àà" *
.
àà* +
Where
àà+ 0
(
àà0 1
x
àà1 2
=>
àà3 5
x
àà6 7
.
àà7 8
Nombre
àà8 >
.
àà> ?
Trim
àà? C
(
ààC D
)
ààD E
.
ààE F
ToLower
ààF M
(
ààM N
)
ààN O
.
ààO P
Equals
ààP V
(
ààV W
cli
ààW Z
.
ààZ [
nombre
àà[ a
.
ààa b
ToLower
ààb i
(
àài j
)
ààj k
)
ààk l
&&
ààm o
x
ââ  !
.
ââ! "

ApePaterno
ââ" ,
.
ââ, -
Trim
ââ- 1
(
ââ1 2
)
ââ2 3
.
ââ3 4
ToLower
ââ4 ;
(
ââ; <
)
ââ< =
.
ââ= >
Equals
ââ> D
(
ââD E
cli
ââE H
.
ââH I

apePaterno
ââI S
.
ââS T
ToLower
ââT [
(
ââ[ \
)
ââ\ ]
)
ââ] ^
&&
ââ_ a
x
ää  !
.
ää! "

ApeMaterno
ää" ,
.
ää, -
Trim
ää- 1
(
ää1 2
)
ää2 3
.
ää3 4
ToLower
ää4 ;
(
ää; <
)
ää< =
.
ää= >
Equals
ää> D
(
ääD E
cli
ääE H
.
ääH I

apeMaterno
ääI S
.
ääS T
ToLower
ääT [
(
ää[ \
)
ää\ ]
)
ää] ^
)
ãã 
.
ãã 
FirstOrDefault
ãã  
(
ãã  !
)
ãã! "
;
ãã" #
if
çç 
(
çç 
us
çç 
!=
çç 
null
çç 
)
çç 
{
éé 
Cliente
èè 
tb_cli
èè "
=
èè# $
new
èè% (
Cliente
èè) 0
{
êê 
id
ëë 
=
ëë 
us
ëë 
.
ëë  
Id
ëë  "
,
ëë" #
nombre
íí 
=
íí  
us
íí! #
.
íí# $
Nombre
íí$ *
,
íí* +

apePaterno
ìì "
=
ìì# $
us
ìì% '
.
ìì' (

ApePaterno
ìì( 2
,
ìì2 3

apeMaterno
îî "
=
îî# $
us
îî% '
.
îî' (

ApeMaterno
îî( 2
,
îî2 3
telefono
ïï  
=
ïï! "
us
ïï# %
.
ïï% &
Telefono
ïï& .
,
ïï. /
	direccion
ññ !
=
ññ" #
us
ññ$ &
.
ññ& '
	Direccion
ññ' 0
,
ññ0 1
estado
óó 
=
óó  
us
óó! #
.
óó# $
Estado
óó$ *
,
óó* +
enviarPromociones
òò )
=
òò* +
us
òò, .
.
òò. /
EnviarPromociones
òò/ @
,
òò@ A
idTipoDocumento
ôô '
=
ôô( )
us
ôô* ,
.
ôô, -
IdTipoDocumento
ôô- <
,
ôô< =
numeroDocumento
öö '
=
öö( )
us
öö* ,
.
öö, -
NumeroDocumento
öö- <
,
öö< =
fecRegistro
õõ #
=
õõ$ %
us
õõ& (
.
õõ( )
FecRegistro
õõ) 4
,
õõ4 5
fecModificacion
úú '
=
úú( )
us
úú* ,
.
úú, -
FecModificacion
úú- <
}
ùù 
;
ùù 
return
üü 
Task
üü 
.
üü  

FromResult
üü  *
(
üü* +
tb_cli
üü+ 1
)
üü1 2
;
üü2 3
}
†† 
}
¢¢ 
catch
££ 
(
££ 
	Exception
££ 
)
££ 
{
§§ 
throw
¶¶ 
;
¶¶ 
}
ßß 
return
©© 
Task
©© 
.
©© 

FromResult
©© "
<
©©" #
Cliente
©©# *
>
©©* +
(
©©+ ,
null
©©, 0
)
©©0 1
;
©©1 2
}
™™ 	
public
¨¨ 
Task
¨¨ 
<
¨¨ 
Cliente
¨¨ 
>
¨¨ &
GetClienteByNroDocumento
¨¨ 5
(
¨¨5 6
Cliente
¨¨6 =
cli
¨¨> A
)
¨¨A B
{
≠≠ 	
try
ÆÆ 
{
ØØ 
var
∞∞ 
us
∞∞ 
=
∞∞ 
_context
∞∞ !
.
∞∞! "
clientes
∞∞" *
.
∞∞* +
Where
∞∞+ 0
(
∞∞0 1
x
∞∞1 2
=>
∞∞3 5
x
∞∞6 7
.
∞∞7 8
IdTipoDocumento
∞∞8 G
==
∞∞H J
cli
∞∞K N
.
∞∞N O
idTipoDocumento
∞∞O ^
&&
∞∞_ a
x
∞∞b c
.
∞∞c d
NumeroDocumento
∞∞d s
.
∞∞s t
Trim
∞∞t x
(
∞∞x y
)
∞∞y z
==
∞∞{ }
cli∞∞~ Å
.∞∞Å Ç
numeroDocumento∞∞Ç ë
.∞∞ë í
Trim∞∞í ñ
(∞∞ñ ó
)∞∞ó ò
)
±± 
.
±± 
FirstOrDefault
±±  
(
±±  !
)
±±! "
;
±±" #
if
≥≥ 
(
≥≥ 
us
≥≥ 
!=
≥≥ 
null
≥≥ 
)
≥≥ 
{
¥¥ 
Cliente
µµ 
tb_cli
µµ "
=
µµ# $
new
µµ% (
Cliente
µµ) 0
{
∂∂ 
id
∑∑ 
=
∑∑ 
us
∑∑ 
.
∑∑  
Id
∑∑  "
,
∑∑" #
nombre
∏∏ 
=
∏∏  
us
∏∏! #
.
∏∏# $
Nombre
∏∏$ *
,
∏∏* +

apePaterno
ππ "
=
ππ# $
us
ππ% '
.
ππ' (

ApePaterno
ππ( 2
,
ππ2 3

apeMaterno
∫∫ "
=
∫∫# $
us
∫∫% '
.
∫∫' (

ApeMaterno
∫∫( 2
,
∫∫2 3
telefono
ªª  
=
ªª! "
us
ªª# %
.
ªª% &
Telefono
ªª& .
,
ªª. /
	direccion
ºº !
=
ºº" #
us
ºº$ &
.
ºº& '
	Direccion
ºº' 0
,
ºº0 1
estado
ΩΩ 
=
ΩΩ  
us
ΩΩ! #
.
ΩΩ# $
Estado
ΩΩ$ *
,
ΩΩ* +
enviarPromociones
ææ )
=
ææ* +
us
ææ, .
.
ææ. /
EnviarPromociones
ææ/ @
,
ææ@ A
idTipoDocumento
øø '
=
øø( )
us
øø* ,
.
øø, -
IdTipoDocumento
øø- <
,
øø< =
numeroDocumento
¿¿ '
=
¿¿( )
us
¿¿* ,
.
¿¿, -
NumeroDocumento
¿¿- <
,
¿¿< =
fecRegistro
¡¡ #
=
¡¡$ %
us
¡¡& (
.
¡¡( )
FecRegistro
¡¡) 4
,
¡¡4 5
fecModificacion
¬¬ '
=
¬¬( )
us
¬¬* ,
.
¬¬, -
FecModificacion
¬¬- <
}
√√ 
;
√√ 
return
≈≈ 
Task
≈≈ 
.
≈≈  

FromResult
≈≈  *
(
≈≈* +
tb_cli
≈≈+ 1
)
≈≈1 2
;
≈≈2 3
}
∆∆ 
}
»» 
catch
…… 
(
…… 
	Exception
…… 
)
…… 
{
   
throw
ÃÃ 
;
ÃÃ 
}
ÕÕ 
return
œœ 
Task
œœ 
.
œœ 

FromResult
œœ "
<
œœ" #
Cliente
œœ# *
>
œœ* +
(
œœ+ ,
null
œœ, 0
)
œœ0 1
;
œœ1 2
}
—— 	
public
”” 
async
”” 
Task
”” 
<
”” 
List
”” 
<
”” 
Cliente
”” &
>
””& '
>
””' (
GetClientes
””) 4
(
””4 5
)
””5 6
{
‘‘ 	
List
’’ 
<
’’ 
Cliente
’’ 
>
’’ 
clientes
’’ "
=
’’# $
new
’’% (
List
’’) -
<
’’- .
Cliente
’’. 5
>
’’5 6
(
’’6 7
)
’’7 8
;
’’8 9
try
◊◊ 
{
ÿÿ 
var
ŸŸ 
result
ŸŸ 
=
ŸŸ 
await
ŸŸ "
Task
ŸŸ# '
.
ŸŸ' (
Run
ŸŸ( +
(
ŸŸ+ ,
(
ŸŸ, -
)
ŸŸ- .
=>
ŸŸ/ 1
_context
ŸŸ2 :
.
ŸŸ: ;
clientes
ŸŸ; C
.
ŸŸC D
ToListAsync
ŸŸD O
(
ŸŸO P
)
ŸŸP Q
)
ŸŸQ R
;
ŸŸR S
foreach
€€ 
(
€€ 
var
€€ 
us
€€ 
in
€€  "
result
€€# )
)
€€) *
{
‹‹ 
clientes
›› 
.
›› 
Add
››  
(
››  !
new
››! $
Cliente
››% ,
{
ﬁﬁ 
id
ﬂﬂ 
=
ﬂﬂ 
us
ﬂﬂ 
.
ﬂﬂ  
Id
ﬂﬂ  "
,
ﬂﬂ" #
nombre
‡‡ 
=
‡‡  
us
‡‡! #
.
‡‡# $
Nombre
‡‡$ *
,
‡‡* +

apePaterno
·· "
=
··# $
us
··% '
.
··' (

ApePaterno
··( 2
,
··2 3

apeMaterno
‚‚ "
=
‚‚# $
us
‚‚% '
.
‚‚' (

ApeMaterno
‚‚( 2
,
‚‚2 3
telefono
„„  
=
„„! "
us
„„# %
.
„„% &
Telefono
„„& .
,
„„. /
	direccion
‰‰ !
=
‰‰" #
us
‰‰$ &
.
‰‰& '
	Direccion
‰‰' 0
,
‰‰0 1
estado
ÂÂ 
=
ÂÂ  
us
ÂÂ! #
.
ÂÂ# $
Estado
ÂÂ$ *
,
ÂÂ* +
enviarPromociones
ÊÊ )
=
ÊÊ* +
us
ÊÊ, .
.
ÊÊ. /
EnviarPromociones
ÊÊ/ @
,
ÊÊ@ A
idTipoDocumento
ÁÁ '
=
ÁÁ( )
us
ÁÁ* ,
.
ÁÁ, -
IdTipoDocumento
ÁÁ- <
,
ÁÁ< =
numeroDocumento
ËË '
=
ËË( )
us
ËË* ,
.
ËË, -
NumeroDocumento
ËË- <
,
ËË< =
fecRegistro
ÈÈ #
=
ÈÈ$ %
us
ÈÈ& (
.
ÈÈ( )
FecRegistro
ÈÈ) 4
,
ÈÈ4 5
fecModificacion
ÍÍ '
=
ÍÍ( )
us
ÍÍ* ,
.
ÍÍ, -
FecModificacion
ÍÍ- <
}
ÎÎ 
)
ÎÎ 
;
ÎÎ 
}
ÏÏ 
}
ÌÌ 
catch
ÓÓ 
(
ÓÓ 
	Exception
ÓÓ 
)
ÓÓ 
{
ÔÔ 
}
ÒÒ 
return
ÙÙ 
clientes
ÙÙ 
;
ÙÙ 
}
ıı 	
}
ˆˆ 
}˜˜ ¸g
`D:\Proyectos\NetCore\UPC_PI2_Backend\PremierBeef.Infrastructure\Repository\ProductoRepository.cs
	namespace 	
PremierBeef
 
. 
Infrastructure $
.$ %

Repository% /
{ 
public		 

class		 
ProductoRepository		 #
:		$ %
IProductoRepository		& 9
{

 
private 
readonly 
PremierContext '
_context( 0
;0 1
public 
ProductoRepository !
(! "
PremierContext" 0
context1 8
)8 9
{ 	
_context 
= 
context 
; 
} 	
public 
Task 
< 
int 
> 
AddProducto $
($ %
Producto% -
us. 0
)0 1
{ 	
int 
newId 
= 
$num 
; 
tb_producto 
tb_user 
=  !
new" %
tb_producto& 1
{ 
Nombre 
= 
us 
. 
nombre "
," #
Descripcion 
= 
us  
.  !
descripcion! ,
,, -
Precio 
= 
us 
. 
precio "
," #
IdCategoria 
= 
us  
.  !
idCategoria! ,
,, -
IdProveedor 
= 
us  
.  !
idProveedor! ,
,, -
FecRegistro 
= 
us  
.  !
fecRegistro! ,
,, -
FecModificacion 
=  !
us" $
.$ %
fecModificacion% 4
} 
; 
try   
{!! 
_context"" 
."" 
	productos"" "
.""" #
Add""# &
(""& '
tb_user""' .
)"". /
;""/ 0
_context## 
.## 
SaveChanges## $
(##$ %
)##% &
;##& '
newId%% 
=%% 
tb_user%% 
.%%  
Id%%  "
;%%" #
}&& 
catch'' 
('' 
	Exception'' 
)'' 
{(( 
tb_user)) 
.)) 
Id)) 
=)) 
$num)) 
;)) 
}** 
return,, 
Task,, 
.,, 

FromResult,, "
(,," #
newId,,# (
),,( )
;,,) *
}-- 	
public// 
Task// 
<// 
bool// 
>// 
UpdateProducto// (
(//( )
Producto//) 1
prod//2 6
)//6 7
{00 	
bool11 
result11 
=11 
false11 
;11  
try33 
{44 
var55 
producto55 
=55 
_context55 '
.55' (
	productos55( 1
.551 2
Find552 6
(556 7
prod557 ;
.55; <
id55< >
)55> ?
;55? @
if77 
(77 
producto77 
!=77 
null77  $
)77$ %
{88 
producto99 
.99 
Nombre99 #
=99$ %
prod99& *
.99* +
nombre99+ 1
;991 2
producto:: 
.:: 
Descripcion:: (
=::) *
prod::+ /
.::/ 0
descripcion::0 ;
;::; <
producto;; 
.;; 
Precio;; #
=;;$ %
prod;;& *
.;;* +
precio;;+ 1
;;;1 2
producto<< 
.<< 
IdCategoria<< (
=<<) *
prod<<+ /
.<</ 0
idCategoria<<0 ;
;<<; <
producto== 
.== 
IdProveedor== (
===) *
prod==+ /
.==/ 0
idProveedor==0 ;
;==; <
producto>> 
.>> 
FecRegistro>> (
=>>) *
producto>>+ 3
.>>3 4
FecRegistro>>4 ?
;>>? @
producto?? 
.?? 
FecModificacion?? ,
=??- .
DateTime??/ 7
.??7 8
Now??8 ;
;??; <
_contextAA 
.AA 
	productosAA &
.AA& '
AttachAA' -
(AA- .
productoAA. 6
)AA6 7
;AA7 8
_contextCC 
.CC 
	productosCC &
.CC& '
UpdateCC' -
(CC- .
productoCC. 6
)CC6 7
;CC7 8
varEE 
sdsEE 
=EE 
_contextEE &
.EE& '
SaveChangesEE' 2
(EE2 3
)EE3 4
;EE4 5
resultGG 
=GG 
trueGG !
;GG! "
}HH 
}II 
catchJJ 
(JJ 
	ExceptionJJ 
)JJ 
{KK 
}MM 
returnOO 
TaskOO 
.OO 

FromResultOO "
(OO" #
resultOO# )
)OO) *
;OO* +
}PP 	
publicRR 
TaskRR 
<RR 
intRR 
>RR 
RemoveProductoRR '
(RR' (
intRR( +
idRR, .
)RR. /
{SS 	
varTT 
ProductoTT 
=TT 
_contextTT #
.TT# $
	productosTT$ -
.TT- .
FindTT. 2
(TT2 3
idTT3 5
)TT5 6
;TT6 7
ifUU 
(UU 
ProductoUU 
==UU 
nullUU  
)UU  !
{VV 
returnWW 
TaskWW 
.WW 

FromResultWW &
(WW& '
$numWW' (
)WW( )
;WW) *
}XX 
_contextZZ 
.ZZ 
	productosZZ 
.ZZ 
RemoveZZ %
(ZZ% &
ProductoZZ& .
)ZZ. /
;ZZ/ 0
_context[[ 
.[[ 
SaveChanges[[  
([[  !
)[[! "
;[[" #
return]] 
Task]] 
.]] 

FromResult]] "
(]]" #
$num]]# $
)]]$ %
;]]% &
}^^ 	
public`` 
Task`` 
<`` 
Producto`` 
>`` 
GetProductoById`` -
(``- .
int``. 1
id``2 4
)``4 5
{aa 	
varbb 
usbb 
=bb 
_contextbb 
.bb 
	productosbb '
.bb' (
Findbb( ,
(bb, -
idbb- /
)bb/ 0
;bb0 1
ifdd 
(dd 
usdd 
!=dd 
nulldd 
)dd 
{ee 
Productoff 
tb_userff  
=ff! "
newff# &
Productoff' /
{gg 
idhh 
=hh 
ushh 
.hh 
Idhh 
,hh 
nombreii 
=ii 
usii 
.ii  
Nombreii  &
,ii& '
descripcionjj 
=jj  !
usjj" $
.jj$ %
Descripcionjj% 0
,jj0 1
preciokk 
=kk 
uskk 
.kk  
Preciokk  &
,kk& '
idCategoriall 
=ll  !
usll" $
.ll$ %
IdCategoriall% 0
,ll0 1
idProveedormm 
=mm  !
usmm" $
.mm$ %
IdProveedormm% 0
,mm0 1
fecRegistronn 
=nn  !
usnn" $
.nn$ %
FecRegistronn% 0
,nn0 1
fecModificacionoo #
=oo$ %
usoo& (
.oo( )
FecModificacionoo) 8
}pp 
;pp 
returnrr 
Taskrr 
.rr 

FromResultrr &
(rr& '
tb_userrr' .
)rr. /
;rr/ 0
}ss 
elsett 
returnuu 
Taskuu 
.uu 

FromResultuu &
<uu& '
Productouu' /
>uu/ 0
(uu0 1
nulluu1 5
)uu5 6
;uu6 7
}vv 	
publicxx 
Taskxx 
<xx 
Productoxx 
>xx !
GetProductoByProductoxx 3
(xx3 4
stringxx4 :
Productoxx; C
)xxC D
{yy 	
tryzz 
{{{ 
var|| 
us|| 
=|| 
_context|| !
.||! "
	productos||" +
.||+ ,
Where||, 1
(||1 2
x||2 3
=>||4 6
x||7 8
.||8 9
Nombre||9 ?
.||? @
Trim||@ D
(||D E
)||E F
.||F G
ToLower||G N
(||N O
)||O P
.||P Q
Equals||Q W
(||W X
Producto||X `
.||` a
ToLower||a h
(||h i
)||i j
)||j k
)||k l
.||l m
FirstOrDefault||m {
(||{ |
)||| }
;||} ~
if~~ 
(~~ 
us~~ 
!=~~ 
null~~ 
)~~ 
{ 
Producto
ÄÄ 
tb_user
ÄÄ $
=
ÄÄ% &
new
ÄÄ' *
Producto
ÄÄ+ 3
{
ÅÅ 
id
ÇÇ 
=
ÇÇ 
us
ÇÇ 
.
ÇÇ  
Id
ÇÇ  "
,
ÇÇ" #
nombre
ÉÉ 
=
ÉÉ  
us
ÉÉ! #
.
ÉÉ# $
Nombre
ÉÉ$ *
,
ÉÉ* +
descripcion
ÑÑ #
=
ÑÑ$ %
us
ÑÑ& (
.
ÑÑ( )
Descripcion
ÑÑ) 4
,
ÑÑ4 5
precio
ÖÖ 
=
ÖÖ  
us
ÖÖ! #
.
ÖÖ# $
Precio
ÖÖ$ *
,
ÖÖ* +
idCategoria
ÜÜ #
=
ÜÜ$ %
us
ÜÜ& (
.
ÜÜ( )
IdCategoria
ÜÜ) 4
,
ÜÜ4 5
idProveedor
áá #
=
áá$ %
us
áá& (
.
áá( )
IdProveedor
áá) 4
,
áá4 5
fecRegistro
àà #
=
àà$ %
us
àà& (
.
àà( )
FecRegistro
àà) 4
,
àà4 5
fecModificacion
ââ '
=
ââ( )
us
ââ* ,
.
ââ, -
FecModificacion
ââ- <
}
ää 
;
ää 
return
åå 
Task
åå 
.
åå  

FromResult
åå  *
(
åå* +
tb_user
åå+ 2
)
åå2 3
;
åå3 4
}
çç 
}
èè 
catch
êê 
(
êê 
	Exception
êê 
)
êê 
{
ëë 
throw
ìì 
;
ìì 
}
îî 
return
ññ 
Task
ññ 
.
ññ 

FromResult
ññ "
<
ññ" #
Producto
ññ# +
>
ññ+ ,
(
ññ, -
null
ññ- 1
)
ññ1 2
;
ññ2 3
}
òò 	
public
öö 
async
öö 
Task
öö 
<
öö 
List
öö 
<
öö 
Producto
öö '
>
öö' (
>
öö( )
GetProductos
öö* 6
(
öö6 7
)
öö7 8
{
õõ 	
List
úú 
<
úú 
Producto
úú 
>
úú 
	productos
úú $
=
úú% &
new
úú' *
List
úú+ /
<
úú/ 0
Producto
úú0 8
>
úú8 9
(
úú9 :
)
úú: ;
;
úú; <
try
ûû 
{
üü 
var
†† 
result
†† 
=
†† 
await
†† "
Task
††# '
.
††' (
Run
††( +
(
††+ ,
(
††, -
)
††- .
=>
††/ 1
_context
††2 :
.
††: ;
	productos
††; D
.
††D E
ToListAsync
††E P
(
††P Q
)
††Q R
)
††R S
;
††S T
foreach
¢¢ 
(
¢¢ 
var
¢¢ 
us
¢¢ 
in
¢¢  "
result
¢¢# )
)
¢¢) *
{
££ 
	productos
§§ 
.
§§ 
Add
§§ !
(
§§! "
new
§§" %
Producto
§§& .
{
•• 
id
¶¶ 
=
¶¶ 
us
¶¶ 
.
¶¶  
Id
¶¶  "
,
¶¶" #
nombre
ßß 
=
ßß  
us
ßß! #
.
ßß# $
Nombre
ßß$ *
,
ßß* +
descripcion
®® #
=
®®$ %
us
®®& (
.
®®( )
Descripcion
®®) 4
,
®®4 5
precio
©© 
=
©©  
us
©©! #
.
©©# $
Precio
©©$ *
,
©©* +
idCategoria
™™ #
=
™™$ %
us
™™& (
.
™™( )
IdCategoria
™™) 4
,
™™4 5
idProveedor
´´ #
=
´´$ %
us
´´& (
.
´´( )
IdProveedor
´´) 4
,
´´4 5
fecRegistro
¨¨ #
=
¨¨$ %
us
¨¨& (
.
¨¨( )
FecRegistro
¨¨) 4
,
¨¨4 5
fecModificacion
≠≠ '
=
≠≠( )
us
≠≠* ,
.
≠≠, -
FecModificacion
≠≠- <
}
ÆÆ 
)
ÆÆ 
;
ÆÆ 
}
ØØ 
}
∞∞ 
catch
±± 
(
±± 
	Exception
±± 
)
±± 
{
≤≤ 
}
¥¥ 
return
∑∑ 
	productos
∑∑ 
;
∑∑ 
}
∏∏ 	
}
ππ 
}∫∫ óï
aD:\Proyectos\NetCore\UPC_PI2_Backend\PremierBeef.Infrastructure\Repository\PromocionRepository.cs
	namespace 	
PremierBeef
 
. 
Infrastructure $
.$ %

Repository% /
{ 
public		 

class		 
PromocionRepository		 $
:		% & 
IPromocionRepository		' ;
{

 
private 
readonly 
PremierContext '
_context( 0
;0 1
public 
PromocionRepository "
(" #
PremierContext# 1
context2 9
)9 :
{ 	
_context 
= 
context 
; 
} 	
public 
async 
Task 
< 
List 
< 
	Promocion (
>( )
>) *
GetPromociones+ 9
(9 :
): ;
{ 	
List 
< 
	Promocion 
> 
roles !
=" #
new$ '
List( ,
<, -
	Promocion- 6
>6 7
(7 8
)8 9
;9 :
try 
{ 
var 
result 
= 
await "
Task# '
.' (
Run( +
(+ ,
(, -
)- .
=>/ 1
_context2 :
.: ;
promociones; F
.F G
ToListAsyncG R
(R S
)S T
)T U
;U V
foreach 
( 
var 
us 
in  "
result# )
)) *
{ 
roles 
. 
Add 
( 
new !
	Promocion" +
{ 
id 
= 
us 
.  
Id  "
," #
nombre 
=  
us! #
.# $
Nombre$ *
??+ -
$str. 0
,0 1
descripcion   #
=  $ %
us  & (
.  ( )
Descripcion  ) 4
??  5 7
$str  8 :
,  : ;
	fecInicio!! !
=!!" #
us!!$ &
.!!& '
	FecInicio!!' 0
,!!0 1
fecFin"" 
=""  
us""! #
.""# $
FecFin""$ *
,""* +
porcentajeDescuento## +
=##, -
us##. 0
.##0 1
PorcentajeDescuento##1 D
,##D E
fecInicioStr$$ $
=$$% &
us$$' )
.$$) *
	FecInicio$$* 3
.$$3 4
ToString$$4 <
($$< =
$str$$= I
)$$I J
,$$J K
	fecFinStr%% !
=%%" #
us%%$ &
.%%& '
FecFin%%' -
.%%- .
ToString%%. 6
(%%6 7
$str%%7 C
)%%C D
}&& 
)&& 
;&& 
}'' 
}(( 
catch)) 
()) 
	Exception)) 
))) 
{** 
},, 
return// 
roles// 
;// 
}00 	
public22 
Task22 
<22 
int22 
>22 
AddPromocion22 %
(22% &
	Promocion22& /
us220 2
)222 3
{33 	
int44 
newId44 
=44 
$num44 
;44 
tb_promocion55 
tb_cli55 
=55  !
new55" %
tb_promocion55& 2
{66 
Nombre77 
=77 
us77 
.77 
nombre77 "
,77" #
Descripcion88 
=88 
us88  
.88  !
descripcion88! ,
,88, -
	FecInicio99 
=99 
us99 
.99 
	fecInicio99 (
,99( )
FecFin:: 
=:: 
us:: 
.:: 
fecFin:: "
,::" #
PorcentajeDescuento;; #
=;;$ %
us;;& (
.;;( )
porcentajeDescuento;;) <
,;;< =
Estado<< 
=<< 
true<< 
,<< 
FecRegistro== 
=== 
us==  
.==  !
fecRegistro==! ,
,==, -
FecModificacion>> 
=>>  !
us>>" $
.>>$ %
fecModificacion>>% 4
}?? 
;?? 
tryAA 
{BB 
_contextCC 
.CC 
promocionesCC $
.CC$ %
AddCC% (
(CC( )
tb_cliCC) /
)CC/ 0
;CC0 1
_contextDD 
.DD 
SaveChangesDD $
(DD$ %
)DD% &
;DD& '
newIdFF 
=FF 
tb_cliFF 
.FF 
IdFF !
;FF! "
}GG 
catchHH 
(HH 
	ExceptionHH 
)HH 
{II 
tb_cliJJ 
.JJ 
IdJJ 
=JJ 
$numJJ 
;JJ 
}KK 
returnMM 
TaskMM 
.MM 

FromResultMM "
(MM" #
newIdMM# (
)MM( )
;MM) *
}NN 	
publicPP 
TaskPP 
<PP 
boolPP 
>PP 
UpdatePromocionPP )
(PP) *
	PromocionPP* 3
promPP4 8
)PP8 9
{QQ 	
boolRR 
resultRR 
=RR 
falseRR 
;RR  
tryTT 
{UU 
varVV 
	promocionVV 
=VV 
_contextVV  (
.VV( )
promocionesVV) 4
.VV4 5
FindVV5 9
(VV9 :
promVV: >
.VV> ?
idVV? A
)VVA B
;VVB C
ifXX 
(XX 
	promocionXX 
!=XX  
nullXX! %
)XX% &
{YY 
	promocionZZ 
.ZZ 
NombreZZ $
=ZZ% &
promZZ' +
.ZZ+ ,
nombreZZ, 2
;ZZ2 3
	promocion[[ 
.[[ 
Descripcion[[ )
=[[* +
prom[[, 0
.[[0 1
descripcion[[1 <
;[[< =
	promocion\\ 
.\\ 
	FecInicio\\ '
=\\( )
prom\\* .
.\\. /
	fecInicio\\/ 8
;\\8 9
	promocion]] 
.]] 
FecFin]] $
=]]% &
prom]]' +
.]]+ ,
fecFin]], 2
;]]2 3
	promocion^^ 
.^^ 
PorcentajeDescuento^^ 1
=^^2 3
prom^^4 8
.^^8 9
porcentajeDescuento^^9 L
;^^L M
	promocion__ 
.__ 
Estado__ $
=__% &
	promocion__' 0
.__0 1
Estado__1 7
;__7 8
	promocion`` 
.`` 
FecRegistro`` )
=``* +
	promocion``, 5
.``5 6
FecRegistro``6 A
;``A B
	promocionaa 
.aa 
FecModificacionaa -
=aa. /
DateTimeaa0 8
.aa8 9
Nowaa9 <
;aa< =
_contextdd 
.dd 
promocionesdd (
.dd( )
Attachdd) /
(dd/ 0
	promociondd0 9
)dd9 :
;dd: ;
_contextff 
.ff 
promocionesff (
.ff( )
Updateff) /
(ff/ 0
	promocionff0 9
)ff9 :
;ff: ;
varhh 
sdshh 
=hh 
_contexthh &
.hh& '
SaveChangeshh' 2
(hh2 3
)hh3 4
;hh4 5
resultjj 
=jj 
truejj !
;jj! "
}kk 
}ll 
catchmm 
(mm 
	Exceptionmm 
)mm 
{nn 
}pp 
returnrr 
Taskrr 
.rr 

FromResultrr "
(rr" #
resultrr# )
)rr) *
;rr* +
}ss 	
publicuu 
Taskuu 
<uu 
intuu 
>uu 
RemovePromocionuu (
(uu( )
intuu) ,
iduu- /
)uu/ 0
{vv 	
varww 
	Promocionww 
=ww 
_contextww $
.ww$ %
promocionesww% 0
.ww0 1
Findww1 5
(ww5 6
idww6 8
)ww8 9
;ww9 :
ifxx 
(xx 
	Promocionxx 
==xx 
nullxx !
)xx! "
{yy 
returnzz 
Taskzz 
.zz 

FromResultzz &
(zz& '
$numzz' (
)zz( )
;zz) *
}{{ 
_context}} 
.}} 
promociones}}  
.}}  !
Remove}}! '
(}}' (
	Promocion}}( 1
)}}1 2
;}}2 3
_context~~ 
.~~ 
SaveChanges~~  
(~~  !
)~~! "
;~~" #
return
ÄÄ 
Task
ÄÄ 
.
ÄÄ 

FromResult
ÄÄ "
(
ÄÄ" #
$num
ÄÄ# $
)
ÄÄ$ %
;
ÄÄ% &
}
ÅÅ 	
public
ÉÉ 
Task
ÉÉ 
<
ÉÉ 
	Promocion
ÉÉ 
>
ÉÉ 
GetPromocionById
ÉÉ /
(
ÉÉ/ 0
int
ÉÉ0 3
id
ÉÉ4 6
)
ÉÉ6 7
{
ÑÑ 	
var
ÖÖ 
us
ÖÖ 
=
ÖÖ 
_context
ÖÖ 
.
ÖÖ 
promociones
ÖÖ )
.
ÖÖ) *
Find
ÖÖ* .
(
ÖÖ. /
id
ÖÖ/ 1
)
ÖÖ1 2
;
ÖÖ2 3
if
áá 
(
áá 
us
áá 
!=
áá 
null
áá 
)
áá 
{
àà 
	Promocion
ââ 
tb_cli
ââ  
=
ââ! "
new
ââ# &
	Promocion
ââ' 0
{
ää 
id
ãã 
=
ãã 
us
ãã 
.
ãã 
Id
ãã 
,
ãã 
nombre
åå 
=
åå 
us
åå 
.
åå  
Nombre
åå  &
,
åå& '
descripcion
çç 
=
çç  !
us
çç" $
.
çç$ %
Descripcion
çç% 0
,
çç0 1
	fecInicio
éé 
=
éé 
us
éé  "
.
éé" #
	FecInicio
éé# ,
,
éé, -
fecFin
èè 
=
èè 
us
èè 
.
èè  
FecFin
èè  &
,
èè& '!
porcentajeDescuento
êê '
=
êê( )
us
êê* ,
.
êê, -!
PorcentajeDescuento
êê- @
,
êê@ A
estado
ëë 
=
ëë 
us
ëë 
.
ëë  
Estado
ëë  &
,
ëë& '
fecRegistro
íí 
=
íí  !
us
íí" $
.
íí$ %
FecRegistro
íí% 0
,
íí0 1
fecModificacion
ìì #
=
ìì$ %
DateTime
ìì& .
.
ìì. /
Now
ìì/ 2
}
îî 
;
îî 
return
ññ 
Task
ññ 
.
ññ 

FromResult
ññ &
(
ññ& '
tb_cli
ññ' -
)
ññ- .
;
ññ. /
}
óó 
else
òò 
return
ôô 
Task
ôô 
.
ôô 

FromResult
ôô &
<
ôô& '
	Promocion
ôô' 0
>
ôô0 1
(
ôô1 2
null
ôô2 6
)
ôô6 7
;
ôô7 8
}
öö 	
public
úú 
Task
úú 
<
úú 
	Promocion
úú 
>
úú %
GetPromocionByPromocion
úú 6
(
úú6 7
string
úú7 =
	promocion
úú> G
)
úúG H
{
ùù 	
try
ûû 
{
üü 
var
†† 
us
†† 
=
†† 
_context
†† !
.
††! "
promociones
††" -
.
††- .
Where
††. 3
(
††3 4
x
††4 5
=>
††6 8
x
††9 :
.
††: ;
Nombre
††; A
.
††A B
Trim
††B F
(
††F G
)
††G H
.
††H I
ToLower
††I P
(
††P Q
)
††Q R
.
††R S
Equals
††S Y
(
††Y Z
	promocion
††Z c
.
††c d
ToLower
††d k
(
††k l
)
††l m
)
††m n
)
††n o
.
††o p
FirstOrDefault
††p ~
(
††~ 
)†† Ä
;††Ä Å
if
¢¢ 
(
¢¢ 
us
¢¢ 
!=
¢¢ 
null
¢¢ 
)
¢¢ 
{
££ 
	Promocion
§§ 
tb_cli
§§ $
=
§§% &
new
§§' *
	Promocion
§§+ 4
{
•• 
id
¶¶ 
=
¶¶ 
us
¶¶ 
.
¶¶  
Id
¶¶  "
,
¶¶" #
nombre
ßß 
=
ßß  
us
ßß! #
.
ßß# $
Nombre
ßß$ *
,
ßß* +
descripcion
®® #
=
®®$ %
us
®®& (
.
®®( )
Descripcion
®®) 4
,
®®4 5
	fecInicio
©© !
=
©©" #
us
©©$ &
.
©©& '
	FecInicio
©©' 0
,
©©0 1
fecFin
™™ 
=
™™  
us
™™! #
.
™™# $
FecFin
™™$ *
,
™™* +!
porcentajeDescuento
´´ +
=
´´, -
us
´´. 0
.
´´0 1!
PorcentajeDescuento
´´1 D
,
´´D E
estado
¨¨ 
=
¨¨  
us
¨¨! #
.
¨¨# $
Estado
¨¨$ *
,
¨¨* +
fecRegistro
≠≠ #
=
≠≠$ %
us
≠≠& (
.
≠≠( )
FecRegistro
≠≠) 4
,
≠≠4 5
fecModificacion
ÆÆ '
=
ÆÆ( )
DateTime
ÆÆ* 2
.
ÆÆ2 3
Now
ÆÆ3 6
}
ØØ 
;
ØØ 
return
±± 
Task
±± 
.
±±  

FromResult
±±  *
(
±±* +
tb_cli
±±+ 1
)
±±1 2
;
±±2 3
}
≤≤ 
}
¥¥ 
catch
µµ 
(
µµ 
	Exception
µµ 
)
µµ 
{
∂∂ 
throw
∏∏ 
;
∏∏ 
}
ππ 
return
ªª 
Task
ªª 
.
ªª 

FromResult
ªª "
<
ªª" #
	Promocion
ªª# ,
>
ªª, -
(
ªª- .
null
ªª. 2
)
ªª2 3
;
ªª3 4
}
ΩΩ 	
public
øø 
Task
øø 
<
øø 
bool
øø 
>
øø !
AddPromocionDetalle
øø -
(
øø- .
PromocionDetalle
øø. >
us
øø? A
)
øøA B
{
¿¿ 	
bool
¡¡ 
result
¡¡ 
=
¡¡ 
false
¡¡ 
;
¡¡  "
tb_promocion_detalle
¬¬  
tb_cli
¬¬! '
=
¬¬( )
new
¬¬* -"
tb_promocion_detalle
¬¬. B
{
√√ 

IdProducto
ƒƒ 
=
ƒƒ 
us
ƒƒ 
.
ƒƒ  

idProducto
ƒƒ  *
,
ƒƒ* +
IdPromocion
≈≈ 
=
≈≈ 
us
≈≈  
.
≈≈  !
idPromocion
≈≈! ,
,
≈≈, -
Estado
∆∆ 
=
∆∆ 
true
∆∆ 
}
«« 
;
«« 
try
…… 
{
   
_context
ÀÀ 
.
ÀÀ  
promocionesDetalle
ÀÀ +
.
ÀÀ+ ,
Add
ÀÀ, /
(
ÀÀ/ 0
tb_cli
ÀÀ0 6
)
ÀÀ6 7
;
ÀÀ7 8
_context
ÃÃ 
.
ÃÃ 
SaveChanges
ÃÃ $
(
ÃÃ$ %
)
ÃÃ% &
;
ÃÃ& '
result
ŒŒ 
=
ŒŒ 
true
ŒŒ 
;
ŒŒ 
}
œœ 
catch
–– 
(
–– 
	Exception
–– 
)
–– 
{
—— 
}
““ 
return
‘‘ 
Task
‘‘ 
.
‘‘ 

FromResult
‘‘ "
(
‘‘" #
result
‘‘# )
)
‘‘) *
;
‘‘* +
}
’’ 	
public
◊◊ 
Task
◊◊ 
<
◊◊ 
bool
◊◊ 
>
◊◊ (
RemovePromocionDetalleTodo
◊◊ 4
(
◊◊4 5
int
◊◊5 8
idProm
◊◊9 ?
)
◊◊? @
{
ÿÿ 	
bool
ŸŸ 
result
ŸŸ 
=
ŸŸ 
false
ŸŸ 
;
ŸŸ  
try
€€ 
{
‹‹ 
var
›› 
detalle
›› 
=
›› 
_context
›› &
.
››& ' 
promocionesDetalle
››' 9
.
››9 :
Where
››: ?
(
››? @
x
››@ A
=>
››B D
x
››E F
.
››F G
IdPromocion
››G R
==
››S U
idProm
››V \
)
››\ ]
.
››] ^
ToList
››^ d
(
››d e
)
››e f
;
››f g
_context
ﬁﬁ 
.
ﬁﬁ  
promocionesDetalle
ﬁﬁ +
.
ﬁﬁ+ ,
RemoveRange
ﬁﬁ, 7
(
ﬁﬁ7 8
detalle
ﬁﬁ8 ?
)
ﬁﬁ? @
;
ﬁﬁ@ A
_context
ﬂﬂ 
.
ﬂﬂ 
SaveChanges
ﬂﬂ $
(
ﬂﬂ$ %
)
ﬂﬂ% &
;
ﬂﬂ& '
result
·· 
=
·· 
true
·· 
;
·· 
}
‚‚ 
catch
„„ 
(
„„ 
	Exception
„„ 
)
„„ 
{
‰‰ 
}
ÂÂ 
return
ÁÁ 
Task
ÁÁ 
.
ÁÁ 

FromResult
ÁÁ "
(
ÁÁ" #
result
ÁÁ# )
)
ÁÁ) *
;
ÁÁ* +
}
ËË 	
public
ÍÍ 
async
ÍÍ 
Task
ÍÍ 
<
ÍÍ 
List
ÍÍ 
<
ÍÍ 
int
ÍÍ "
>
ÍÍ" #
>
ÍÍ# $&
GetPromocionProductosIds
ÍÍ% =
(
ÍÍ= >
int
ÍÍ> A
idPromocion
ÍÍB M
)
ÍÍM N
{
ÎÎ 	
List
ÏÏ 
<
ÏÏ 
int
ÏÏ 
>
ÏÏ 
productosIds
ÏÏ "
=
ÏÏ# $
new
ÏÏ% (
List
ÏÏ) -
<
ÏÏ- .
int
ÏÏ. 1
>
ÏÏ1 2
(
ÏÏ2 3
)
ÏÏ3 4
;
ÏÏ4 5
try
ÓÓ 
{
ÔÔ 
var
 
result
 
=
 
await
 "
Task
# '
.
' (
Run
( +
(
+ ,
(
, -
)
- .
=>
/ 1
_context
2 :
.
: ; 
promocionesDetalle
; M
.
M N
Where
N S
(
S T
x
T U
=>
V X
x
Y Z
.
Z [
IdPromocion
[ f
==
g i
idPromocion
j u
)
u v
.
v w
Select
w }
(
} ~
y
~ 
=>Ä Ç
yÉ Ñ
.Ñ Ö

IdProductoÖ è
)è ê
.ê ë
ToListAsyncë ú
(ú ù
)ù û
)û ü
;ü †
foreach
ÚÚ 
(
ÚÚ 
var
ÚÚ 
us
ÚÚ 
in
ÚÚ  "
result
ÚÚ# )
)
ÚÚ) *
{
ÛÛ 
productosIds
ÙÙ  
.
ÙÙ  !
Add
ÙÙ! $
(
ÙÙ$ %
us
ÙÙ% '
)
ÙÙ' (
;
ÙÙ( )
}
ıı 
}
ˆˆ 
catch
˜˜ 
(
˜˜ 
	Exception
˜˜ 
)
˜˜ 
{
¯¯ 
}
˙˙ 
return
¸¸ 
productosIds
¸¸ 
;
¸¸  
}
˝˝ 	
}
˛˛ 
}ˇˇ ⁄n
aD:\Proyectos\NetCore\UPC_PI2_Backend\PremierBeef.Infrastructure\Repository\ProveedorRepository.cs
	namespace 	
PremierBeef
 
. 
Infrastructure $
.$ %

Repository% /
{ 
public		 

class		 
ProveedorRepository		 $
:		% & 
IProveedorRepository		' ;
{

 
private 
readonly 
PremierContext '
_context( 0
;0 1
public 
ProveedorRepository "
(" #
PremierContext# 1
context2 9
)9 :
{ 	
_context 
= 
context 
; 
} 	
public 
async 
Task 
< 
List 
< 
	Proveedor (
>( )
>) *
GetProveedores+ 9
(9 :
): ;
{ 	
List 
< 
	Proveedor 
> 
roles !
=" #
new$ '
List( ,
<, -
	Proveedor- 6
>6 7
(7 8
)8 9
;9 :
try 
{ 
var 
result 
= 
await "
Task# '
.' (
Run( +
(+ ,
(, -
)- .
=>/ 1
_context2 :
.: ;
proveedores; F
.F G
ToListAsyncG R
(R S
)S T
)T U
;U V
foreach 
( 
var 
us 
in  "
result# )
)) *
{ 
roles 
. 
Add 
( 
new !
	Proveedor" +
{ 
id 
= 
us 
.  
Id  "
," #
nombre 
=  
us! #
.# $
Nombre$ *
??+ -
$str. 0
,0 1
descripcion   #
=  $ %
us  & (
.  ( )
Descripcion  ) 4
??  5 7
$str  8 :
,  : ;
	direccion!! !
=!!" #
us!!$ &
.!!& '
	Direccion!!' 0
??!!1 3
$str!!4 6
,!!6 7
telefono""  
=""! "
us""# %
.""% &
Telefono""& .
??""/ 1
$str""2 4
,""4 5
idTipoDocumento## '
=##( )
us##* ,
.##, -
IdTipoDocumento##- <
,##< =
numeroDocumento$$ '
=$$( )
us$$* ,
.$$, -
NumeroDocumento$$- <
}%% 
)%% 
;%% 
}&& 
}'' 
catch(( 
((( 
	Exception(( 
)(( 
{)) 
}++ 
return.. 
roles.. 
;.. 
}// 	
public11 
Task11 
<11 
int11 
>11 
AddProveedor11 %
(11% &
	Proveedor11& /
us110 2
)112 3
{22 	
int33 
newId33 
=33 
$num33 
;33 
tb_proveedor44 
tb_cli44 
=44  !
new44" %
tb_proveedor44& 2
{55 
Nombre66 
=66 
us66 
.66 
nombre66 "
,66" #
Descripcion77 
=77 
us77  
.77  !
descripcion77! ,
,77, -
	Direccion88 
=88 
us88 
.88 
	direccion88 (
,88( )
Telefono99 
=99 
us99 
.99 
telefono99 &
,99& '
IdTipoDocumento:: 
=::  !
us::" $
.::$ %
idTipoDocumento::% 4
,::4 5
NumeroDocumento;; 
=;;  !
us;;" $
.;;$ %
numeroDocumento;;% 4
,;;4 5
FecRegistro<< 
=<< 
us<<  
.<<  !
fecRegistro<<! ,
,<<, -
FecModificacion== 
===  !
us==" $
.==$ %
fecModificacion==% 4
}>> 
;>> 
try@@ 
{AA 
_contextBB 
.BB 
proveedoresBB $
.BB$ %
AddBB% (
(BB( )
tb_cliBB) /
)BB/ 0
;BB0 1
_contextCC 
.CC 
SaveChangesCC $
(CC$ %
)CC% &
;CC& '
newIdEE 
=EE 
tb_cliEE 
.EE 
IdEE !
;EE! "
}FF 
catchGG 
(GG 
	ExceptionGG 
)GG 
{HH 
tb_cliII 
.II 
IdII 
=II 
$numII 
;II 
}JJ 
returnLL 
TaskLL 
.LL 

FromResultLL "
(LL" #
newIdLL# (
)LL( )
;LL) *
}MM 	
publicOO 
TaskOO 
<OO 
boolOO 
>OO 
UpdateProveedorOO )
(OO) *
	ProveedorOO* 3
provOO4 8
)OO8 9
{PP 	
boolQQ 
resultQQ 
=QQ 
falseQQ 
;QQ  
trySS 
{TT 
varUU 
	proveedorUU 
=UU 
_contextUU  (
.UU( )
proveedoresUU) 4
.UU4 5
FindUU5 9
(UU9 :
provUU: >
.UU> ?
idUU? A
)UUA B
;UUB C
ifWW 
(WW 
	proveedorWW 
!=WW  
nullWW! %
)WW% &
{XX 
	proveedorYY 
.YY 
IdYY  
=YY! "
provYY# '
.YY' (
idYY( *
;YY* +
	proveedorZZ 
.ZZ 
NombreZZ $
=ZZ% &
provZZ' +
.ZZ+ ,
nombreZZ, 2
;ZZ2 3
	proveedor[[ 
.[[ 
Descripcion[[ )
=[[* +
prov[[, 0
.[[0 1
descripcion[[1 <
;[[< =
	proveedor\\ 
.\\ 
	Direccion\\ '
=\\( )
prov\\* .
.\\. /
	direccion\\/ 8
;\\8 9
	proveedor]] 
.]] 
Telefono]] &
=]]' (
prov]]) -
.]]- .
telefono]]. 6
;]]6 7
	proveedor^^ 
.^^ 
IdTipoDocumento^^ -
=^^. /
prov^^0 4
.^^4 5
idTipoDocumento^^5 D
;^^D E
	proveedor__ 
.__ 
NumeroDocumento__ -
=__. /
prov__0 4
.__4 5
numeroDocumento__5 D
;__D E
	proveedor`` 
.`` 
FecRegistro`` )
=``* +
	proveedor``, 5
.``5 6
FecRegistro``6 A
;``A B
	proveedoraa 
.aa 
FecModificacionaa -
=aa. /
DateTimeaa0 8
.aa8 9
Nowaa9 <
;aa< =
_contextcc 
.cc 
proveedorescc (
.cc( )
Attachcc) /
(cc/ 0
	proveedorcc0 9
)cc9 :
;cc: ;
_contextee 
.ee 
proveedoresee (
.ee( )
Updateee) /
(ee/ 0
	proveedoree0 9
)ee9 :
;ee: ;
vargg 
sdsgg 
=gg 
_contextgg &
.gg& '
SaveChangesgg' 2
(gg2 3
)gg3 4
;gg4 5
resultii 
=ii 
trueii !
;ii! "
}jj 
}kk 
catchll 
(ll 
	Exceptionll 
)ll 
{mm 
}oo 
returnqq 
Taskqq 
.qq 

FromResultqq "
(qq" #
resultqq# )
)qq) *
;qq* +
}rr 	
publictt 
Tasktt 
<tt 
inttt 
>tt 
RemoveProveedortt (
(tt( )
inttt) ,
idtt- /
)tt/ 0
{uu 	
varvv 
	Proveedorvv 
=vv 
_contextvv $
.vv$ %
proveedoresvv% 0
.vv0 1
Findvv1 5
(vv5 6
idvv6 8
)vv8 9
;vv9 :
ifww 
(ww 
	Proveedorww 
==ww 
nullww !
)ww! "
{xx 
returnyy 
Taskyy 
.yy 

FromResultyy &
(yy& '
$numyy' (
)yy( )
;yy) *
}zz 
_context|| 
.|| 
proveedores||  
.||  !
Remove||! '
(||' (
	Proveedor||( 1
)||1 2
;||2 3
_context}} 
.}} 
SaveChanges}}  
(}}  !
)}}! "
;}}" #
return 
Task 
. 

FromResult "
(" #
$num# $
)$ %
;% &
}
ÄÄ 	
public
ÇÇ 
Task
ÇÇ 
<
ÇÇ 
	Proveedor
ÇÇ 
>
ÇÇ 
GetProveedorById
ÇÇ /
(
ÇÇ/ 0
int
ÇÇ0 3
id
ÇÇ4 6
)
ÇÇ6 7
{
ÉÉ 	
var
ÑÑ 
us
ÑÑ 
=
ÑÑ 
_context
ÑÑ 
.
ÑÑ 
proveedores
ÑÑ )
.
ÑÑ) *
Find
ÑÑ* .
(
ÑÑ. /
id
ÑÑ/ 1
)
ÑÑ1 2
;
ÑÑ2 3
if
ÜÜ 
(
ÜÜ 
us
ÜÜ 
!=
ÜÜ 
null
ÜÜ 
)
ÜÜ 
{
áá 
	Proveedor
àà 
tb_cli
àà  
=
àà! "
new
àà# &
	Proveedor
àà' 0
{
ââ 
id
ää 
=
ää 
us
ää 
.
ää 
Id
ää 
,
ää 
nombre
ãã 
=
ãã 
us
ãã 
.
ãã  
Nombre
ãã  &
,
ãã& '
descripcion
åå 
=
åå  !
us
åå" $
.
åå$ %
Descripcion
åå% 0
,
åå0 1
	direccion
çç 
=
çç 
us
çç  "
.
çç" #
	Direccion
çç# ,
,
çç, -
telefono
éé 
=
éé 
us
éé !
.
éé! "
Telefono
éé" *
,
éé* +
idTipoDocumento
èè #
=
èè$ %
us
èè& (
.
èè( )
IdTipoDocumento
èè) 8
,
èè8 9
numeroDocumento
êê #
=
êê$ %
us
êê& (
.
êê( )
NumeroDocumento
êê) 8
,
êê8 9
fecRegistro
ëë 
=
ëë  !
us
ëë" $
.
ëë$ %
FecRegistro
ëë% 0
,
ëë0 1
fecModificacion
íí #
=
íí$ %
us
íí& (
.
íí( )
FecModificacion
íí) 8
}
ìì 
;
ìì 
return
ïï 
Task
ïï 
.
ïï 

FromResult
ïï &
(
ïï& '
tb_cli
ïï' -
)
ïï- .
;
ïï. /
}
ññ 
else
óó 
return
òò 
Task
òò 
.
òò 

FromResult
òò &
<
òò& '
	Proveedor
òò' 0
>
òò0 1
(
òò1 2
null
òò2 6
)
òò6 7
;
òò7 8
}
ôô 	
public
õõ 
Task
õõ 
<
õõ 
	Proveedor
õõ 
>
õõ %
GetProveedorByProveedor
õõ 6
(
õõ6 7
string
õõ7 =
	Proveedor
õõ> G
)
õõG H
{
úú 	
try
ùù 
{
ûû 
var
üü 
us
üü 
=
üü 
_context
üü !
.
üü! "
proveedores
üü" -
.
üü- .
Where
üü. 3
(
üü3 4
x
üü4 5
=>
üü6 8
x
üü9 :
.
üü: ;
Nombre
üü; A
.
üüA B
Trim
üüB F
(
üüF G
)
üüG H
.
üüH I
ToLower
üüI P
(
üüP Q
)
üüQ R
.
üüR S
Equals
üüS Y
(
üüY Z
	Proveedor
üüZ c
.
üüc d
ToLower
üüd k
(
üük l
)
üül m
)
üüm n
)
üün o
.
üüo p
FirstOrDefault
üüp ~
(
üü~ 
)üü Ä
;üüÄ Å
if
°° 
(
°° 
us
°° 
!=
°° 
null
°° 
)
°° 
{
¢¢ 
	Proveedor
££ 
tb_cli
££ $
=
££% &
new
££' *
	Proveedor
££+ 4
{
§§ 
id
•• 
=
•• 
us
•• 
.
••  
Id
••  "
,
••" #
nombre
¶¶ 
=
¶¶  
us
¶¶! #
.
¶¶# $
Nombre
¶¶$ *
,
¶¶* +
descripcion
ßß #
=
ßß$ %
us
ßß& (
.
ßß( )
Descripcion
ßß) 4
,
ßß4 5
	direccion
®® !
=
®®" #
us
®®$ &
.
®®& '
	Direccion
®®' 0
,
®®0 1
telefono
©©  
=
©©! "
us
©©# %
.
©©% &
Telefono
©©& .
,
©©. /
idTipoDocumento
™™ '
=
™™( )
us
™™* ,
.
™™, -
IdTipoDocumento
™™- <
,
™™< =
numeroDocumento
´´ '
=
´´( )
us
´´* ,
.
´´, -
NumeroDocumento
´´- <
,
´´< =
fecRegistro
¨¨ #
=
¨¨$ %
us
¨¨& (
.
¨¨( )
FecRegistro
¨¨) 4
,
¨¨4 5
fecModificacion
≠≠ '
=
≠≠( )
us
≠≠* ,
.
≠≠, -
FecModificacion
≠≠- <
}
ÆÆ 
;
ÆÆ 
return
∞∞ 
Task
∞∞ 
.
∞∞  

FromResult
∞∞  *
(
∞∞* +
tb_cli
∞∞+ 1
)
∞∞1 2
;
∞∞2 3
}
±± 
}
≤≤ 
catch
≥≥ 
(
≥≥ 
	Exception
≥≥ 
)
≥≥ 
{
¥¥ 
throw
µµ 
;
µµ 
}
∂∂ 
return
∏∏ 
Task
∏∏ 
.
∏∏ 

FromResult
∏∏ "
<
∏∏" #
	Proveedor
∏∏# ,
>
∏∏, -
(
∏∏- .
null
∏∏. 2
)
∏∏2 3
;
∏∏3 4
}
ππ 	
}
∫∫ 
}ªª §Å
_D:\Proyectos\NetCore\UPC_PI2_Backend\PremierBeef.Infrastructure\Repository\ReclamoRepository.cs
	namespace 	
PremierBeef
 
. 
Infrastructure $
.$ %

Repository% /
{		 
public

 

class

 
ReclamoRepository

 "
:

# $
IReclamoRepository

% 7
{ 
private 
readonly 
PremierContext '
_context( 0
;0 1
public 
ReclamoRepository  
(  !
PremierContext! /
context0 7
)7 8
{ 	
_context 
= 
context 
; 
} 	
public 
Task 
< 
int 
> 

AddReclamo #
(# $
Reclamo$ +
us, .
). /
{ 	
int 
newId 
= 
$num 
; 

tb_reclamo 
tb_cli 
= 
new  #

tb_reclamo$ .
{ 
Detalle 
= 
us 
. 
detalle $
,$ %
	IdUsuario 
= 
us 
. 
	idUsuario (
,( )
IdPedido 
= 
us 
. 
idPedido &
,& '
IdTipoReclamo 
= 
us  "
." #
idTipoReclamo# 0
,0 1
IdUsuarioRespuesta "
=# $
us% '
.' (
idUsuarioRespuesta( :
,: ;
	Respuesta 
= 
us 
. 
	respuesta (
,( )
FecRegistro 
= 
DateTime &
.& '
Now' *
,* +
FecModificacion 
=  !
us" $
.$ %
fecModificacion% 4
,4 5
Estado   
=   
true   
,   
EstadoReclamo!! 
=!! 
us!!  "
.!!" #
estadoReclamo!!# 0
,!!0 1

FecReclamo"" 
="" 
DateTime"" %
.""% &
Now""& )
}## 
;## 
try%% 
{&& 
_context'' 
.'' 
reclamos'' !
.''! "
Add''" %
(''% &
tb_cli''& ,
)'', -
;''- .
_context(( 
.(( 
SaveChanges(( $
((($ %
)((% &
;((& '
newId** 
=** 
tb_cli** 
.** 
Id** !
;**! "
}++ 
catch,, 
(,, 
	Exception,, 
),, 
{-- 
tb_cli.. 
... 
Id.. 
=.. 
$num.. 
;.. 
}// 
return11 
Task11 
.11 

FromResult11 "
(11" #
newId11# (
)11( )
;11) *
}22 	
public44 
Task44 
<44 
bool44 
>44 
UpdateReclamo44 '
(44' (
Reclamo44( /
us440 2
)442 3
{55 	
bool66 
result66 
=66 
false66 
;66  
try88 
{99 
var:: 
reclamo:: 
=:: 
_context:: &
.::& '
reclamos::' /
.::/ 0
Find::0 4
(::4 5
us::5 7
.::7 8
id::8 :
)::: ;
;::; <
if<< 
(<< 
reclamo<< 
!=<< 
null<< "
)<<" #
{== 
reclamo>> 
.>> 
Detalle>> #
=>>$ %
us>>& (
.>>( )
detalle>>) 0
;>>0 1
reclamo?? 
.?? 
IdTipoReclamo?? )
=??* +
us??, .
.??. /
idTipoReclamo??/ <
;??< =
reclamo@@ 
.@@ 
	Respuesta@@ %
=@@& '
us@@( *
.@@* +
	respuesta@@+ 4
;@@4 5
reclamoAA 
.AA 
IdUsuarioRespuestaAA .
=AA/ 0
usAA1 3
.AA3 4
idUsuarioRespuestaAA4 F
;AAF G
reclamoBB 
.BB 
FecModificacionBB +
=BB, -
DateTimeBB. 6
.BB6 7
NowBB7 :
;BB: ;
reclamoCC 
.CC 
FecRespuestaCC (
=CC) *
DateTimeCC+ 3
.CC3 4
NowCC4 7
;CC7 8
reclamoDD 
.DD 
EstadoDD "
=DD# $
reclamoDD% ,
.DD, -
EstadoDD- 3
;DD3 4
reclamoEE 
.EE 
EstadoReclamoEE )
=EE* +
usEE, .
.EE. /
estadoReclamoEE/ <
;EE< =
_contextGG 
.GG 
reclamosGG %
.GG% &
AttachGG& ,
(GG, -
reclamoGG- 4
)GG4 5
;GG5 6
_contextHH 
.HH 
EntryHH "
(HH" #
reclamoHH# *
)HH* +
.HH+ ,
StateHH, 1
=HH2 3
EntityStateHH4 ?
.HH? @
ModifiedHH@ H
;HHH I
_contextII 
.II 
EntryII "
(II" #
reclamoII# *
)II* +
.II+ ,
PropertyII, 4
(II4 5
xII5 6
=>II7 9
xII: ;
.II; <
IdII< >
)II> ?
.II? @

IsModifiedII@ J
=IIK L
falseIIM R
;IIR S
_contextJJ 
.JJ 
EntryJJ "
(JJ" #
reclamoJJ# *
)JJ* +
.JJ+ ,
PropertyJJ, 4
(JJ4 5
XJJ5 6
=>JJ7 9
XJJ: ;
.JJ; <
FecRegistroJJ< G
)JJG H
.JJH I

IsModifiedJJI S
=JJT U
falseJJV [
;JJ[ \
_contextKK 
.KK 
EntryKK "
(KK" #
reclamoKK# *
)KK* +
.KK+ ,
PropertyKK, 4
(KK4 5
XKK5 6
=>KK7 9
XKK: ;
.KK; <

FecReclamoKK< F
)KKF G
.KKG H

IsModifiedKKH R
=KKS T
falseKKU Z
;KKZ [
_contextMM 
.MM 
EntryMM "
(MM" #
reclamoMM# *
)MM* +
.MM+ ,
StateMM, 1
=MM2 3
EntityStateMM4 ?
.MM? @
DetachedMM@ H
;MMH I
_contextOO 
.OO 
reclamosOO %
.OO% &
UpdateOO& ,
(OO, -
reclamoOO- 4
)OO4 5
;OO5 6
varQQ 
sdsQQ 
=QQ 
_contextQQ &
.QQ& '
SaveChangesQQ' 2
(QQ2 3
)QQ3 4
;QQ4 5
resultSS 
=SS 
trueSS !
;SS! "
}TT 
}UU 
catchVV 
(VV 
	ExceptionVV 
)VV 
{WW 
}YY 
return[[ 
Task[[ 
.[[ 

FromResult[[ "
([[" #
result[[# )
)[[) *
;[[* +
}\\ 	
public^^ 
Task^^ 
<^^ 
bool^^ 
>^^ 
RemoveReclamo^^ '
(^^' (
int^^( +
id^^, .
)^^. /
{__ 	
bool`` 
result`` 
=`` 
false`` 
;``  
trybb 
{cc 
vardd 
Reclamodd 
=dd 
_contextdd &
.dd& '
reclamosdd' /
.dd/ 0
Finddd0 4
(dd4 5
iddd5 7
)dd7 8
;dd8 9
ifee 
(ee 
Reclamoee 
==ee 
nullee #
)ee# $
returnff 
Taskff 
.ff  

FromResultff  *
(ff* +
falseff+ 0
)ff0 1
;ff1 2
elsegg 
{hh 
_contextii 
.ii 
reclamosii %
.ii% &
Removeii& ,
(ii, -
Reclamoii- 4
)ii4 5
;ii5 6
_contextjj 
.jj 
SaveChangesjj (
(jj( )
)jj) *
;jj* +
resultll 
=ll 
truell !
;ll! "
}mm 
}nn 
catchoo 
(oo 
	Exceptionoo 
)oo 
{pp 
}rr 
returntt 
Tasktt 
.tt 

FromResulttt "
(tt" #
resulttt# )
)tt) *
;tt* +
}uu 	
publicww 
Taskww 
<ww 
Reclamoww 
>ww 
GetReclamoByIdww +
(ww+ ,
intww, /
idww0 2
)ww2 3
{xx 	
varyy 
usyy 
=yy 
_contextyy 
.yy 
reclamosyy &
.yy& '
Findyy' +
(yy+ ,
idyy, .
)yy. /
;yy/ 0
if{{ 
({{ 
us{{ 
!={{ 
null{{ 
){{ 
{|| 
Reclamo}} 
tb_cli}} 
=}}  
new}}! $
Reclamo}}% ,
{~~ 
id 
= 
us 
. 
Id 
, 
detalle
ÄÄ 
=
ÄÄ 
us
ÄÄ  
.
ÄÄ  !
Detalle
ÄÄ! (
,
ÄÄ( )
	idUsuario
ÅÅ 
=
ÅÅ 
us
ÅÅ  "
.
ÅÅ" #
	IdUsuario
ÅÅ# ,
,
ÅÅ, -
idPedido
ÇÇ 
=
ÇÇ 
us
ÇÇ !
.
ÇÇ! "
IdPedido
ÇÇ" *
,
ÇÇ* +
idTipoReclamo
ÉÉ !
=
ÉÉ" #
us
ÉÉ$ &
.
ÉÉ& '
IdTipoReclamo
ÉÉ' 4
,
ÉÉ4 5 
idUsuarioRespuesta
ÑÑ &
=
ÑÑ' (
us
ÑÑ) +
.
ÑÑ+ , 
IdUsuarioRespuesta
ÑÑ, >
,
ÑÑ> ?
	respuesta
ÖÖ 
=
ÖÖ 
us
ÖÖ  "
.
ÖÖ" #
	Respuesta
ÖÖ# ,
,
ÖÖ, -
fecRegistro
ÜÜ 
=
ÜÜ  !
us
ÜÜ" $
.
ÜÜ$ %
FecRegistro
ÜÜ% 0
,
ÜÜ0 1
fecModificacion
áá #
=
áá$ %
us
áá& (
.
áá( )
FecModificacion
áá) 8
,
áá8 9

fecReclamo
àà 
=
àà  
us
àà! #
.
àà# $

FecReclamo
àà$ .
,
àà. /
fecRespuesta
ââ  
=
ââ! "
us
ââ# %
.
ââ% &
FecRespuesta
ââ& 2
,
ââ2 3
estado
ää 
=
ää 
us
ää 
.
ää  
Estado
ää  &
,
ää& '
estadoReclamo
ãã !
=
ãã" #
us
ãã$ &
.
ãã& '
EstadoReclamo
ãã' 4
}
åå 
;
åå 
return
éé 
Task
éé 
.
éé 

FromResult
éé &
(
éé& '
tb_cli
éé' -
)
éé- .
;
éé. /
}
èè 
else
êê 
return
ëë 
Task
ëë 
.
ëë 

FromResult
ëë &
<
ëë& '
Reclamo
ëë' .
>
ëë. /
(
ëë/ 0
null
ëë0 4
)
ëë4 5
;
ëë5 6
}
íí 	
public
îî 
async
îî 
Task
îî 
<
îî 
List
îî 
<
îî 
Reclamo
îî &
>
îî& '
>
îî' (
GetReclamos
îî) 4
(
îî4 5
)
îî5 6
{
ïï 	
List
ññ 
<
ññ 
Reclamo
ññ 
>
ññ 
reclamos
ññ "
=
ññ# $
new
ññ% (
List
ññ) -
<
ññ- .
Reclamo
ññ. 5
>
ññ5 6
(
ññ6 7
)
ññ7 8
;
ññ8 9
try
òò 
{
ôô 
reclamos
öö 
=
öö 
await
öö  
Task
öö! %
.
öö% &
Run
öö& )
(
öö) *
(
öö* +
)
öö+ ,
=>
öö- /
_context
öö0 8
.
öö8 9
reclamos
öö9 A
.
õõ, -
Join
õõ- 1
(
õõ1 2
_context
õõ2 :
.
õõ: ;
reclamoTipos
õõ; G
,
õõG H
ai
õõI K
=>
õõL N
ai
õõO Q
.
õõQ R
IdTipoReclamo
õõR _
,
õõ_ `
al
úú2 4
=>
úú5 7
al
úú8 :
.
úú: ;
Id
úú; =
,
úú= >
(
úú? @
ai
úú@ B
,
úúB C
al
úúD F
)
úúF G
=>
úúH J
new
úúK N
{
ùù2 3
id
ûû6 8
=
ûû9 :
ai
ûû; =
.
ûû= >
Id
ûû> @
,
ûû@ A
detalle
üü6 =
=
üü> ?
ai
üü@ B
.
üüB C
Detalle
üüC J
,
üüJ K
	idUsuario
††6 ?
=
††@ A
ai
††B D
.
††D E
	IdUsuario
††E N
,
††N O
idPedido
°°6 >
=
°°? @
ai
°°A C
.
°°C D
IdPedido
°°D L
,
°°L M
idTipoReclamo
¢¢6 C
=
¢¢D E
ai
¢¢F H
.
¢¢H I
IdTipoReclamo
¢¢I V
,
¢¢V W 
idUsuarioRespuesta
££6 H
=
££I J
ai
££K M
.
££M N 
IdUsuarioRespuesta
££N `
,
££` a
	respuesta
§§6 ?
=
§§@ A
ai
§§B D
.
§§D E
	Respuesta
§§E N
,
§§N O
fecRegistro
••6 A
=
••B C
ai
••D F
.
••F G
FecRegistro
••G R
,
••R S
fecModificacion
¶¶6 E
=
¶¶F G
ai
¶¶H J
.
¶¶J K
FecModificacion
¶¶K Z
,
¶¶Z [

fecReclamo
ßß6 @
=
ßßA B
ai
ßßC E
.
ßßE F

FecReclamo
ßßF P
,
ßßP Q
fecRespuesta
®®6 B
=
®®C D
ai
®®E G
.
®®G H
FecRespuesta
®®H T
,
®®T U
estado
©©6 <
=
©©= >
ai
©©? A
.
©©A B
Estado
©©B H
,
©©H I
estadoReclamo
™™6 C
=
™™D E
ai
™™F H
.
™™H I
EstadoReclamo
™™I V
,
™™V W
tipoReclamo
´´6 A
=
´´B C
al
´´D F
.
´´F G
Nombre
´´G M
}
¨¨2 3
)
¨¨3 4
.
¨¨4 5
Select
¨¨5 ;
(
¨¨; <
x
¨¨< =
=>
¨¨> @
new
¨¨A D
Reclamo
¨¨E L
(
¨¨L M
)
¨¨M N
{
≠≠4 5
id
ÆÆ6 8
=
ÆÆ9 :
x
ÆÆ; <
.
ÆÆ< =
id
ÆÆ= ?
,
ÆÆ? @
detalle
ØØ6 =
=
ØØ> ?
x
ØØ@ A
.
ØØA B
detalle
ØØB I
,
ØØI J
	idUsuario
∞∞6 ?
=
∞∞@ A
x
∞∞B C
.
∞∞C D
	idUsuario
∞∞D M
,
∞∞M N
idPedido
±±6 >
=
±±? @
x
±±A B
.
±±B C
idPedido
±±C K
,
±±K L
idTipoReclamo
≤≤6 C
=
≤≤D E
x
≤≤F G
.
≤≤G H
idTipoReclamo
≤≤H U
,
≤≤U V 
idUsuarioRespuesta
≥≥6 H
=
≥≥I J
x
≥≥K L
.
≥≥L M 
idUsuarioRespuesta
≥≥M _
,
≥≥_ `
	respuesta
¥¥6 ?
=
¥¥@ A
x
¥¥B C
.
¥¥C D
	respuesta
¥¥D M
,
¥¥M N
fecRegistro
µµ6 A
=
µµB C
x
µµD E
.
µµE F
fecRegistro
µµF Q
,
µµQ R
fecModificacion
∂∂6 E
=
∂∂F G
x
∂∂H I
.
∂∂I J
fecModificacion
∂∂J Y
,
∂∂Y Z

fecReclamo
∑∑6 @
=
∑∑A B
x
∑∑C D
.
∑∑D E

fecReclamo
∑∑E O
,
∑∑O P
fecRespuesta
∏∏6 B
=
∏∏C D
x
∏∏E F
.
∏∏F G
fecRespuesta
∏∏G S
,
∏∏S T
estado
ππ6 <
=
ππ= >
x
ππ? @
.
ππ@ A
estado
ππA G
,
ππG H
estadoReclamo
∫∫6 C
=
∫∫D E
x
∫∫F G
.
∫∫G H
estadoReclamo
∫∫H U
,
∫∫U V
tipoReclamo
ªª6 A
=
ªªB C
x
ªªD E
.
ªªE F
tipoReclamo
ªªF Q
}
ºº2 3
)
ºº3 4
.
ΩΩ, -
ToList
ΩΩ- 3
(
ΩΩ3 4
)
ΩΩ4 5
)
ΩΩ5 6
;
ΩΩ6 7
}
ŸŸ 
catch
⁄⁄ 
(
⁄⁄ 
	Exception
⁄⁄ 
)
⁄⁄ 
{
€€ 
}
›› 
return
‡‡ 
reclamos
‡‡ 
;
‡‡ 
}
·· 	
}
‚‚ 
}„„ Ì
cD:\Proyectos\NetCore\UPC_PI2_Backend\PremierBeef.Infrastructure\Repository\ReclamoTipoRepository.cs
	namespace 	
PremierBeef
 
. 
Infrastructure $
.$ %

Repository% /
{ 
public 

class !
ReclamoTipoRepository &
:' ("
IReclamoTipoRepository) ?
{		 
private

 
readonly

 
PremierContext

 '
_context

( 0
;

0 1
public !
ReclamoTipoRepository $
($ %
PremierContext% 3
context4 ;
); <
{ 	
_context 
= 
context 
; 
} 	
public 
async 
Task 
< 
List 
< 
ReclamoTipo *
>* +
>+ ,
GetReclamoTipos- <
(< =
)= >
{ 	
List 
< 
ReclamoTipo 
> 
reclamoTipos *
=+ ,
new- 0
List1 5
<5 6
ReclamoTipo6 A
>A B
(B C
)C D
;D E
try 
{ 
var 
result 
= 
await "
Task# '
.' (
Run( +
(+ ,
(, -
)- .
=>/ 1
_context2 :
.: ;
reclamoTipos; G
.G H
WhereH M
(M N
xN O
=>P R
xS T
.T U
EstadoU [
)[ \
.\ ]
ToListAsync] h
(h i
)i j
)j k
;k l
foreach 
( 
var 
us 
in  "
result# )
)) *
{ 
reclamoTipos  
.  !
Add! $
($ %
new% (
ReclamoTipo) 4
{ 
id 
= 
us 
.  
Id  "
," #
nombre 
=  
us! #
.# $
Nombre$ *
,* +
descripcion #
=$ %
us& (
.( )
Descripcion) 4
,4 5
estado   
=    
us  ! #
.  # $
Estado  $ *
}!! 
)!! 
;!! 
}"" 
}## 
catch$$ 
($$ 
	Exception$$ 
)$$ 
{%% 
}'' 
return** 
reclamoTipos** 
;**  
}++ 	
},, 
}-- √ë
_D:\Proyectos\NetCore\UPC_PI2_Backend\PremierBeef.Infrastructure\Repository\ReporteRepository.cs
	namespace 	
PremierBeef
 
. 
Infrastructure $
.$ %

Repository% /
{ 
public		 

class		 
ReporteRepository		 "
:		# $
IReporteRepository		% 7
{

 
private 
readonly 
PremierContext '
_context( 0
;0 1
public 
ReporteRepository  
(  !
PremierContext! /
context0 7
)7 8
{ 	
_context 
= 
context 
; 
} 	
public 
Task 
< 
List 
< 
ReporteVentas &
>& '
>' (
GetReporteVentas) 9
(9 :
FiltroReporte: G
filtroH N
)N O
{ 	
List 
< 
ReporteVentas 
> 
reporte  '
=( )
new* -
List. 2
<2 3
ReporteVentas3 @
>@ A
(A B
)B C
;C D
try 
{ 
var 
result 
= 
_context %
.% & 
dbo_GetReporteVentas& :
.: ;

FromSqlRaw; E
(E F
$strF o
,o p
filtroq w
.w x
	fecInicio	x Å
,
Å Ç
filtro
É â
.
â ä
fecFin
ä ê
,
ê ë
filtro
í ò
.
ò ô
idPedido
ô °
)
° ¢
.
¢ £
ToList
£ ©
(
© ™
)
™ ´
;
´ ¨
if 
( 
result 
!= 
null "
)" #
{ 
foreach 
( 
var  
us! #
in$ &
result' -
)- .
{ 
reporte 
.  
Add  #
(# $
new$ '
ReporteVentas( 5
{ 
id   
=    
us  ! #
.  # $
Id  $ &
,  & '
cliente!! #
=!!$ %
us!!& (
.!!( )
Cliente!!) 0
,!!0 1
tipo_documento"" *
=""+ ,
us""- /
.""/ 0
Tipo_documento""0 >
,""> ?
	documento## %
=##& '
us##( *
.##* +
	Documento##+ 4
,##4 5
fecha_emision$$ )
=$$* +
us$$, .
.$$. /
Fecha_emision$$/ <
,$$< =
tipo_comprobante%% ,
=%%- .
us%%/ 1
.%%1 2
Tipo_comprobante%%2 B
,%%B C
serie_comprobante&& -
=&&. /
us&&0 2
.&&2 3
Serie_comprobante&&3 D
,&&D E
importe_grabado'' +
='', -
us''. 0
.''0 1
Importe_grabado''1 @
,''@ A
importe_igv(( '
=((( )
us((* ,
.((, -
Importe_igv((- 8
,((8 9
importe_total)) )
=))* +
us)), .
.)). /
Importe_total))/ <
}** 
)** 
;** 
}++ 
}-- 
}.. 
catch// 
(// 
	Exception// 
)// 
{00 
reporte11 
=11 
new11 
List11 "
<11" #
ReporteVentas11# 0
>110 1
(111 2
)112 3
;113 4
}22 
return44 
Task44 
.44 

FromResult44 "
(44" #
reporte44# *
)44* +
;44+ ,
}55 	
public77 
Task77 
<77 
List77 
<77 
ReportePedidos77 '
>77' (
>77( )
GetReportePedidos77* ;
(77; <
FiltroReporte77< I
filtro77J P
)77P Q
{88 	
List99 
<99 
ReportePedidos99 
>99  
reporte99! (
=99) *
new99+ .
List99/ 3
<993 4
ReportePedidos994 B
>99B C
(99C D
)99D E
;99E F
try:: 
{;; 
var<< 
result<< 
=<< 
_context<< %
.<<% &"
dbo_GetReporteReclamos<<& <
.<<< =

FromSqlRaw<<= G
(<<G H
$str<<H s
,<<s t
filtro<<u {
.<<{ |
	fecInicio	<<| Ö
,
<<Ö Ü
filtro
<<á ç
.
<<ç é
fecFin
<<é î
,
<<î ï
filtro
<<ñ ú
.
<<ú ù
idPedido
<<ù •
)
<<• ¶
.
<<¶ ß
ToList
<<ß ≠
(
<<≠ Æ
)
<<Æ Ø
;
<<Ø ∞
if?? 
(?? 
result?? 
!=?? 
null?? "
)??" #
{@@ 
foreachAA 
(AA 
varAA  
usAA! #
inAA$ &
resultAA' -
)AA- .
{BB 
reporteCC 
.CC  
AddCC  #
(CC# $
newCC$ '
ReportePedidosCC( 6
{DD 
idEE 
=EE  
usEE! #
.EE# $
IdEE$ &
,EE& '
detalleFF #
=FF$ %
usFF& (
.FF( )
DetalleFF) 0
,FF0 1
usuarioRegistroGG +
=GG, -
usGG. 0
.GG0 1
UsuarioRegistroGG1 @
,GG@ A#
usuarioRegistroCompletoHH 3
=HH4 5
usHH6 8
.HH8 9#
UsuarioRegistroCompletoHH9 P
,HHP Q
fechaReclamoII (
=II) *
usII+ -
.II- .
FechaReclamoII. :
,II: ;
tipoReclamoJJ '
=JJ( )
usJJ* ,
.JJ, -
TipoReclamoJJ- 8
,JJ8 9
pedidoKK "
=KK# $
usKK% '
.KK' (
PedidoKK( .
,KK. /
clienteLL #
=LL$ %
usLL& (
.LL( )
ClienteLL) 0
,LL0 1
	respuestaMM %
=MM& '
usMM( *
.MM* +
	RespuestaMM+ 4
,MM4 5
usuarioRespuestaNN ,
=NN- .
usNN/ 1
.NN1 2
UsuarioRespuestaNN2 B
,NNB C$
usuarioRespuestaCompletoOO 4
=OO5 6
usOO7 9
.OO9 :$
UsuarioRespuestaCompletoOO: R
,OOR S
fechaRespuestaPP *
=PP+ ,
usPP- /
.PP/ 0
FechaRespuestaPP0 >
}QQ 
)QQ 
;QQ 
}RR 
}TT 
}UU 
catchVV 
(VV 
	ExceptionVV 
)VV 
{WW 
reporteXX 
=XX 
newXX 
ListXX "
<XX" #
ReportePedidosXX# 1
>XX1 2
(XX2 3
)XX3 4
;XX4 5
}YY 
return[[ 
Task[[ 
.[[ 

FromResult[[ "
([[" #
reporte[[# *
)[[* +
;[[+ ,
}\\ 	
public^^ 
Task^^ 
<^^ 
List^^ 
<^^ 
ReporteStock^^ %
>^^% &
>^^& '
GetReporteStock^^( 7
(^^7 8
FiltroReporte^^8 E
filtro^^F L
)^^L M
{__ 	
List`` 
<`` 
ReporteStock`` 
>`` 
reporte`` &
=``' (
new``) ,
List``- 1
<``1 2
ReporteStock``2 >
>``> ?
(``? @
)``@ A
;``A B
tryaa 
{bb 
varcc 
resultcc 
=cc 
_contextcc %
.cc% &"
dbo_GetReporteReclamoscc& <
.cc< =

FromSqlRawcc= G
(ccG H
$strccH s
,ccs t
filtroccu {
.cc{ |
	fecInicio	cc| Ö
,
ccÖ Ü
filtro
ccá ç
.
ccç é
fecFin
ccé î
,
ccî ï
filtro
ccñ ú
.
ccú ù
idPedido
ccù •
)
cc• ¶
.
cc¶ ß
ToList
ccß ≠
(
cc≠ Æ
)
ccÆ Ø
;
ccØ ∞
ifff 
(ff 
resultff 
!=ff 
nullff "
)ff" #
{gg 
foreachhh 
(hh 
varhh  
ushh! #
inhh$ &
resulthh' -
)hh- .
{ii 
reportejj 
.jj  
Addjj  #
(jj# $
newjj$ '
ReporteStockjj( 4
{kk 
idll 
=ll  
usll! #
.ll# $
Idll$ &
,ll& '
detallemm #
=mm$ %
usmm& (
.mm( )
Detallemm) 0
,mm0 1
usuarioRegistronn +
=nn, -
usnn. 0
.nn0 1
UsuarioRegistronn1 @
,nn@ A#
usuarioRegistroCompletooo 3
=oo4 5
usoo6 8
.oo8 9#
UsuarioRegistroCompletooo9 P
,ooP Q
fechaReclamopp (
=pp) *
uspp+ -
.pp- .
FechaReclamopp. :
,pp: ;
tipoReclamoqq '
=qq( )
usqq* ,
.qq, -
TipoReclamoqq- 8
,qq8 9
pedidorr "
=rr# $
usrr% '
.rr' (
Pedidorr( .
,rr. /
clientess #
=ss$ %
usss& (
.ss( )
Clientess) 0
,ss0 1
	respuestatt %
=tt& '
ustt( *
.tt* +
	Respuestatt+ 4
,tt4 5
usuarioRespuestauu ,
=uu- .
usuu/ 1
.uu1 2
UsuarioRespuestauu2 B
,uuB C$
usuarioRespuestaCompletovv 4
=vv5 6
usvv7 9
.vv9 :$
UsuarioRespuestaCompletovv: R
,vvR S
fechaRespuestaww *
=ww+ ,
usww- /
.ww/ 0
FechaRespuestaww0 >
}xx 
)xx 
;xx 
}yy 
}{{ 
}|| 
catch}} 
(}} 
	Exception}} 
)}} 
{~~ 
reporte 
= 
new 
List "
<" #
ReporteStock# /
>/ 0
(0 1
)1 2
;2 3
}
ÄÄ 
return
ÇÇ 
Task
ÇÇ 
.
ÇÇ 

FromResult
ÇÇ "
(
ÇÇ" #
reporte
ÇÇ# *
)
ÇÇ* +
;
ÇÇ+ ,
}
ÉÉ 	
public
ÖÖ 
Task
ÖÖ 
<
ÖÖ 
List
ÖÖ 
<
ÖÖ 
ReporteReclamos
ÖÖ (
>
ÖÖ( )
>
ÖÖ) * 
GetReporteReclamos
ÖÖ+ =
(
ÖÖ= >
FiltroReporte
ÖÖ> K
filtro
ÖÖL R
)
ÖÖR S
{
ÜÜ 	
List
áá 
<
áá 
ReporteReclamos
áá  
>
áá  !
reporte
áá" )
=
áá* +
new
áá, /
List
áá0 4
<
áá4 5
ReporteReclamos
áá5 D
>
ááD E
(
ááE F
)
ááF G
;
ááG H
try
àà 
{
ââ 
var
ää 
result
ää 
=
ää 
_context
ää %
.
ää% &$
dbo_GetReporteReclamos
ää& <
.
ää< =

FromSqlRaw
ää= G
(
ääG H
$str
ääH x
,
ääx y
filtro
ãã 
.
ãã 
	fecInicio
ãã $
,
ãã$ %
filtro
åå 
.
åå 
fecFin
åå !
,
åå! "
filtro
çç 
.
çç 
idPedido
çç #
,
çç# $
filtro
éé 
.
éé 
idTipoReclamo
éé (
)
èè 
.
èè 
ToList
èè 
(
èè 
)
èè 
;
èè 
if
íí 
(
íí 
result
íí 
!=
íí 
null
íí "
)
íí" #
{
ìì 
foreach
îî 
(
îî 
var
îî  
us
îî! #
in
îî$ &
result
îî' -
)
îî- .
{
ïï 
reporte
ññ 
.
ññ  
Add
ññ  #
(
ññ# $
new
ññ$ '
ReporteReclamos
ññ( 7
{
óó 
id
òò 
=
òò  
us
òò! #
.
òò# $
Id
òò$ &
,
òò& '
detalle
ôô #
=
ôô$ %
us
ôô& (
.
ôô( )
Detalle
ôô) 0
,
ôô0 1
usuarioRegistro
öö +
=
öö, -
us
öö. 0
.
öö0 1
UsuarioRegistro
öö1 @
,
öö@ A%
usuarioRegistroCompleto
õõ 3
=
õõ4 5
us
õõ6 8
.
õõ8 9%
UsuarioRegistroCompleto
õõ9 P
,
õõP Q
fechaReclamo
úú (
=
úú) *
(
úú+ ,
us
úú, .
.
úú. /
FechaReclamo
úú/ ;
.
úú; <
Trim
úú< @
(
úú@ A
)
úúA B
==
úúC E
$str
úúF R
)
úúR S
?
úúT U
$str
úúV X
:
úúY Z
us
úú[ ]
.
úú] ^
FechaReclamo
úú^ j
.
úúj k
Trim
úúk o
(
úúo p
)
úúp q
,
úúq r
tipoReclamo
ùù '
=
ùù( )
us
ùù* ,
.
ùù, -
TipoReclamo
ùù- 8
,
ùù8 9
pedido
ûû "
=
ûû# $
us
ûû% '
.
ûû' (
Pedido
ûû( .
,
ûû. /
cliente
üü #
=
üü$ %
us
üü& (
.
üü( )
Cliente
üü) 0
,
üü0 1
	respuesta
†† %
=
††& '
us
††( *
.
††* +
	Respuesta
††+ 4
,
††4 5
usuarioRespuesta
°° ,
=
°°- .
us
°°/ 1
.
°°1 2
UsuarioRespuesta
°°2 B
,
°°B C&
usuarioRespuestaCompleto
¢¢ 4
=
¢¢5 6
us
¢¢7 9
.
¢¢9 :&
UsuarioRespuestaCompleto
¢¢: R
,
¢¢R S
fechaRespuesta
££ *
=
££+ ,
(
££- .
us
££. 0
.
££0 1
FechaRespuesta
££1 ?
.
££? @
Trim
££@ D
(
££D E
)
££E F
==
££G I
$str
££J V
)
££V W
?
££X Y
$str
££Z \
:
££] ^
us
££_ a
.
££a b
FechaRespuesta
££b p
.
££p q
Trim
££q u
(
££u v
)
££v w
}
§§ 
)
§§ 
;
§§ 
}
•• 
}
ßß 
}
®® 
catch
©© 
(
©© 
	Exception
©© 
)
©© 
{
™™ 
reporte
´´ 
=
´´ 
new
´´ 
List
´´ "
<
´´" #
ReporteReclamos
´´# 2
>
´´2 3
(
´´3 4
)
´´4 5
;
´´5 6
}
¨¨ 
return
ÆÆ 
Task
ÆÆ 
.
ÆÆ 

FromResult
ÆÆ "
(
ÆÆ" #
reporte
ÆÆ# *
)
ÆÆ* +
;
ÆÆ+ ,
}
ØØ 	
public
±± 
Task
±± 
<
±± 
List
±± 
<
±± 
ReporteDelivery
±± (
>
±±( )
>
±±) * 
GetReporteDelivery
±±+ =
(
±±= >
FiltroReporte
±±> K
filtro
±±L R
)
±±R S
{
≤≤ 	
List
≥≥ 
<
≥≥ 
ReporteDelivery
≥≥  
>
≥≥  !
reporte
≥≥" )
=
≥≥* +
new
≥≥, /
List
≥≥0 4
<
≥≥4 5
ReporteDelivery
≥≥5 D
>
≥≥D E
(
≥≥E F
)
≥≥F G
;
≥≥G H
try
¥¥ 
{
µµ 
var
∂∂ 
result
∂∂ 
=
∂∂ 
_context
∂∂ %
.
∂∂% &$
dbo_GetReporteReclamos
∂∂& <
.
∂∂< =

FromSqlRaw
∂∂= G
(
∂∂G H
$str
∂∂H s
,
∂∂s t
filtro
∂∂u {
.
∂∂{ |
	fecInicio∂∂| Ö
,∂∂Ö Ü
filtro∂∂á ç
.∂∂ç é
fecFin∂∂é î
,∂∂î ï
filtro∂∂ñ ú
.∂∂ú ù
idPedido∂∂ù •
)∂∂• ¶
.∂∂¶ ß
ToList∂∂ß ≠
(∂∂≠ Æ
)∂∂Æ Ø
;∂∂Ø ∞
if
ππ 
(
ππ 
result
ππ 
!=
ππ 
null
ππ "
)
ππ" #
{
∫∫ 
foreach
ªª 
(
ªª 
var
ªª  
us
ªª! #
in
ªª$ &
result
ªª' -
)
ªª- .
{
ºº 
reporte
ΩΩ 
.
ΩΩ  
Add
ΩΩ  #
(
ΩΩ# $
new
ΩΩ$ '
ReporteDelivery
ΩΩ( 7
{
ææ 
id
øø 
=
øø  
us
øø! #
.
øø# $
Id
øø$ &
,
øø& '
detalle
¿¿ #
=
¿¿$ %
us
¿¿& (
.
¿¿( )
Detalle
¿¿) 0
,
¿¿0 1
usuarioRegistro
¡¡ +
=
¡¡, -
us
¡¡. 0
.
¡¡0 1
UsuarioRegistro
¡¡1 @
,
¡¡@ A%
usuarioRegistroCompleto
¬¬ 3
=
¬¬4 5
us
¬¬6 8
.
¬¬8 9%
UsuarioRegistroCompleto
¬¬9 P
,
¬¬P Q
fechaReclamo
√√ (
=
√√) *
us
√√+ -
.
√√- .
FechaReclamo
√√. :
,
√√: ;
tipoReclamo
ƒƒ '
=
ƒƒ( )
us
ƒƒ* ,
.
ƒƒ, -
TipoReclamo
ƒƒ- 8
,
ƒƒ8 9
pedido
≈≈ "
=
≈≈# $
us
≈≈% '
.
≈≈' (
Pedido
≈≈( .
,
≈≈. /
cliente
∆∆ #
=
∆∆$ %
us
∆∆& (
.
∆∆( )
Cliente
∆∆) 0
,
∆∆0 1
	respuesta
«« %
=
««& '
us
««( *
.
««* +
	Respuesta
««+ 4
,
««4 5
usuarioRespuesta
»» ,
=
»»- .
us
»»/ 1
.
»»1 2
UsuarioRespuesta
»»2 B
,
»»B C&
usuarioRespuestaCompleto
…… 4
=
……5 6
us
……7 9
.
……9 :&
UsuarioRespuestaCompleto
……: R
,
……R S
fechaRespuesta
   *
=
  + ,
us
  - /
.
  / 0
FechaRespuesta
  0 >
}
ÀÀ 
)
ÀÀ 
;
ÀÀ 
}
ÃÃ 
}
ŒŒ 
}
œœ 
catch
–– 
(
–– 
	Exception
–– 
)
–– 
{
—— 
reporte
““ 
=
““ 
new
““ 
List
““ "
<
““" #
ReporteDelivery
““# 2
>
““2 3
(
““3 4
)
““4 5
;
““5 6
}
”” 
return
’’ 
Task
’’ 
.
’’ 

FromResult
’’ "
(
’’" #
reporte
’’# *
)
’’* +
;
’’+ ,
}
÷÷ 	
}
ÿÿ 
}ŸŸ ä
[D:\Proyectos\NetCore\UPC_PI2_Backend\PremierBeef.Infrastructure\Repository\RolRepository.cs
	namespace 	
PremierBeef
 
. 
Infrastructure $
.$ %

Repository% /
{ 
public 

class 
RolRepository 
:  
IRolRepository! /
{		 
private

 
readonly

 
PremierContext

 '
_context

( 0
;

0 1
public 
RolRepository 
( 
PremierContext +
context, 3
)3 4
{ 	
_context 
= 
context 
; 
} 	
public 
async 
Task 
< 
List 
< 
Rol "
>" #
># $
GetRoles% -
(- .
). /
{ 	
List 
< 
Rol 
> 
roles 
= 
new !
List" &
<& '
Rol' *
>* +
(+ ,
), -
;- .
try 
{ 
var 
result 
= 
await "
Task# '
.' (
Run( +
(+ ,
(, -
)- .
=>/ 1
_context2 :
.: ;
roles; @
.@ A
WhereA F
(F G
xG H
=>I K
xL M
.M N
EstadoN T
)T U
.U V
ToListAsyncV a
(a b
)b c
)c d
;d e
foreach 
( 
var 
us 
in  "
result# )
)) *
{ 
roles 
. 
Add 
( 
new !
Rol" %
{ 
id 
= 
us 
.  
Id  "
," #
nombre 
=  
us! #
.# $
Nombre$ *
,* +
descripcion #
=$ %
us& (
.( )
Descripcion) 4
,4 5
estado   
=    
us  ! #
.  # $
Estado  $ *
}!! 
)!! 
;!! 
}"" 
}## 
catch$$ 
($$ 
	Exception$$ 
)$$ 
{%% 
}'' 
return** 
roles** 
;** 
}++ 	
},, 
}-- Û
eD:\Proyectos\NetCore\UPC_PI2_Backend\PremierBeef.Infrastructure\Repository\TipoDocumentoRepository.cs
	namespace 	
PremierBeef
 
. 
Infrastructure $
.$ %

Repository% /
{ 
public 

class #
TipoDocumentoRepository (
:) *$
ITipoDocumentoRepository+ C
{		 
private

 
readonly

 
PremierContext

 '
_context

( 0
;

0 1
public #
TipoDocumentoRepository &
(& '
PremierContext' 5
context6 =
)= >
{ 	
_context 
= 
context 
; 
} 	
public 
async 
Task 
< 
List 
< 
TipoDocumento ,
>, -
>- .
GetTipoDocumentos/ @
(@ A
)A B
{ 	
List 
< 
TipoDocumento 
> 
tipos  %
=& '
new( +
List, 0
<0 1
TipoDocumento1 >
>> ?
(? @
)@ A
;A B
try 
{ 
var 
result 
= 
await "
Task# '
.' (
Run( +
(+ ,
(, -
)- .
=>/ 1
_context2 :
.: ;
tipoDocumentos; I
.I J
WhereJ O
(O P
xP Q
=>R T
xU V
.V W
EstadoW ]
)] ^
.^ _
ToListAsync_ j
(j k
)k l
)l m
;m n
foreach 
( 
var 
us 
in  "
result# )
)) *
{ 
tipos 
. 
Add 
( 
new !
TipoDocumento" /
{ 
id 
= 
us 
.  
Id  "
," #
nombre 
=  
us! #
.# $
Nombre$ *
,* +
descripcion #
=$ %
us& (
.( )
Descripcion) 4
,4 5#
longitudNumeroDocumento   /
=  0 1
us  2 4
.  4 5#
LongitudNumeroDocumento  5 L
,  L M
estado!! 
=!!  
us!!! #
.!!# $
Estado!!$ *
}"" 
)"" 
;"" 
}## 
}$$ 
catch%% 
(%% 
	Exception%% 
)%% 
{&& 
}(( 
return** 
tipos** 
;** 
}++ 	
},, 
}-- ¥§
_D:\Proyectos\NetCore\UPC_PI2_Backend\PremierBeef.Infrastructure\Repository\UsuarioRepository.cs
	namespace 	
PremierBeef
 
. 
Infrastructure $
.$ %

Repository% /
{ 
public		 

class		 
UsuarioRepository		 "
:		# $
IUsuarioRepository		% 7
{

 
private 
readonly 
PremierContext '
_context( 0
;0 1
public 
UsuarioRepository  
(  !
PremierContext! /
context0 7
)7 8
{ 	
_context 
= 
context 
; 
} 	
public 
Task 
< 
int 
> 

AddUsuario #
(# $
Usuario$ +
us, .
). /
{ 	
int 
newId 
= 
$num 
; 

tb_usuario 
tb_user 
=  
new! $

tb_usuario% /
{ 
Usuario 
= 
us 
. 
usuario $
,$ %
Clave 
= 
us 
. 
clave  
,  !
Correo 
= 
us 
. 
correo "
," #
Nombre 
= 
us 
. 
nombre "
," #

ApePaterno 
= 
us 
.  

apePaterno  *
,* +

ApeMaterno 
= 
us 
.  

apeMaterno  *
,* +
Telefono 
= 
us 
. 
telefono &
,& '
IdRol 
= 
us 
. 
idRol  
,  !
FecRegistro 
= 
us  
.  !
fecRegistro! ,
,, -
FecModificacion   
=    !
us  " $
.  $ %
fecModificacion  % 4
}!! 
;!! 
try## 
{$$ 
_context%% 
.%% 
usuarios%% !
.%%! "
Add%%" %
(%%% &
tb_user%%& -
)%%- .
;%%. /
_context&& 
.&& 
SaveChanges&& $
(&&$ %
)&&% &
;&&& '
newId(( 
=(( 
tb_user(( 
.((  
Id((  "
;((" #
})) 
catch** 
(** 
	Exception** 
)** 
{++ 
tb_user,, 
.,, 
Id,, 
=,, 
$num,, 
;,, 
}-- 
return// 
Task// 
.// 

FromResult// "
(//" #
newId//# (
)//( )
;//) *
}00 	
public22 
Task22 
<22 
bool22 
>22 
UpdateUsuario22 '
(22' (
Usuario22( /
us220 2
)222 3
{33 	
bool44 
result44 
=44 
false44 
;44  
try66 
{77 
var88 
usuario88 
=88 
_context88 &
.88& '
usuarios88' /
.88/ 0
Find880 4
(884 5
us885 7
.887 8
id888 :
)88: ;
;88; <
if:: 
(:: 
usuario:: 
!=:: 
null:: #
)::# $
{;; 
usuario<< 
.<< 
Usuario<< #
=<<$ %
usuario<<& -
.<<- .
Usuario<<. 5
;<<5 6
usuario== 
.== 
Clave== !
===" #
usuario==$ +
.==+ ,
Clave==, 1
;==1 2
usuario>> 
.>> 
Correo>> "
=>># $
us>>% '
.>>' (
correo>>( .
;>>. /
usuario?? 
.?? 
Nombre?? "
=??# $
us??% '
.??' (
nombre??( .
;??. /
usuario@@ 
.@@ 

ApePaterno@@ &
=@@' (
us@@) +
.@@+ ,

apePaterno@@, 6
;@@6 7
usuarioAA 
.AA 

ApeMaternoAA &
=AA' (
usAA) +
.AA+ ,

apeMaternoAA, 6
;AA6 7
usuarioBB 
.BB 
TelefonoBB $
=BB% &
usBB' )
.BB) *
telefonoBB* 2
;BB2 3
usuarioCC 
.CC 
IdRolCC !
=CC" #
usCC$ &
.CC& '
idRolCC' ,
;CC, -
usuarioDD 
.DD 
FecModificacionDD +
=DD, -
DateTimeDD. 6
.DD6 7
NowDD7 :
;DD: ;
_contextFF 
.FF 
usuariosFF %
.FF% &
AttachFF& ,
(FF, -
usuarioFF- 4
)FF4 5
;FF5 6
_contextHH 
.HH 
usuariosHH %
.HH% &
UpdateHH& ,
(HH, -
usuarioHH- 4
)HH4 5
;HH5 6
varJJ 
sdsJJ 
=JJ 
_contextJJ &
.JJ& '
SaveChangesJJ' 2
(JJ2 3
)JJ3 4
;JJ4 5
resultLL 
=LL 
trueLL !
;LL! "
}MM 
}NN 
catchOO 
(OO 
	ExceptionOO 
)OO 
{PP 
}RR 
returnTT 
TaskTT 
.TT 

FromResultTT "
(TT" #
resultTT# )
)TT) *
;TT* +
}UU 	
publicWW 
TaskWW 
<WW 
boolWW 
>WW 
RemoveUsuarioWW '
(WW' (
intWW( +
idWW, .
)WW. /
{XX 	
boolYY 
resultYY 
=YY 
falseYY 
;YY  
tryZZ 
{[[ 
var\\ 
usuario\\ 
=\\ 
_context\\ &
.\\& '
usuarios\\' /
.\\/ 0
Find\\0 4
(\\4 5
id\\5 7
)\\7 8
;\\8 9
if]] 
(]] 
usuario]] 
==]] 
null]] #
)]]# $
{^^ 
return__ 
Task__ 
.__  

FromResult__  *
(__* +
true__+ /
)__/ 0
;__0 1
}`` 
_contextbb 
.bb 
usuariosbb !
.bb! "
Removebb" (
(bb( )
usuariobb) 0
)bb0 1
;bb1 2
_contextcc 
.cc 
SaveChangescc $
(cc$ %
)cc% &
;cc& '
resultee 
=ee 
trueee 
;ee 
}ff 
catchgg 
(gg 
	Exceptiongg 
)gg 
{hh 
resultii 
=ii 
falseii 
;ii 
}jj 
returnkk 
Taskkk 
.kk 

FromResultkk "
(kk" #
resultkk# )
)kk) *
;kk* +
}ll 	
publicnn 
Tasknn 
<nn 
Usuarionn 
>nn 
GetUsuarioByIdnn +
(nn+ ,
intnn, /
idnn0 2
)nn2 3
{oo 	
varpp 
uspp 
=pp 
_contextpp 
.pp 
usuariospp &
.pp& '
Findpp' +
(pp+ ,
idpp, .
)pp. /
;pp/ 0
ifrr 
(rr 
usrr 
!=rr 
nullrr 
)rr 
{ss 
Usuariott 
tb_usertt 
=tt  !
newtt" %
Usuariott& -
{uu 
idvv 
=vv 
usvv 
.vv 
Idvv 
,vv 
usuarioww 
=ww 
usww  
.ww  !
Usuarioww! (
,ww( )
clavexx 
=xx 
usxx 
.xx 
Clavexx $
,xx$ %
correoyy 
=yy 
usyy 
.yy  
Correoyy  &
,yy& '
nombrezz 
=zz 
uszz 
.zz  
Nombrezz  &
,zz& '

apePaterno{{ 
={{  
us{{! #
.{{# $

ApePaterno{{$ .
,{{. /

apeMaterno|| 
=||  
us||! #
.||# $

ApeMaterno||$ .
,||. /
telefono}} 
=}} 
us}} !
.}}! "
Telefono}}" *
,}}* +
idRol~~ 
=~~ 
us~~ 
.~~ 
IdRol~~ $
,~~$ %
fecRegistro 
=  !
us" $
.$ %
FecRegistro% 0
,0 1
fecModificacion
ÄÄ #
=
ÄÄ$ %
us
ÄÄ& (
.
ÄÄ( )
FecModificacion
ÄÄ) 8
}
ÅÅ 
;
ÅÅ 
_context
ÉÉ 
.
ÉÉ 
Entry
ÉÉ 
(
ÉÉ 
us
ÉÉ !
)
ÉÉ! "
.
ÉÉ" #
State
ÉÉ# (
=
ÉÉ) *
EntityState
ÉÉ+ 6
.
ÉÉ6 7
Detached
ÉÉ7 ?
;
ÉÉ? @
return
ÖÖ 
Task
ÖÖ 
.
ÖÖ 

FromResult
ÖÖ &
(
ÖÖ& '
tb_user
ÖÖ' .
)
ÖÖ. /
;
ÖÖ/ 0
}
ÜÜ 
else
áá 
return
àà 
Task
àà 
.
àà 

FromResult
àà &
<
àà& '
Usuario
àà' .
>
àà. /
(
àà/ 0
null
àà0 4
)
àà4 5
;
àà5 6
}
ââ 	
public
ãã 
Task
ãã 
<
ãã 
Usuario
ãã 
>
ãã !
GetUsuarioByUsuario
ãã 0
(
ãã0 1
string
ãã1 7
usuario
ãã8 ?
)
ãã? @
{
åå 	
try
çç 
{
éé 
var
èè 
us
èè 
=
èè 
_context
èè !
.
èè! "
usuarios
èè" *
.
èè* +
Where
èè+ 0
(
èè0 1
x
èè1 2
=>
èè3 5
x
èè6 7
.
èè7 8
Usuario
èè8 ?
.
èè? @
Trim
èè@ D
(
èèD E
)
èèE F
.
èèF G
ToLower
èèG N
(
èèN O
)
èèO P
.
èèP Q
Equals
èèQ W
(
èèW X
usuario
èèX _
.
èè_ `
ToLower
èè` g
(
èèg h
)
èèh i
)
èèi j
)
èèj k
.
èèk l
FirstOrDefault
èèl z
(
èèz {
)
èè{ |
;
èè| }
if
ëë 
(
ëë 
us
ëë 
!=
ëë 
null
ëë 
)
ëë 
{
íí 
Usuario
ìì 
tb_user
ìì #
=
ìì$ %
new
ìì& )
Usuario
ìì* 1
{
îî 
id
ïï 
=
ïï 
us
ïï 
.
ïï  
Id
ïï  "
,
ïï" #
usuario
ññ 
=
ññ  !
us
ññ" $
.
ññ$ %
Usuario
ññ% ,
,
ññ, -
clave
óó 
=
óó 
us
óó  "
.
óó" #
Clave
óó# (
,
óó( )
nombre
òò 
=
òò  
us
òò! #
.
òò# $
Nombre
òò$ *
,
òò* +

apePaterno
ôô "
=
ôô# $
us
ôô% '
.
ôô' (

ApePaterno
ôô( 2
,
ôô2 3

apeMaterno
öö "
=
öö# $
us
öö% '
.
öö' (

ApeMaterno
öö( 2
,
öö2 3
correo
õõ 
=
õõ  
us
õõ! #
.
õõ# $
Correo
õõ$ *
,
õõ* +
telefono
úú  
=
úú! "
us
úú# %
.
úú% &
Telefono
úú& .
,
úú. /
idRol
ùù 
=
ùù 
us
ùù  "
.
ùù" #
IdRol
ùù# (
,
ùù( )
fecRegistro
ûû #
=
ûû$ %
us
ûû& (
.
ûû( )
FecRegistro
ûû) 4
,
ûû4 5
fecModificacion
üü '
=
üü( )
us
üü* ,
.
üü, -
FecModificacion
üü- <
}
†† 
;
†† 
return
¢¢ 
Task
¢¢ 
.
¢¢  

FromResult
¢¢  *
(
¢¢* +
tb_user
¢¢+ 2
)
¢¢2 3
;
¢¢3 4
}
££ 
}
•• 
catch
¶¶ 
(
¶¶ 
	Exception
¶¶ 
)
¶¶ 
{
ßß 
throw
©© 
;
©© 
}
™™ 
return
¨¨ 
Task
¨¨ 
.
¨¨ 

FromResult
¨¨ "
<
¨¨" #
Usuario
¨¨# *
>
¨¨* +
(
¨¨+ ,
null
¨¨, 0
)
¨¨0 1
;
¨¨1 2
}
≠≠ 	
public
ØØ 
Task
ØØ 
<
ØØ 
Usuario
ØØ 
>
ØØ  
GetUsuarioByCorreo
ØØ /
(
ØØ/ 0
string
ØØ0 6
correo
ØØ7 =
)
ØØ= >
{
∞∞ 	
try
±± 
{
≤≤ 
var
≥≥ 
us
≥≥ 
=
≥≥ 
_context
≥≥ !
.
≥≥! "
usuarios
≥≥" *
.
≥≥* +
Where
≥≥+ 0
(
≥≥0 1
x
≥≥1 2
=>
≥≥3 5
x
≥≥6 7
.
≥≥7 8
Correo
≥≥8 >
.
≥≥> ?
Trim
≥≥? C
(
≥≥C D
)
≥≥D E
.
≥≥E F
ToLower
≥≥F M
(
≥≥M N
)
≥≥N O
.
≥≥O P
Equals
≥≥P V
(
≥≥V W
correo
≥≥W ]
.
≥≥] ^
ToLower
≥≥^ e
(
≥≥e f
)
≥≥f g
)
≥≥g h
)
≥≥h i
.
≥≥i j
FirstOrDefault
≥≥j x
(
≥≥x y
)
≥≥y z
;
≥≥z {
if
µµ 
(
µµ 
us
µµ 
!=
µµ 
null
µµ 
)
µµ 
{
∂∂ 
Usuario
∑∑ 
tb_user
∑∑ #
=
∑∑$ %
new
∑∑& )
Usuario
∑∑* 1
{
∏∏ 
id
ππ 
=
ππ 
us
ππ 
.
ππ  
Id
ππ  "
,
ππ" #
usuario
∫∫ 
=
∫∫  !
us
∫∫" $
.
∫∫$ %
Usuario
∫∫% ,
,
∫∫, -
clave
ªª 
=
ªª 
us
ªª  "
.
ªª" #
Clave
ªª# (
,
ªª( )
correo
ºº 
=
ºº  
us
ºº! #
.
ºº# $
Correo
ºº$ *
,
ºº* +
nombre
ΩΩ 
=
ΩΩ  
us
ΩΩ! #
.
ΩΩ# $
Nombre
ΩΩ$ *
,
ΩΩ* +

apePaterno
ææ "
=
ææ# $
us
ææ% '
.
ææ' (

ApePaterno
ææ( 2
,
ææ2 3

apeMaterno
øø "
=
øø# $
us
øø% '
.
øø' (

ApeMaterno
øø( 2
,
øø2 3
telefono
¿¿  
=
¿¿! "
us
¿¿# %
.
¿¿% &
Telefono
¿¿& .
,
¿¿. /
idRol
¡¡ 
=
¡¡ 
us
¡¡  "
.
¡¡" #
IdRol
¡¡# (
,
¡¡( )
fecRegistro
¬¬ #
=
¬¬$ %
us
¬¬& (
.
¬¬( )
FecRegistro
¬¬) 4
,
¬¬4 5
fecModificacion
√√ '
=
√√( )
us
√√* ,
.
√√, -
FecModificacion
√√- <
}
ƒƒ 
;
ƒƒ 
return
∆∆ 
Task
∆∆ 
.
∆∆  

FromResult
∆∆  *
(
∆∆* +
tb_user
∆∆+ 2
)
∆∆2 3
;
∆∆3 4
}
«« 
}
…… 
catch
   
(
   
	Exception
   
)
   
{
ÀÀ 
throw
ÕÕ 
;
ÕÕ 
}
ŒŒ 
return
–– 
Task
–– 
.
–– 

FromResult
–– "
<
––" #
Usuario
––# *
>
––* +
(
––+ ,
null
––, 0
)
––0 1
;
––1 2
}
—— 	
public
”” 
async
”” 
Task
”” 
<
”” 
List
”” 
<
”” 
Usuario
”” &
>
””& '
>
””' (
GetUsuarios
””) 4
(
””4 5
)
””5 6
{
‘‘ 	
List
’’ 
<
’’ 
Usuario
’’ 
>
’’ 
usuarios
’’ "
=
’’# $
new
’’% (
List
’’) -
<
’’- .
Usuario
’’. 5
>
’’5 6
(
’’6 7
)
’’7 8
;
’’8 9
try
◊◊ 
{
ÿÿ 
var
ŸŸ 
result
ŸŸ 
=
ŸŸ 
await
ŸŸ "
Task
ŸŸ# '
.
ŸŸ' (
Run
ŸŸ( +
(
ŸŸ+ ,
(
ŸŸ, -
)
ŸŸ- .
=>
ŸŸ/ 1
_context
ŸŸ2 :
.
ŸŸ: ;
usuarios
ŸŸ; C
.
ŸŸC D
AsNoTracking
ŸŸD P
(
ŸŸP Q
)
ŸŸQ R
.
ŸŸR S
ToListAsync
ŸŸS ^
(
ŸŸ^ _
)
ŸŸ_ `
)
ŸŸ` a
;
ŸŸa b
foreach
€€ 
(
€€ 
var
€€ 
us
€€ 
in
€€  "
result
€€# )
)
€€) *
{
‹‹ 
usuarios
›› 
.
›› 
Add
››  
(
››  !
new
››! $
Usuario
››% ,
{
ﬁﬁ 
id
ﬂﬂ 
=
ﬂﬂ 
us
ﬂﬂ 
.
ﬂﬂ  
Id
ﬂﬂ  "
,
ﬂﬂ" #
usuario
‡‡ 
=
‡‡  !
us
‡‡" $
.
‡‡$ %
Usuario
‡‡% ,
,
‡‡, -
clave
·· 
=
·· 
us
··  "
.
··" #
Clave
··# (
,
··( )
correo
‚‚ 
=
‚‚  
us
‚‚! #
.
‚‚# $
Correo
‚‚$ *
,
‚‚* +
nombre
„„ 
=
„„  
us
„„! #
.
„„# $
Nombre
„„$ *
,
„„* +

apePaterno
‰‰ "
=
‰‰# $
us
‰‰% '
.
‰‰' (

ApePaterno
‰‰( 2
,
‰‰2 3

apeMaterno
ÂÂ "
=
ÂÂ# $
us
ÂÂ% '
.
ÂÂ' (

ApeMaterno
ÂÂ( 2
,
ÂÂ2 3
telefono
ÊÊ  
=
ÊÊ! "
us
ÊÊ# %
.
ÊÊ% &
Telefono
ÊÊ& .
,
ÊÊ. /
idRol
ÁÁ 
=
ÁÁ 
us
ÁÁ  "
.
ÁÁ" #
IdRol
ÁÁ# (
,
ÁÁ( )
fecRegistro
ËË #
=
ËË$ %
us
ËË& (
.
ËË( )
FecRegistro
ËË) 4
,
ËË4 5
fecModificacion
ÈÈ '
=
ÈÈ( )
us
ÈÈ* ,
.
ÈÈ, -
FecModificacion
ÈÈ- <
}
ÍÍ 
)
ÍÍ 
;
ÍÍ 
}
ÎÎ 
}
ÏÏ 
catch
ÌÌ 
(
ÌÌ 
	Exception
ÌÌ 
)
ÌÌ 
{
ÓÓ 
}
 
return
ÛÛ 
usuarios
ÛÛ 
;
ÛÛ 
}
ÙÙ 	
public
ˆˆ 
Task
ˆˆ 
<
ˆˆ 
bool
ˆˆ 
>
ˆˆ 
UpdateContrase√±a
ˆˆ *
(
ˆˆ* +
string
ˆˆ+ 1
correo
ˆˆ2 8
,
ˆˆ8 9
string
ˆˆ: @
nuevaContrase√±a
ˆˆA P
)
ˆˆP Q
{
˜˜ 	
bool
¯¯ 
result
¯¯ 
=
¯¯ 
false
¯¯ 
;
¯¯  
try
˘˘ 
{
˙˙ 
var
˚˚ 
usuario
˚˚ 
=
˚˚ 
_context
˚˚ &
.
˚˚& '
usuarios
˚˚' /
.
˚˚/ 0
Where
˚˚0 5
(
˚˚5 6
x
˚˚6 7
=>
˚˚8 :
x
˚˚; <
.
˚˚< =
Correo
˚˚= C
.
˚˚C D
Trim
˚˚D H
(
˚˚H I
)
˚˚I J
.
˚˚J K
ToLower
˚˚K R
(
˚˚R S
)
˚˚S T
.
˚˚T U
Equals
˚˚U [
(
˚˚[ \
correo
˚˚\ b
.
˚˚b c
ToLower
˚˚c j
(
˚˚j k
)
˚˚k l
)
˚˚l m
)
˚˚m n
.
˚˚n o
FirstOrDefault
˚˚o }
(
˚˚} ~
)
˚˚~ 
;˚˚ Ä
if
˝˝ 
(
˝˝ 
usuario
˝˝ 
!=
˝˝ 
null
˝˝ #
)
˝˝# $
{
˛˛ 
usuario
ˇˇ 
.
ˇˇ 
Clave
ˇˇ !
=
ˇˇ" #
nuevaContrase√±a
ˇˇ$ 3
.
ˇˇ3 4
Trim
ˇˇ4 8
(
ˇˇ8 9
)
ˇˇ9 :
;
ˇˇ: ;
usuario
ÄÄ 
.
ÄÄ 
FecModificacion
ÄÄ +
=
ÄÄ, -
DateTime
ÄÄ. 6
.
ÄÄ6 7
Now
ÄÄ7 :
;
ÄÄ: ;
_context
ÇÇ 
.
ÇÇ 
Update
ÇÇ #
(
ÇÇ# $
usuario
ÇÇ$ +
)
ÇÇ+ ,
;
ÇÇ, -
_context
ÉÉ 
.
ÉÉ 
SaveChanges
ÉÉ (
(
ÉÉ( )
)
ÉÉ) *
;
ÉÉ* +
result
ÖÖ 
=
ÖÖ 
true
ÖÖ !
;
ÖÖ! "
}
ÜÜ 
}
áá 
catch
àà 
(
àà 
	Exception
àà 
)
àà 
{
ââ 
result
ää 
=
ää 
false
ää 
;
ää 
}
ãã 
return
çç 
Task
çç 
.
çç 

FromResult
çç "
(
çç" #
result
çç# )
)
çç) *
;
çç* +
}
éé 	
}
êê 
}ëë 